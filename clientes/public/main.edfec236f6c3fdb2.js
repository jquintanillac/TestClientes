(self.webpackChunkclientes=self.webpackChunkclientes||[]).push([[179],{2011:(nt,Te,P)=>{"use strict";P.d(Te,{hO:()=>Be,xv:()=>de,Dh:()=>ce,GT:()=>fe,cc:()=>be,on:()=>j,pX:()=>te});var f=P(5e3),X=P(127),O=P(5813);nt=P.hmd(nt);const pe=["ngOnDestroy"],te=(ae,Re,Ie,ee={})=>new Proxy(ae,{get:(Se,ve)=>Ie.runOutsideAngular(()=>{var He;if(ae[ve])return(null===(He=null==ee?void 0:ee.spy)||void 0===He?void 0:He.get)&&ee.spy.get(ve,ae[ve]),ae[ve];if(pe.indexOf(ve)>-1)return()=>{};const je=Re.toPromise().then(se=>{const Z=se&&se[ve];return"function"==typeof Z?Z.bind(se):Z&&Z.then?Z.then(ie=>Ie.run(()=>ie)):Ie.run(()=>Z)});return new Proxy(()=>{},{get:(se,Z)=>je[Z],apply:(se,Z,ie)=>je.then(ge=>{var oe;const xe=ge&&ge(...ie);return(null===(oe=null==ee?void 0:ee.spy)||void 0===oe?void 0:oe.apply)&&ee.spy.apply(ve,ie,xe),xe})})})}),fe=(ae,Re)=>{Re.forEach(Ie=>{Object.getOwnPropertyNames(Ie.prototype||Ie).forEach(ee=>{Object.defineProperty(ae.prototype,ee,Object.getOwnPropertyDescriptor(Ie.prototype||Ie,ee))})})};class re{constructor(Re){return Re}}const ce=new f.OlP("angularfire2.app.options"),de=new f.OlP("angularfire2.app.name");function j(ae,Re,Ie){const Se="object"==typeof Ie&&Ie||{};Se.name=Se.name||"string"==typeof Ie&&Ie||"[DEFAULT]";const He=X.Z.apps.filter(je=>je&&je.name===Se.name)[0]||Re.runOutsideAngular(()=>X.Z.initializeApp(ae,Se));try{JSON.stringify(ae)!==JSON.stringify(He.options)&&U("error",`${He.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new re(He)}const U=(ae,...Re)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[ae](...Re)},Q={provide:re,useFactory:j,deps:[ce,f.R0b,[new f.FiY,de]]};let Be=(()=>{class ae{constructor(Ie){X.Z.registerVersion("angularfire",O.q4.full,"core"),X.Z.registerVersion("angularfire",O.q4.full,"app-compat"),X.Z.registerVersion("angular",f.q4F.full,Ie.toString())}static initializeApp(Ie,ee){return{ngModule:ae,providers:[{provide:ce,useValue:Ie},{provide:de,useValue:ee}]}}}return ae.\u0275fac=function(Ie){return new(Ie||ae)(f.LFG(f.Lbi))},ae.\u0275mod=f.oAB({type:ae}),ae.\u0275inj=f.cJS({providers:[Q]}),ae})();function be(ae,Re,Ie,ee,Se){const[,ve,He]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===ae)||[];if(ve)return function Ne(ae,Re){try{return ae.toString()===Re.toString()}catch(Ie){return ae===Re}}(Se,He)||(W("error",`${Re} was already initialized on the ${Ie} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),W("warn",{is:Se,was:He})),ve;{const je=ee();return globalThis.\u0275AngularfireInstanceCache.push([ae,je,Se]),je}}const Le=!!nt.hot,W=(ae,...Re)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[ae](...Re)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(nt,Te,P)=>{"use strict";P.d(Te,{q4:()=>Yo,iC:()=>vs,HU:()=>Cu,vb:()=>pd,JM:()=>fd});var f=P(5e3),X=P(5867),O=P(5861),pe=P(9681),te=P(2090),fe=P(4859),re=P(1877),ce=P(2940);const de="@firebase/installations",j="0.5.5",Q=`w:${j}`,Be="FIS_v2",Re=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ie(b){return b instanceof te.ZR&&b.code.includes("request-failed")}function ee({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Se(b){return{token:b.token,requestStatus:2,expiresIn:ge(b.expiresIn),creationTime:Date.now()}}function ve(b,T){return He.apply(this,arguments)}function He(){return(He=(0,O.Z)(function*(b,T){const F=(yield T.json()).error;return Re.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function se(b,{refreshToken:T}){const R=je(b);return R.append("Authorization",function oe(b){return`${Be} ${b}`}(T)),R}function Z(b){return ie.apply(this,arguments)}function ie(){return(ie=(0,O.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function ge(b){return Number(b.replace("s","000"))}function xe(b,T){return he.apply(this,arguments)}function he(){return(he=(0,O.Z)(function*(b,{fid:T}){const R=ee(b),Y={method:"POST",headers:je(b),body:JSON.stringify({fid:T,authVersion:Be,appId:b.appId,sdkVersion:Q})},Ce=yield Z(()=>fetch(R,Y));if(Ce.ok){const Ue=yield Ce.json();return{fid:Ue.fid||T,registrationStatus:2,refreshToken:Ue.refreshToken,authToken:Se(Ue.authToken)}}throw yield ve("Create Installation",Ce)})).apply(this,arguments)}function yt(b){return new Promise(T=>{setTimeout(T,b)})}const Rn=/^[cdef][\w-]{21}$/;function ot(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const R=function Fn(b){return function jt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Rn.test(R)?R:""}catch(b){return""}}function Kt(b){return`${b.appName}!${b.appId}`}const hr=new Map;function qt(b,T){const R=Kt(b);xt(R,T),function rs(b,T){const R=function As(){return!rr&&"BroadcastChannel"in self&&(rr=new BroadcastChannel("[Firebase] FID Change"),rr.onmessage=b=>{xt(b.data.key,b.data.fid)}),rr}();R&&R.postMessage({key:b,fid:T}),function Cr(){0===hr.size&&rr&&(rr.close(),rr=null)}()}(R,T)}function xt(b,T){const R=hr.get(b);if(R)for(const F of R)F(T)}let rr=null;const ai="firebase-installations-store";let Li=null;function ht(){return Li||(Li=(0,ce.openDb)("firebase-installations-database",1,b=>{0===b.oldVersion&&b.createObjectStore(ai)})),Li}function $r(b,T){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(b,T){const R=Kt(b),z=(yield ht()).transaction(ai,"readwrite"),Y=z.objectStore(ai),Ce=yield Y.get(R);return yield Y.put(T,R),yield z.complete,(!Ce||Ce.fid!==T.fid)&&qt(b,T.fid),T})).apply(this,arguments)}function In(b){return eo.apply(this,arguments)}function eo(){return(eo=(0,O.Z)(function*(b){const T=Kt(b),F=(yield ht()).transaction(ai,"readwrite");yield F.objectStore(ai).delete(T),yield F.complete})).apply(this,arguments)}function pt(b,T){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,O.Z)(function*(b,T){const R=Kt(b),z=(yield ht()).transaction(ai,"readwrite"),Y=z.objectStore(ai),Ce=yield Y.get(R),Ue=T(Ce);return void 0===Ue?yield Y.delete(R):yield Y.put(Ue,R),yield z.complete,Ue&&(!Ce||Ce.fid!==Ue.fid)&&qt(b,Ue.fid),Ue})).apply(this,arguments)}function Mt(b){return sn.apply(this,arguments)}function sn(){return(sn=(0,O.Z)(function*(b){let T;const R=yield pt(b,F=>{const z=fr(F),Y=Rt(b,z);return T=Y.registrationPromise,Y.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function fr(b){return ma(b||{fid:ot(),registrationStatus:0})}function Rt(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Re.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},F=function Ye(b,T){return at.apply(this,arguments)}(b,R);return{installationEntry:R,registrationPromise:F}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Di(b)}:{installationEntry:T}}function at(){return(at=(0,O.Z)(function*(b,T){try{return $r(b,yield xe(b,T))}catch(R){throw Ie(R)&&409===R.customData.serverCode?yield In(b):yield $r(b,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Di(b){return is.apply(this,arguments)}function is(){return(is=(0,O.Z)(function*(b){let T=yield Ft(b);for(;1===T.registrationStatus;)yield yt(100),T=yield Ft(b);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:F}=yield Mt(b);return F||R}return T})).apply(this,arguments)}function Ft(b){return pt(b,T=>{if(!T)throw Re.create("installation-not-found");return ma(T)})}function ma(b){return function Hr(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function ui(b,T){return V.apply(this,arguments)}function V(){return(V=(0,O.Z)(function*({appConfig:b,platformLoggerProvider:T},R){const F=$(b,R),z=se(b,R),Y=T.getImmediate({optional:!0});Y&&z.append("x-firebase-client",Y.getPlatformInfoString());const Ue={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:Q}})},Ge=yield Z(()=>fetch(F,Ue));if(Ge.ok)return Se(yield Ge.json());throw yield ve("Generate Auth Token",Ge)})).apply(this,arguments)}function $(b,{fid:T}){return`${ee(b)}/${T}/authTokens:generate`}function H(b){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*(b,T=!1){let R;const F=yield pt(b.appConfig,Y=>{if(!on(Y))throw Re.create("not-registered");const Ce=Y.authToken;if(!T&&Gr(Ce))return Y;if(1===Ce.requestStatus)return R=ne(b,T),Y;{if(!navigator.onLine)throw Re.create("app-offline");const Ue=Vn(Y);return R=Yt(b,Ue),Ue}});return R?yield R:F.authToken})).apply(this,arguments)}function ne(b,T){return ze.apply(this,arguments)}function ze(){return(ze=(0,O.Z)(function*(b,T){let R=yield ft(b.appConfig);for(;1===R.authToken.requestStatus;)yield yt(100),R=yield ft(b.appConfig);const F=R.authToken;return 0===F.requestStatus?H(b,T):F})).apply(this,arguments)}function ft(b){return pt(b,T=>{if(!on(T))throw Re.create("not-registered");return function Ar(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Yt(b,T){return rn.apply(this,arguments)}function rn(){return(rn=(0,O.Z)(function*(b,T){try{const R=yield ui(b,T),F=Object.assign(Object.assign({},T),{authToken:R});return yield $r(b.appConfig,F),R}catch(R){if(!Ie(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const F=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield $r(b.appConfig,F)}else yield In(b.appConfig);throw R}})).apply(this,arguments)}function on(b){return void 0!==b&&2===b.registrationStatus}function Gr(b){return 2===b.requestStatus&&!function At(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function Vn(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function ya(){return(ya=(0,O.Z)(function*(b){const T=b,{installationEntry:R,registrationPromise:F}=yield Mt(T.appConfig);return F?F.catch(console.error):H(T).catch(console.error),R.fid})).apply(this,arguments)}function _a(){return(_a=(0,O.Z)(function*(b,T=!1){const R=b;return yield Un(R.appConfig),(yield H(R,T)).token})).apply(this,arguments)}function Un(b){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,O.Z)(function*(b){const{registrationPromise:T}=yield Mt(b);T&&(yield T)})).apply(this,arguments)}function Po(b){return Re.create("missing-app-config-values",{valueName:b})}const zr="installations",It=b=>{const T=b.getProvider("app").getImmediate(),R=function ir(b){if(!b||!b.options)throw Po("App Configuration");if(!b.name)throw Po("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!b.options[R])throw Po(R);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:R,platformLoggerProvider:(0,pe._getProvider)(T,"platform-logger"),_delete:()=>Promise.resolve()}},en=b=>{const T=b.getProvider("app").getImmediate(),R=(0,pe._getProvider)(T,zr).getImmediate();return{getId:()=>function su(b){return ya.apply(this,arguments)}(R),getToken:z=>function ou(b){return _a.apply(this,arguments)}(R,z)}};(function Mr(){(0,pe._registerComponent)(new fe.wA(zr,It,"PUBLIC")),(0,pe._registerComponent)(new fe.wA("installations-internal",en,"PRIVATE"))})(),(0,pe.registerVersion)(de,j),(0,pe.registerVersion)(de,j,"esm2017");const os="@firebase/remote-config",pn=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Gc{constructor(T,R,F,z){this.client=T,this.storage=R,this.storageCache=F,this.logger=z}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-R,z=F<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${z}.`),z}fetch(T){var R=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(z&&R.isCachedDataFresh(T.cacheMaxAgeMillis,F))return z;T.eTag=z&&z.eTag;const Y=yield R.client.fetch(T),Ce=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Y.status&&Ce.push(R.storage.setLastSuccessfulFetchResponse(Y)),yield Promise.all(Ce),Y})()}}function uu(b=navigator){return b.languages&&b.languages[0]||b.language}class xn{constructor(T,R,F,z,Y,Ce){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=F,this.projectId=z,this.apiKey=Y,this.appId=Ce}fetch(T){var R=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Ce=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ue={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Ge={sdk_version:R.sdkVersion,app_instance_id:F,app_instance_id_token:z,app_id:R.appId,language_code:uu()},Lt={method:"POST",headers:Ue,body:JSON.stringify(Ge)},Ht=fetch(Ce,Lt),An=new Promise((ws,Or)=>{T.signal.addEventListener(()=>{const Xo=new Error("The operation was aborted.");Xo.name="AbortError",Or(Xo)})});let Er;try{yield Promise.race([Ht,An]),Er=yield Ht}catch(ws){let Or="fetch-client-network";throw"AbortError"===ws.name&&(Or="fetch-timeout"),pn.create(Or,{originalErrorMessage:ws.message})}let fn=Er.status;const Es=Er.headers.get("ETag")||void 0;let qi,xr;if(200===Er.status){let ws;try{ws=yield Er.json()}catch(Or){throw pn.create("fetch-client-parse",{originalErrorMessage:Or.message})}qi=ws.entries,xr=ws.state}if("INSTANCE_STATE_UNSPECIFIED"===xr?fn=500:"NO_CHANGE"===xr?fn=304:("NO_TEMPLATE"===xr||"EMPTY_CONFIG"===xr)&&(qi={}),304!==fn&&200!==fn)throw pn.create("fetch-status",{httpStatus:fn});return{status:fn,eTag:Es,config:qi}})()}}class us{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,O.Z)(function*(){const F=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,F)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:F}){var z=this;return(0,O.Z)(function*(){yield function qc(b,T){return new Promise((R,F)=>{const z=Math.max(T-Date.now(),0),Y=setTimeout(R,z);b.addEventListener(()=>{clearTimeout(Y),F(pn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const Y=yield z.client.fetch(T);return yield z.storage.deleteThrottleMetadata(),Y}catch(Y){if(!function sg(b){if(!(b instanceof te.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(Y))throw Y;const Ce={throttleEndTimeMillis:Date.now()+(0,te.$s)(F),backoffCount:F+1};return yield z.storage.setThrottleMetadata(Ce),z.attemptFetch(T,Ce)}})()}}class ag{constructor(T,R,F,z,Y){this.app=T,this._client=R,this._storageCache=F,this._storage=z,this._logger=Y,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ea(b,T){const R=b.target.error||void 0;return pn.create(T,{originalErrorMessage:R&&R.message})}const Uo="app_namespace_store";class Zc{constructor(T,R,F,z=function lg(){return new Promise((b,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=F=>{T(Ea(F,"storage-open"))},R.onsuccess=F=>{b(F.target.result)},R.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Uo,{keyPath:"compositeKey"})}}catch(R){T(pn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=T,this.appName=R,this.namespace=F,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,O.Z)(function*(){const F=yield R.openDbPromise;return new Promise((z,Y)=>{const Ue=F.transaction([Uo],"readonly").objectStore(Uo),Ge=R.createCompositeKey(T);try{const Lt=Ue.get(Ge);Lt.onerror=Ht=>{Y(Ea(Ht,"storage-get"))},Lt.onsuccess=Ht=>{const An=Ht.target.result;z(An?An.value:void 0)}}catch(Lt){Y(pn.create("storage-get",{originalErrorMessage:Lt&&Lt.message}))}})})()}set(T,R){var F=this;return(0,O.Z)(function*(){const z=yield F.openDbPromise;return new Promise((Y,Ce)=>{const Ge=z.transaction([Uo],"readwrite").objectStore(Uo),Lt=F.createCompositeKey(T);try{const Ht=Ge.put({compositeKey:Lt,value:R});Ht.onerror=An=>{Ce(Ea(An,"storage-set"))},Ht.onsuccess=()=>{Y()}}catch(Ht){Ce(pn.create("storage-set",{originalErrorMessage:Ht&&Ht.message}))}})})()}delete(T){var R=this;return(0,O.Z)(function*(){const F=yield R.openDbPromise;return new Promise((z,Y)=>{const Ue=F.transaction([Uo],"readwrite").objectStore(Uo),Ge=R.createCompositeKey(T);try{const Lt=Ue.delete(Ge);Lt.onerror=Ht=>{Y(Ea(Ht,"storage-delete"))},Lt.onsuccess=()=>{z()}}catch(Lt){Y(pn.create("storage-delete",{originalErrorMessage:Lt&&Lt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Bo{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const R=T.storage.getLastFetchStatus(),F=T.storage.getLastSuccessfulFetchTimestampMillis(),z=T.storage.getActiveConfig(),Y=yield R;Y&&(T.lastFetchStatus=Y);const Ce=yield F;Ce&&(T.lastSuccessfulFetchTimestampMillis=Ce);const Ue=yield z;Ue&&(T.activeConfig=Ue)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Cy(){return wa.apply(this,arguments)}function wa(){return(wa=(0,O.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(b){return!1}})).apply(this,arguments)}!function cg(){(0,pe._registerComponent)(new fe.wA("remote-config",function b(T,{instanceIdentifier:R}){const F=T.getProvider("app").getImmediate(),z=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw pn.create("registration-window");if(!(0,te.hl)())throw pn.create("indexed-db-unavailable");const{projectId:Y,apiKey:Ce,appId:Ue}=F.options;if(!Y)throw pn.create("registration-project-id");if(!Ce)throw pn.create("registration-api-key");if(!Ue)throw pn.create("registration-app-id");const Ge=new Zc(Ue,F.name,R=R||"firebase"),Lt=new Bo(Ge),Ht=new re.Yd(os);Ht.logLevel=re.in.ERROR;const An=new xn(z,pe.SDK_VERSION,R,Y,Ce,Ue),Er=new us(An,Ge),fn=new Gc(Er,Ge,Lt,Ht),Es=new ag(F,fn,Lt,Ge,Ht);return function Wt(b){const T=(0,te.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Es),Es},"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)(os,"0.3.4"),(0,pe.registerVersion)(os,"0.3.4","esm2017")}();const xs="/firebase-messaging-sw.js",di="/firebase-cloud-messaging-push-scope",so="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",$o="google.c.a.c_id",Kc="google.c.a.c_l",dg="google.c.a.ts",Os="google.c.a.e";var cs=(()=>{return(b=cs||(cs={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",cs;var b})();function hi(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qc(b){const R=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(R),z=new Uint8Array(F.length);for(let Y=0;Y<F.length;++Y)z[Y]=F.charCodeAt(Y);return z}const gr="fcm_token_details_db",Jc="fcm_token_object_Store";function Xc(b){return lu.apply(this,arguments)}function lu(){return lu=(0,O.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes(gr))return null;let T=null;return(yield(0,ce.openDb)(gr,5,function(){var F=(0,O.Z)(function*(z){var Y;if(z.oldVersion<2||!z.objectStoreNames.contains(Jc))return;const Ce=z.transaction.objectStore(Jc),Ue=yield Ce.index("fcmSenderId").get(b);if(yield Ce.clear(),Ue)if(2===z.oldVersion){const Ge=Ue;if(!Ge.auth||!Ge.p256dh||!Ge.endpoint)return;T={token:Ge.fcmToken,createTime:null!==(Y=Ge.createTime)&&void 0!==Y?Y:Date.now(),subscriptionOptions:{auth:Ge.auth,p256dh:Ge.p256dh,endpoint:Ge.endpoint,swScope:Ge.swScope,vapidKey:"string"==typeof Ge.vapidKey?Ge.vapidKey:hi(Ge.vapidKey)}}}else if(3===z.oldVersion){const Ge=Ue;T={token:Ge.fcmToken,createTime:Ge.createTime,subscriptionOptions:{auth:hi(Ge.auth),p256dh:hi(Ge.p256dh),endpoint:Ge.endpoint,swScope:Ge.swScope,vapidKey:hi(Ge.vapidKey)}}}else if(4===z.oldVersion){const Ge=Ue;T={token:Ge.fcmToken,createTime:Ge.createTime,subscriptionOptions:{auth:hi(Ge.auth),p256dh:hi(Ge.p256dh),endpoint:Ge.endpoint,swScope:Ge.swScope,vapidKey:hi(Ge.vapidKey)}}}});return function(z){return F.apply(this,arguments)}}())).close(),yield(0,ce.deleteDb)(gr),yield(0,ce.deleteDb)("fcm_vapid_details_db"),yield(0,ce.deleteDb)("undefined"),cu(T)?T:null}),lu.apply(this,arguments)}function cu(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const ds="firebase-messaging-store";let _l=null;function tn(){return _l||(_l=(0,ce.openDb)("firebase-messaging-database",1,b=>{0===b.oldVersion&&b.createObjectStore(ds)})),_l}function Da(b){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,O.Z)(function*(b){const T=qn(b),F=yield(yield tn()).transaction(ds).objectStore(ds).get(T);if(F)return F;{const z=yield Xc(b.appConfig.senderId);if(z)return yield Zt(b,z),z}})).apply(this,arguments)}function Zt(b,T){return hu.apply(this,arguments)}function hu(){return(hu=(0,O.Z)(function*(b,T){const R=qn(b),z=(yield tn()).transaction(ds,"readwrite");return yield z.objectStore(ds).put(T,R),yield z.complete,T})).apply(this,arguments)}function ba(b){return oo.apply(this,arguments)}function oo(){return(oo=(0,O.Z)(function*(b){const T=qn(b),F=(yield tn()).transaction(ds,"readwrite");yield F.objectStore(ds).delete(T),yield F.complete})).apply(this,arguments)}function qn({appConfig:b}){return b.appId}const gn=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function hs(b,T){return zn.apply(this,arguments)}function zn(){return(zn=(0,O.Z)(function*(b,T){const R=yield Fs(b),F=Ia(T),z={method:"POST",headers:R,body:JSON.stringify(F)};let Y;try{Y=yield(yield fetch(ks(b.appConfig),z)).json()}catch(Ce){throw gn.create("token-subscribe-failed",{errorInfo:Ce})}if(Y.error)throw gn.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw gn.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function Ho(b,T){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,O.Z)(function*(b,T){const R=yield Fs(b),F=Ia(T.subscriptionOptions),z={method:"PATCH",headers:R,body:JSON.stringify(F)};let Y;try{Y=yield(yield fetch(`${ks(b.appConfig)}/${T.token}`,z)).json()}catch(Ce){throw gn.create("token-update-failed",{errorInfo:Ce})}if(Y.error)throw gn.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw gn.create("token-update-no-token");return Y.token})).apply(this,arguments)}function vl(b,T){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,O.Z)(function*(b,T){const F={method:"DELETE",headers:yield Fs(b)};try{const Y=yield(yield fetch(`${ks(b.appConfig)}/${T}`,F)).json();if(Y.error)throw gn.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch(z){throw gn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function ks({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Fs(b){return ut.apply(this,arguments)}function ut(){return(ut=(0,O.Z)(function*({appConfig:b,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Ia({p256dh:b,auth:T,endpoint:R,vapidKey:F}){const z={web:{endpoint:R,auth:T,p256dh:b}};return F!==so&&(z.web.applicationPubKey=F),z}const Ta=6048e5;function ed(b){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,O.Z)(function*(b){const T=yield dn(b.swRegistration,b.vapidKey),R={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:hi(T.getKey("auth")),p256dh:hi(T.getKey("p256dh"))},F=yield Da(b.firebaseDependencies);if(F){if(Ma(F.subscriptionOptions,R))return Date.now()>=F.createTime+Ta?Gh(b,{token:F.token,createTime:Date.now(),subscriptionOptions:R}):F.token;try{yield vl(b.firebaseDependencies,F.token)}catch(z){console.warn(z)}return Nt(b.firebaseDependencies,R)}return Nt(b.firebaseDependencies,R)})).apply(this,arguments)}function El(b){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,O.Z)(function*(b){const T=yield Da(b.firebaseDependencies);T&&(yield vl(b.firebaseDependencies,T.token),yield ba(b.firebaseDependencies));const R=yield b.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function Gh(b,T){return De.apply(this,arguments)}function De(){return(De=(0,O.Z)(function*(b,T){try{const R=yield Ho(b.firebaseDependencies,T),F=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield Zt(b.firebaseDependencies,F),R}catch(R){throw yield El(b),R}})).apply(this,arguments)}function Nt(b,T){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,O.Z)(function*(b,T){const F={token:yield hs(b,T),createTime:Date.now(),subscriptionOptions:T};return yield Zt(b,F),F.token})).apply(this,arguments)}function dn(b,T){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,O.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qc(T)})})).apply(this,arguments)}function Ma(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function Rr(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function wl(b,T){if(!T.notification)return;b.notification={};const R=T.notification.title;R&&(b.notification.title=R);const F=T.notification.body;F&&(b.notification.body=F);const z=T.notification.image;z&&(b.notification.image=z)}(T,b),function Dl(b,T){!T.data||(b.data=T.data)}(T,b),function td(b,T){if(!T.fcmOptions)return;b.fcmOptions={};const R=T.fcmOptions.link;R&&(b.fcmOptions.link=R);const F=T.fcmOptions.analytics_label;F&&(b.fcmOptions.analyticsLabel=F)}(T,b),T}function nd(b){return"object"==typeof b&&!!b&&$o in b}function Ra(b,T){const R=[];for(let F=0;F<b.length;F++)R.push(b.charAt(F)),F<T.length&&R.push(T.charAt(F));return R.join("")}function jn(b){return gn.create("missing-app-config-values",{valueName:b})}Ra("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ra("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ii{constructor(T,R,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function Go(b){if(!b||!b.options)throw jn("App Configuration Object");if(!b.name)throw jn("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=b;for(const F of T)if(!R[F])throw jn(F);return{appName:b.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:z,installations:R,analyticsProvider:F}}_delete(){return Promise.resolve()}}function bl(b){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,O.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(xs,{scope:di}),b.swRegistration.update().catch(()=>{})}catch(T){throw gn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function fs(b,T){return Na.apply(this,arguments)}function Na(){return(Na=(0,O.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield bl(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw gn.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function rd(b,T){return xa.apply(this,arguments)}function xa(){return(xa=(0,O.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=so)})).apply(this,arguments)}function ao(){return(ao=(0,O.Z)(function*(b,T){if(!navigator)throw gn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw gn.create("permission-blocked");return yield rd(b,null==T?void 0:T.vapidKey),yield fs(b,null==T?void 0:T.serviceWorkerRegistration),ed(b)})).apply(this,arguments)}function pu(b,T,R){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,O.Z)(function*(b,T,R){const F=Il(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:R[$o],message_name:R[Kc],message_time:R[dg],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Il(b){switch(b){case cs.NOTIFICATION_CLICKED:return"notification_open";case cs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function gu(){return(gu=(0,O.Z)(function*(b,T){const R=T.data;if(!R.isFirebaseMessaging)return;b.onMessageHandler&&R.messageType===cs.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Rr(R)):b.onMessageHandler.next(Rr(R)));const F=R.data;nd(F)&&"1"===F[Os]&&(yield pu(b,R.messageType,F))})).apply(this,arguments)}const uo="@firebase/messaging",lo=b=>{const T=new Ii(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function hg(b,T){return gu.apply(this,arguments)}(T,R)),T},sd=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:F=>function id(b,T){return ao.apply(this,arguments)}(T,F)}};function qo(){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,O.Z)(function*(){try{yield(0,te.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function qh(){(0,pe._registerComponent)(new fe.wA("messaging",lo,"PUBLIC")),(0,pe._registerComponent)(new fe.wA("messaging-internal",sd,"PRIVATE")),(0,pe.registerVersion)(uo,"0.9.8"),(0,pe.registerVersion)(uo,"0.9.8","esm2017")}();const od="analytics",Cl="firebase_id",Al="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mu="https://www.googletagmanager.com/gtag/js",Zn=new re.Yd("@firebase/analytics");function Zh(b){return Promise.all(b.map(T=>T.catch(R=>R)))}function ms(b,T){const R=document.createElement("script");R.src=`${mu}?l=${b}&id=${T}`,R.async=!0,document.head.appendChild(R)}function fg(b,T,R,F,z,Y){return ka.apply(this,arguments)}function ka(){return(ka=(0,O.Z)(function*(b,T,R,F,z,Y){const Ce=F[z];try{if(Ce)yield T[Ce];else{const Ge=(yield Zh(R)).find(Lt=>Lt.measurementId===z);Ge&&(yield T[Ge.appId])}}catch(Ue){Zn.error(Ue)}b("config",z,Y)})).apply(this,arguments)}function co(b,T,R,F,z){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,O.Z)(function*(b,T,R,F,z){try{let Y=[];if(z&&z.send_to){let Ce=z.send_to;Array.isArray(Ce)||(Ce=[Ce]);const Ue=yield Zh(R);for(const Ge of Ce){const Lt=Ue.find(An=>An.measurementId===Ge),Ht=Lt&&T[Lt.appId];if(!Ht){Y=[];break}Y.push(Ht)}}0===Y.length&&(Y=Object.values(T)),yield Promise.all(Y),b("event",F,z||{})}catch(Y){Zn.error(Y)}})).apply(this,arguments)}function Cn(){const b=window.document.getElementsByTagName("script");for(const T of Object.values(b))if(T.src&&T.src.includes(mu))return T;return null}const Qe=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ho=new class yr{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function ud(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function an(b){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,O.Z)(function*(b){var T;const{appId:R,apiKey:F}=b,z={method:"GET",headers:ud(F)},Y=Al.replace("{app-id}",R),Ce=yield fetch(Y,z);if(200!==Ce.status&&304!==Ce.status){let Ue="";try{const Ge=yield Ce.json();(null===(T=Ge.error)||void 0===T?void 0:T.message)&&(Ue=Ge.error.message)}catch(Ge){}throw Qe.create("config-fetch-failed",{httpStatus:Ce.status,responseMessage:Ue})}return Ce.json()})).apply(this,arguments)}function ys(b){return La.apply(this,arguments)}function La(){return(La=(0,O.Z)(function*(b,T=ho,R){const{appId:F,apiKey:z,measurementId:Y}=b.options;if(!F)throw Qe.create("no-app-id");if(!z){if(Y)return{measurementId:Y,appId:F};throw Qe.create("no-api-key")}const Ce=T.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new cd;return setTimeout((0,O.Z)(function*(){Ue.abort()}),void 0!==R?R:6e4),Ti({appId:F,apiKey:z,measurementId:Y},Ce,Ue,T)})).apply(this,arguments)}function Ti(b,T,R){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,O.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:R},F,z=ho){const{appId:Y,measurementId:Ce}=b;try{yield ld(F,T)}catch(Ue){if(Ce)return Zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ce} provided in the "measurementId" field in the local Firebase config. [${Ue.message}]`),{appId:Y,measurementId:Ce};throw Ue}try{const Ue=yield an(b);return z.deleteThrottleMetadata(Y),Ue}catch(Ue){if(!Ml(Ue)){if(z.deleteThrottleMetadata(Y),Ce)return Zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ce} provided in the "measurementId" field in the local Firebase config. [${Ue.message}]`),{appId:Y,measurementId:Ce};throw Ue}const Ge=503===Number(Ue.customData.httpStatus)?(0,te.$s)(R,z.intervalMillis,30):(0,te.$s)(R,z.intervalMillis),Lt={throttleEndTimeMillis:Date.now()+Ge,backoffCount:R+1};return z.setThrottleMetadata(Y,Lt),Zn.debug(`Calling attemptFetch again in ${Ge} millis`),Ti(b,Lt,F,z)}})).apply(this,arguments)}function ld(b,T){return new Promise((R,F)=>{const z=Math.max(T-Date.now(),0),Y=setTimeout(R,z);b.addEventListener(()=>{clearTimeout(Y),F(Qe.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Ml(b){if(!(b instanceof te.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class cd{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function Va(){return yn.apply(this,arguments)}function yn(){return(yn=(0,O.Z)(function*(){if(!(0,te.hl)())return Zn.warn(Qe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(b){return Zn.warn(Qe.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function Us(){return(Us=(0,O.Z)(function*(b,T,R,F,z,Y,Ce){var Ue;const Ge=ys(b);Ge.then(fn=>{R[fn.measurementId]=fn.appId,b.options.measurementId&&fn.measurementId!==b.options.measurementId&&Zn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${fn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fn=>Zn.error(fn)),T.push(Ge);const Lt=Va().then(fn=>{if(fn)return F.getId()}),[Ht,An]=yield Promise.all([Ge,Lt]);Cn()||ms(Y,Ht.measurementId),z("js",new Date);const Er=null!==(Ue=null==Ce?void 0:Ce.config)&&void 0!==Ue?Ue:{};return Er.origin="firebase",Er.update=!0,null!=An&&(Er[Cl]=An),z("config",Ht.measurementId,Er),Ht.measurementId})).apply(this,arguments)}class yu{constructor(T){this.app=T}_delete(){return delete _r[this.app.options.appId],Promise.resolve()}}let _r={},Rl=[];const Bs={};let Wo,$s,js="dataLayer",_u=!1;function Kr(b,T,R){!function Ci(){const b=[];if((0,te.ru)()&&b.push("This is a browser extension environment."),(0,te.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((F,z)=>`(${z+1}) ${F}`).join(" "),R=Qe.create("invalid-analytics-context",{errorInfo:T});Zn.warn(R.message)}}();const F=b.options.appId;if(!F)throw Qe.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Qe.create("no-api-key");Zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_r[F])throw Qe.create("already-exists",{id:F});if(!_u){!function zo(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(js);const{wrappedGtag:Y,gtagCore:Ce}=function pg(b,T,R,F,z){let Y=function(...Ce){window[F].push(arguments)};return window[z]&&"function"==typeof window[z]&&(Y=window[z]),window[z]=function ad(b,T,R,F){function Y(){return(Y=(0,O.Z)(function*(Ce,Ue,Ge){try{"event"===Ce?yield co(b,T,R,Ue,Ge):"config"===Ce?yield fg(b,T,R,F,Ue,Ge):b("set",Ue)}catch(Lt){Zn.error(Lt)}})).apply(this,arguments)}return function z(Ce,Ue,Ge){return Y.apply(this,arguments)}}(Y,b,T,R),{gtagCore:Y,wrappedGtag:window[z]}}(_r,Rl,Bs,js,"gtag");$s=Y,Wo=Ce,_u=!0}return _r[F]=function fo(b,T,R,F,z,Y,Ce){return Us.apply(this,arguments)}(b,Rl,Bs,T,Wo,js,R),new yu(b)}function vu(){return(vu=(0,O.Z)(function*(b,T,R,F,z){if(z&&z.global)b("event",R,F);else{const Y=yield T;b("event",R,Object.assign(Object.assign({},F),{send_to:Y}))}})).apply(this,arguments)}function Eu(){return wu.apply(this,arguments)}function wu(){return(wu=(0,O.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(b){return!1}})).apply(this,arguments)}const Yh="@firebase/analytics";!function dd(){(0,pe._registerComponent)(new fe.wA(od,(T,{options:R})=>Kr(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,pe._registerComponent)(new fe.wA("analytics-internal",function b(T){try{const R=T.getProvider(od).getImmediate();return{logEvent:(F,z,Y)=>function Yr(b,T,R,F){b=(0,te.m9)(b),function Nl(b,T,R,F,z){return vu.apply(this,arguments)}($s,_r[b.app.options.appId],T,R,F).catch(z=>Zn.error(z))}(R,F,z,Y)}}catch(R){throw Qe.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,pe.registerVersion)(Yh,"0.7.5"),(0,pe.registerVersion)(Yh,"0.7.5","esm2017")}();var Ai=P(4408),vn=P(7565);const mo=new class Ol extends vn.v{}(class Qh extends Ai.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(T,R,F):T.flush(this)}});var Pl=P(4986),vr=P(8505),Qr=P(9468),kl=P(5363);const Yo=new f.GfV("7.2.0"),Gi="__angularfire_symbol__analyticsIsSupported",bu="__angularfire_symbol__remoteConfigIsSupported",hd="__angularfire_symbol__messagingIsSupported";function fd(b,T,R){if(T){if(1===T.length)return T[0];const Y=T.filter(Ce=>Ce.app===R);if(1===Y.length)return Y[0]}return R.container.getProvider(b).getImmediate({optional:!0})}globalThis[Gi]||(globalThis[Gi]=Eu().then(b=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=b)),globalThis[hd]||(globalThis[hd]=qo().then(b=>globalThis.__angularfire_symbol__messagingIsSupportedValue=b)),globalThis[bu]||(globalThis[bu]=Cy().then(b=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=b));const pd=(b,T)=>{const R=T?[T]:(0,X.C6)(),F=[];return R.forEach(z=>{z.container.getProvider(b).instances.forEach(Ce=>{F.includes(Ce)||F.push(Ce)})}),F};function Kn(){}class Fl{constructor(T,R=mo){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,F){const z=this.zone;return this.delegate.schedule(function(Ce){z.runGuarded(()=>{T.apply(this,[Ce])})},R,F)}}class Tu{constructor(T){this.zone=T,this.task=null}call(T,R){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Kn,{},Kn,Kn)),R.pipe((0,vr.b)({next:F,complete:F,error:F})).subscribe(T).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Cu=(()=>{class b{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Fl(Zone.current)),this.insideAngular=R.run(()=>new Fl(Zone.current,Pl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(R){return new(R||b)(f.LFG(f.R0b))},b.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Qo(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function vs(b){return Qo(),function Jo(b){return function(R){return(R=R.lift(new Tu(b.ngZone))).pipe((0,Qr.R)(b.outsideAngular),(0,kl.Q)(b.insideAngular))}}(Qo())(b)}},2090:(nt,Te,P)=>{"use strict";P.d(Te,{BH:()=>Be,LL:()=>he,ZR:()=>xe,zI:()=>ie,US:()=>fe,tV:()=>de,$s:()=>Ft,r3:()=>ki,Sg:()=>be,ne:()=>Li,vZ:()=>rr,ZB:()=>U,pd:()=>Ss,m9:()=>ui,z$:()=>Ne,jU:()=>ae,ru:()=>Re,d:()=>ee,xb:()=>xt,w1:()=>Se,hl:()=>se,uI:()=>Le,UG:()=>W,b$:()=>Ie,G6:()=>je,Mn:()=>ve,xO:()=>Cr,zd:()=>Fi,eu:()=>Z});const pe=function(V){const $=[];let H=0;for(let Ee=0;Ee<V.length;Ee++){let ne=V.charCodeAt(Ee);ne<128?$[H++]=ne:ne<2048?($[H++]=ne>>6|192,$[H++]=63&ne|128):55296==(64512&ne)&&Ee+1<V.length&&56320==(64512&V.charCodeAt(Ee+1))?(ne=65536+((1023&ne)<<10)+(1023&V.charCodeAt(++Ee)),$[H++]=ne>>18|240,$[H++]=ne>>12&63|128,$[H++]=ne>>6&63|128,$[H++]=63&ne|128):($[H++]=ne>>12|224,$[H++]=ne>>6&63|128,$[H++]=63&ne|128)}return $},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,$){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let ne=0;ne<V.length;ne+=3){const ze=V[ne],ft=ne+1<V.length,Yt=ft?V[ne+1]:0,rn=ne+2<V.length,on=rn?V[ne+2]:0;let Vn=(15&Yt)<<2|on>>6,Ar=63&on;rn||(Ar=64,ft||(Vn=64)),Ee.push(H[ze>>2],H[(3&ze)<<4|Yt>>4],H[Vn],H[Ar])}return Ee.join("")},encodeString(V,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(V):this.encodeByteArray(pe(V),$)},decodeString(V,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(V):function(V){const $=[];let H=0,Ee=0;for(;H<V.length;){const ne=V[H++];if(ne<128)$[Ee++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const ze=V[H++];$[Ee++]=String.fromCharCode((31&ne)<<6|63&ze)}else if(ne>239&&ne<365){const rn=((7&ne)<<18|(63&V[H++])<<12|(63&V[H++])<<6|63&V[H++])-65536;$[Ee++]=String.fromCharCode(55296+(rn>>10)),$[Ee++]=String.fromCharCode(56320+(1023&rn))}else{const ze=V[H++],ft=V[H++];$[Ee++]=String.fromCharCode((15&ne)<<12|(63&ze)<<6|63&ft)}}return $.join("")}(this.decodeStringToByteArray(V,$))},decodeStringToByteArray(V,$){this.init_();const H=$?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let ne=0;ne<V.length;){const ze=H[V.charAt(ne++)],Yt=ne<V.length?H[V.charAt(ne)]:0;++ne;const on=ne<V.length?H[V.charAt(ne)]:64;++ne;const At=ne<V.length?H[V.charAt(ne)]:64;if(++ne,null==ze||null==Yt||null==on||null==At)throw Error();Ee.push(ze<<2|Yt>>4),64!==on&&(Ee.push(Yt<<4&240|on>>2),64!==At&&Ee.push(on<<6&192|At))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}},ce=function(V){return function(V){const $=pe(V);return fe.encodeByteArray($,!0)}(V).replace(/\./g,"")},de=function(V){try{return fe.decodeString(V,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function U(V,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return $}for(const H in $)!$.hasOwnProperty(H)||!Q(H)||(V[H]=U(V[H],$[H]));return V}function Q(V){return"__proto__"!==V}class Be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,H)=>{this.resolve=$,this.reject=H})}wrapCallback($){return(H,Ee)=>{H?this.reject(H):this.resolve(Ee),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(H):$(H,Ee))}}}function be(V,$){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=$||"demo-project",ne=V.iat||0,ze=V.sub||V.user_id;if(!ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:ne,exp:ne+3600,auth_time:ne,sub:ze,user_id:ze,firebase:{sign_in_provider:"custom",identities:{}}},V);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(ft)),""].join(".")}function Ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function W(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(V){return!1}}function ae(){return"object"==typeof self&&self.self===self}function Re(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function Ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ee(){return Ne().indexOf("Electron/")>=0}function Se(){const V=Ne();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function ve(){return Ne().indexOf("MSAppHost/")>=0}function je(){return!W()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function se(){return"object"==typeof indexedDB}function Z(){return new Promise((V,$)=>{try{let H=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(Ee);ne.onsuccess=()=>{ne.result.close(),H||self.indexedDB.deleteDatabase(Ee),V(!0)},ne.onupgradeneeded=()=>{H=!1},ne.onerror=()=>{var ze;$((null===(ze=ne.error)||void 0===ze?void 0:ze.message)||"")}}catch(H){$(H)}})}function ie(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class xe extends Error{constructor($,H,Ee){super(H),this.code=$,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,he.prototype.create)}}class he{constructor($,H,Ee){this.service=$,this.serviceName=H,this.errors=Ee}create($,...H){const Ee=H[0]||{},ne=`${this.service}/${$}`,ze=this.errors[$],ft=ze?function yt(V,$){return V.replace(jt,(H,Ee)=>{const ne=$[Ee];return null!=ne?String(ne):`<${Ee}?>`})}(ze,Ee):"Error";return new xe(ne,`${this.serviceName}: ${ft} (${ne}).`,Ee)}}const jt=/\{\$([^}]+)}/g;function ki(V,$){return Object.prototype.hasOwnProperty.call(V,$)}function xt(V){for(const $ in V)if(Object.prototype.hasOwnProperty.call(V,$))return!1;return!0}function rr(V,$){if(V===$)return!0;const H=Object.keys(V),Ee=Object.keys($);for(const ne of H){if(!Ee.includes(ne))return!1;const ze=V[ne],ft=$[ne];if(As(ze)&&As(ft)){if(!rr(ze,ft))return!1}else if(ze!==ft)return!1}for(const ne of Ee)if(!H.includes(ne))return!1;return!0}function As(V){return null!==V&&"object"==typeof V}function Cr(V){const $=[];for(const[H,Ee]of Object.entries(V))Array.isArray(Ee)?Ee.forEach(ne=>{$.push(encodeURIComponent(H)+"="+encodeURIComponent(ne))}):$.push(encodeURIComponent(H)+"="+encodeURIComponent(Ee));return $.length?"&"+$.join("&"):""}function Fi(V){const $={};return V.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[ne,ze]=Ee.split("=");$[decodeURIComponent(ne)]=decodeURIComponent(ze)}}),$}function Ss(V){const $=V.indexOf("?");if(!$)return"";const H=V.indexOf("#",$);return V.substring($,H>0?H:void 0)}function Li(V,$){const H=new ht(V,$);return H.subscribe.bind(H)}class ht{constructor($,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{$(this)}).catch(Ee=>{this.error(Ee)})}next($){this.forEachObserver(H=>{H.next($)})}error($){this.forEachObserver(H=>{H.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,H,Ee){let ne;if(void 0===$&&void 0===H&&void 0===Ee)throw new Error("Missing Observer.");ne=function Ln(V,$){if("object"!=typeof V||null===V)return!1;for(const H of $)if(H in V&&"function"==typeof V[H])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:H,complete:Ee},void 0===ne.next&&(ne.next=In),void 0===ne.error&&(ne.error=In),void 0===ne.complete&&(ne.complete=In);const ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch(ft){}}),this.observers.push(ne),ze}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,$)}sendOne($,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{H(this.observers[$])}catch(Ee){"undefined"!=typeof console&&console.error&&console.error(Ee)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function In(){}function Ft(V,$=1e3,H=2){const Ee=$*Math.pow(H,V),ne=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+ne)}function ui(V){return V&&V._delegate?V._delegate:V}},342:(nt,Te,P)=>{"use strict";var f=P(5e3);let X=null;function O(){return X}const re=new f.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function de(){return(0,f.LFG)(U)}()},providedIn:"platform"}),n})();const j=new f.OlP("Location Initialized");let U=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Be(){return new U((0,f.LFG)(re))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let W=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ae(n){const e=(0,f.LFG)(re).location;return new Ie((0,f.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const Re=new f.OlP("appBaseHref");let Ie=(()=>{class n extends W{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Le(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Le(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce),f.LFG(Re,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ee=(()=>{class n extends W{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Le(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Le(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce),f.LFG(Re,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne(je(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function He(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Le,n.joinWithSlash=be,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(f.LFG(W),f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ve(){return new Se((0,f.LFG)(W),(0,f.LFG)(ce))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}var ie=(()=>((ie=ie||{})[ie.Zero=0]="Zero",ie[ie.One=1]="One",ie[ie.Two=2]="Two",ie[ie.Few=3]="Few",ie[ie.Many=4]="Many",ie[ie.Other=5]="Other",ie))();const Ss=f.kL8;class $t{}let pn=(()=>{class n extends $t{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Ss(r||this.locale)(t)){case ie.Zero:return"zero";case ie.One:return"one";case ie.Two:return"two";case ie.Few:return"few";case ie.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.soG))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Vo{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Nn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Vo(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Rs(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Rs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Rs(n,e){n.context.$implicit=e.item}let pr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Wt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$c("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$c("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Wt{constructor(){this.$implicit=null,this.ngIf=null}}function $c(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Os=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[{provide:$t,useClass:pn}]}),n})();function mr(n){return"server"===n}let cu=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new du((0,f.LFG)(re),window)}),n})();class du{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ds(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=yl(this.window.history)||yl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function yl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ps extends class Da extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function te(n){X||(X=n)}(new Ps)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function hu(){return Zt=Zt||document.querySelector("base"),Zt?Zt.getAttribute("href"):null}();return null==t?null:function oo(n){ba=ba||document.createElement("a"),ba.setAttribute("href",n);const e=ba.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Zt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ko(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let ba,Zt=null;const qn=new f.OlP("TRANSITION_ID"),gn=[{provide:f.ip1,useFactory:function fu(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[qn,re,f.zs3],multi:!0}];class hs{static init(){(0,f.VLi)(new hs)}addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(v){d=d||v,u--,0==u&&r(d)};o.forEach(function(v){v.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let zn=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ho=new f.OlP("EventManagerPlugins");let Vi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ho),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class vl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Wr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ks=(()=>{class n extends Wr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Fs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Fs))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Fs(n){O().remove(n)}const ut={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ia=/%COMP%/g;function De(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?De(n,o,t):(o=o.replace(Ia,n),t.push(o))}return t}function Nt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let dn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Ls(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new wl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new Dl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=De(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Vi),f.LFG(ks),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ls{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ut[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=ut[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ut[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Nt(r)):this.eventManager.addEventListener(e,t,Nt(r))}}class wl extends Ls{constructor(e,t,r,o){super(e),this.component=r;const u=De(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Aa(n){return"_ngcontent-%COMP%".replace(Ia,n)}(o+"-"+r.id),this.hostAttr=function Gh(n){return"_nghost-%COMP%".replace(Ia,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Dl extends Ls{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=De(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let td=(()=>{class n extends vl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const nd=["alt","control","meta","shift"],Go={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ii={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let bl=(()=>{class n extends vl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(nd.forEach(v=>{const I=r.indexOf(v);I>-1&&(r.splice(I,1),d+=v+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function Ui(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&jn.hasOwnProperty(e)&&(e=jn[e]))}return Go[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),nd.forEach(u=>{u!=o&&Ii[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const id=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function fs(){Ps.makeCurrent(),hs.init()},multi:!0},{provide:re,useFactory:function rd(){return(0,f.RDi)(document),document},deps:[]}]),ao=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Na(){return new f.qLn},deps:[]},{provide:Ho,useClass:td,multi:!0,deps:[re,f.R0b,f.Lbi]},{provide:Ho,useClass:bl,multi:!0,deps:[re]},{provide:dn,useClass:dn,deps:[Vi,ks,f.AFp]},{provide:f.FYo,useExisting:dn},{provide:Wr,useExisting:ks},{provide:ks,useClass:ks,deps:[re]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Vi,useClass:Vi,deps:[Ho,f.R0b]},{provide:class tn{},useClass:zn,deps:[]}];let pu=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:qn,useExisting:f.AFp},gn]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:ao,imports:[Os,f.hGG]}),n})();"undefined"!=typeof window&&window;let co=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):f.LFG(ad),r},providedIn:"root"}),n})(),ad=(()=>{class n extends co{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case f.q3G.NONE:return r;case f.q3G.HTML:return(0,f.qzn)(r,"HTML")?(0,f.z3N)(r):(0,f.EiD)(this._doc,String(r)).toString();case f.q3G.STYLE:return(0,f.qzn)(r,"Style")?(0,f.z3N)(r):r;case f.q3G.SCRIPT:if((0,f.qzn)(r,"Script"))return(0,f.z3N)(r);throw new Error("unsafe value used in a script context");case f.q3G.URL:return(0,f.yhl)(r),(0,f.qzn)(r,"URL")?(0,f.z3N)(r):(0,f.mCW)(String(r));case f.q3G.RESOURCE_URL:if((0,f.qzn)(r,"ResourceURL"))return(0,f.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,f.JVY)(t)}bypassSecurityTrustStyle(t){return(0,f.L6k)(t)}bypassSecurityTrustScript(t){return(0,f.eBb)(t)}bypassSecurityTrustUrl(t){return(0,f.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,f.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Fa(n){return new ad(n.get(re))}(f.LFG(f.zs3)),r},providedIn:"root"}),n})();var Cn=P(8996),Vs=P(7669);function Qe(...n){const e=(0,Vs.yG)(n);return(0,Cn.D)(n,e)}var ln=P(7579);class Zr extends ln.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var yr=P(8306);const{isArray:ho}=Array,{getPrototypeOf:ud,prototype:an,keys:Sl}=Object;function ys(n){if(1===n.length){const e=n[0];if(ho(e))return{args:e,keys:null};if(function La(n){return n&&"object"==typeof n&&ud(n)===an}(e)){const t=Sl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ti=P(4671),Tt=P(4004);const{isArray:ld}=Array;function cd(n){return(0,Tt.U)(e=>function Ml(n,e){return ld(e)?n(...e):n(e)}(n,e))}function Va(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var yn=P(5403),fo=P(9672);function _r(n,e,t){n?(0,fo.f)(t,n,e):e()}const Bs=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var js=P(8189);function Wo(...n){return function Ua(){return(0,js.J)(1)}()((0,Cn.D)(n,(0,Vs.yG)(n)))}var $s=P(8421);function _u(n){return new yr.y(e=>{(0,$s.Xf)(n()).subscribe(e)})}var po=P(515),Ci=P(727),Kr=P(4482);function Nl(){return(0,Kr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,yn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class vu extends yr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Kr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ci.w0;const t=this.getSubject();e.add(this.source.subscribe((0,yn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ci.w0.EMPTY)}return e}refCount(){return Nl()(this)}}function hn(n,e){return(0,Kr.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,yn.x)(r,v=>{null==o||o.unsubscribe();let I=0;const S=u++;(0,$s.Xf)(n(v,S)).subscribe(o=(0,yn.x)(r,N=>r.next(e?e(v,N,S,I++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var Zo=P(5698);function go(...n){const e=(0,Vs.yG)(n);return(0,Kr.e)((t,r)=>{(e?Wo(n,t,e):Wo(n,t)).subscribe(r)})}function Ko(n,e,t,r,o){return(u,d)=>{let m=t,v=e,I=0;u.subscribe((0,yn.x)(d,S=>{const N=I++;v=m?n(v,S,N):(m=!0,S),r&&d.next(v)},o&&(()=>{m&&d.next(v),d.complete()})))}}function ji(n,e){return(0,Kr.e)(Ko(n,e,arguments.length>=2,!0))}function sr(n,e){return(0,Kr.e)((t,r)=>{let o=0;t.subscribe((0,yn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function or(n){return(0,Kr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,yn.x)(t,void 0,void 0,d=>{u=(0,$s.Xf)(n(d,or(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var On=P(5577),xl=P(576);function $i(n,e){return(0,xl.m)(e)?(0,On.z)(n,e,1):(0,On.z)(n,1)}function Eu(n){return n<=0?()=>po.E:(0,Kr.e)((e,t)=>{let r=[];e.subscribe((0,yn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function wu(n=_n){return(0,Kr.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function _n(){return new Bs}function Kh(n){return(0,Kr.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Ba(n,e){const t=arguments.length>=2;return r=>r.pipe(n?sr((o,u)=>n(o,u,r)):Ti.y,(0,Zo.q)(1),t?Kh(e):wu(()=>new Bs))}var Yr=P(8505);class _s{constructor(e,t){this.id=e,this.url=t}}class dd extends _s{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ai extends _s{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qh extends _s{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vn extends _s{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ol extends _s{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mo extends _s{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class My extends _s{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pl extends _s{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vr extends _s{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kl{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Yo{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hi{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gi{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Du{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const St="primary";class hd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Si(n){return new hd(n)}const Nr="ngNavigationCancelingError";function Iu(n){const e=Error("NavigationCancelingError: "+n);return e[Nr]=!0,e}function fd(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Kn(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Fl(n[o],e[o]))return!1;return!0}function Fl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Tu(n){return Array.prototype.concat.apply([],n)}function Cu(n){return n.length>0?n[n.length-1]:null}function En(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function $n(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Cn.D)(Promise.resolve(n)):Qe(n)}const Jh={exact:function gd(n,e,t){if(!Ge(n.segments,e.segments)||!F(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!gd(n.children[r],e.children[r],t))return!1;return!0},subset:T},vs={exact:function Au(n,e){return Kn(n,e)},subset:function b(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Fl(n[t],e[t]))},ignored:()=>!0};function Jo(n,e,t){return Jh[t.paths](n.root,e.root,t.matrixParams)&&vs[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function T(n,e,t){return R(n,e,e.segments,t)}function R(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Ge(o,t)||e.hasChildren()||!F(o,t,r))}if(n.segments.length===t.length){if(!Ge(n.segments,t)||!F(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!T(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Ge(n.segments,o)&&F(n.segments,o,r)&&n.children[St])&&R(n.children[St],e,u,r)}}function F(n,e,t){return e.every((r,o)=>vs[t](n[o].parameters,r.parameters))}class z{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Si(this.queryParams)),this._queryParamMap}toString(){return Er.serialize(this)}}class Y{constructor(e,t){this.segments=e,this.children=t,this.parent=null,En(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fn(this)}}class Ce{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Si(this.parameters)),this._parameterMap}toString(){return Vl(this)}}function Ge(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ht{}class An{parse(e){const t=new mg(e);return new z(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Es(e.root,!0)}`,r=function gg(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${xr(t)}=${xr(o)}`).join("&"):`${xr(t)}=${xr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ws(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Er=new An;function fn(n){return n.segments.map(e=>Vl(e)).join("/")}function Es(n,e){if(!n.hasChildren())return fn(n);if(e){const t=n.children[St]?Es(n.children[St],!1):"",r=[];return En(n.children,(o,u)=>{u!==St&&r.push(`${u}:${Es(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Lt(n,e){let t=[];return En(n.children,(r,o)=>{o===St&&(t=t.concat(e(r,o)))}),En(n.children,(r,o)=>{o!==St&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===St?[Es(n.children[St],!1)]:[`${o}:${Es(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[St]?`${fn(n)}/${t[0]}`:`${fn(n)}/(${t.join("//")})`}}function qi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xr(n){return qi(n).replace(/%3B/gi,";")}function Or(n){return qi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xo(n){return decodeURIComponent(n)}function Xh(n){return Xo(n.replace(/\+/g,"%20"))}function Vl(n){return`${Or(n.path)}${function Su(n){return Object.keys(n).map(e=>`;${Or(e)}=${Or(n[e])}`).join("")}(n.parameters)}`}const Ry=/^[^\/()?;=#]+/;function md(n){const e=n.match(Ry);return e?e[0]:""}const ea=/^[^=?&#]+/,Ny=/^[^&#]+/;class mg{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[St]=new Y(e,t)),r}parseSegment(){const e=md(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ce(Xo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=md(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=md(this.remaining);o&&(r=o,this.capture(r))}e[Xo(t)]=Xo(r)}parseQueryParam(e){const t=function Ul(n){const e=n.match(ea);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function xy(n){const e=n.match(Ny);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Xh(t),u=Xh(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=md(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=St);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[St]:new Y([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Bl{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=yg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=yg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ef(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return ef(e,this._root).map(t=>t.value)}}function yg(n,e){if(n===e.value)return e;for(const t of e.children){const r=yg(n,t);if(r)return r}return null}function ef(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ef(n,t);if(r.length)return r.unshift(e),r}return[]}class yo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Mu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class jl extends Bl{constructor(e,t){super(e),this.snapshot=t,Ed(this,e)}toString(){return this.snapshot.toString()}}function yd(n,e){const t=function Ru(n,e){const d=new $a([],{},{},"",{},St,e,null,n.root,-1,{});return new vd("",new yo(d,[]))}(n,e),r=new Zr([new Ce("",{})]),o=new Zr({}),u=new Zr({}),d=new Zr({}),m=new Zr(""),v=new Nu(r,o,d,m,u,St,e,t.root);return v.snapshot=t.root,new jl(new yo(v,[]),t)}class Nu{constructor(e,t,r,o,u,d,m,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Tt.U)(e=>Si(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Tt.U)(e=>Si(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _d(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function n0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class $a{constructor(e,t,r,o,u,d,m,v,I,S,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=v,this._urlSegment=I,this._lastPathIndex=S,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Si(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Si(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vd extends Bl{constructor(e,t){super(t),this.url=e,Ed(this,t)}toString(){return tf(this._root)}}function Ed(n,e){e.value._routerState=n,e.children.forEach(t=>Ed(n,t))}function tf(n){const e=n.children.length>0?` { ${n.children.map(tf).join(", ")} } `:"";return`${n.value}${e}`}function $l(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Kn(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Kn(e.params,t.params)||n.params.next(t.params),function pd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Kn(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Kn(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function _o(n,e){const t=Kn(n.params,e.params)&&function Ue(n,e){return Ge(n,e)&&n.every((t,r)=>Kn(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||_o(n.parent,e.parent))}function Hl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Py(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Hl(n,r,o);return Hl(n,r)})}(n,e,t);return new yo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Hl(n,m)),d}}const r=function nf(n){return new Nu(new Zr(n.url),new Zr(n.params),new Zr(n.queryParams),new Zr(n.fragment),new Zr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Hl(n,u));return new yo(r,o)}}function fi(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Hs(n){return"object"==typeof n&&null!=n&&n.outlets}function Gl(n,e,t,r,o){let u={};return r&&En(r,(d,m)=>{u[m]=Array.isArray(d)?d.map(v=>`${v}`):`${d}`}),new z(t.root===n?e:_g(t.root,n,e),u,o)}function _g(n,e,t){const r={};return En(n.children,(o,u)=>{r[u]=o===e?t:_g(o,e,t)}),new Y(n.segments,r)}class wd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fi(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Hs);if(o&&o!==Cu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Dd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function wg(n,e,t){if(n||(n=new Y([],{})),0===n.segments.length&&n.hasChildren())return rf(n,e,t);const r=function Ha(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(Hs(m))break;const v=`${m}`,I=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&I&&"object"==typeof I&&void 0===I.outlets){if(!sf(v,I,d))return u;r+=2}else{if(!sf(v,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Y(n.segments.slice(0,r.pathIndex),{});return u.children[St]=new Y(n.segments.slice(r.pathIndex),n.children),rf(u,0,o)}return r.match&&0===o.length?new Y(n.segments,{}):r.match&&!n.hasChildren()?Dg(n,e,t):r.match?rf(n,0,o):Dg(n,e,t)}function rf(n,e,t){if(0===t.length)return new Y(n.segments,{});{const r=function Ly(n){return Hs(n[0])?n[0].outlets:{[St]:n}}(t),o={};return En(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=wg(n.children[d],e,u))}),En(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Y(n.segments,o)}}function Dg(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Hs(u)){const v=Vy(u.outlets);return new Y(r,v)}if(0===o&&fi(t[0])){r.push(new Ce(n.segments[e].path,ta(t[0]))),o++;continue}const d=Hs(u)?u.outlets[St]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&fi(m)?(r.push(new Ce(d,ta(m))),o+=2):(r.push(new Ce(d,{})),o++)}return new Y(r,{})}function Vy(n){const e={};return En(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Dg(new Y([],{}),0,t))}),e}function ta(n){const e={};return En(n,(t,r)=>e[r]=`${t}`),e}function sf(n,e,t){return n==t.path&&Kn(e,t.parameters)}class ql{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$l(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Mu(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),En(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Mu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Mu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Mu(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Du(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Hi(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if($l(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),$l(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function bg(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),v=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=v,d.outlet&&d.outlet.activateWith(o,v),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class xu{constructor(e,t){this.routes=e,this.module=t}}function vo(n){return"function"==typeof n}function na(n){return n instanceof z}const bd=Symbol("INITIAL_VALUE");function zl(){return hn(n=>function Us(...n){const e=(0,Vs.yG)(n),t=(0,Vs.jO)(n),{args:r,keys:o}=ys(n);if(0===r.length)return(0,Cn.D)([],e);const u=new yr.y(function yu(n,e,t=Ti.y){return r=>{_r(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let v=0;v<o;v++)_r(e,()=>{const I=(0,Cn.D)(n[v],e);let S=!1;I.subscribe((0,yn.x)(r,N=>{u[v]=N,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>Va(o,d):Ti.y));return t?u.pipe(cd(t)):u}(n.map(e=>e.pipe((0,Zo.q)(1),go(bd)))).pipe(ji((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==bd?o:(u===bd&&(r=!0),r||!1!==u&&d!==t.length-1&&!na(u)?o:u),e)},bd),sr(e=>e!==bd),(0,Tt.U)(e=>na(e)?e:!0===e),(0,Zo.q)(1)))}class Id{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wl,this.attachRef=null}}class Wl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Id,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let lf=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=u||St,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,v=new cf(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,v),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Wl),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class cf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Nu?this.route:e===Wl?this.childContexts:this.parent.get(e,t)}}let Td=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[lf],encapsulation:2}),n})();function df(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Cd(r,Zl(e,r))}}function Cd(n,e){n.children&&df(n.children,e)}function Zl(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Kl(n){const e=n.children&&n.children.map(Kl),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==St&&(t.component=Td),t}function Wi(n){return n.outlet||St}function Sn(n,e){const t=n.filter(r=>Wi(r)===e);return t.push(...n.filter(r=>Wi(r)!==e)),t}const Ad={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Sd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Ad):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||fd)(t,n,e);if(!u)return Object.assign({},Ad);const d={};En(u.posParams,(v,I)=>{d[I]=v.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Ou(n,e,t,r,o="corrected"){if(t.length>0&&function Md(n,e,t){return t.some(r=>Yl(n,e,r)&&Wi(r)!==St)}(n,t,r)){const d=new Y(e,function Uy(n,e,t,r){const o={};o[St]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Wi(u)!==St){const d=new Y([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Wi(u)]=d}return o}(n,e,r,new Y(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function By(n,e,t){return t.some(r=>Yl(n,e,r))}(n,t,r)){const d=new Y(n.segments,function Ig(n,e,t,r,o,u){const d={};for(const m of r)if(Yl(n,t,m)&&!o[Wi(m)]){const v=new Y([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Wi(m)]=v}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Y(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Yl(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Tg(n,e,t,r){return!!(Wi(n)===r||r!==St&&Yl(e,t,n))&&("**"===n.path||Sd(e,n,t).matched)}function jy(n,e,t){return 0===e.length&&!n.children[t]}class Rd{constructor(e){this.segmentGroup=e||null}}class Pu{constructor(e){this.urlTree=e}}function Yn(n){return new yr.y(e=>e.error(new Rd(n)))}function ku(n){return new yr.y(e=>e.error(new Pu(n)))}function Nd(n){return new yr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Ga{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=Ou(this.urlTree.root,[],[],this.config).segmentGroup,t=new Y(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,St).pipe((0,Tt.U)(u=>this.createUrlTree(Jr(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(or(u=>{if(u instanceof Pu)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Rd?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,St).pipe((0,Tt.U)(o=>this.createUrlTree(Jr(o),e.queryParams,e.fragment))).pipe(or(o=>{throw o instanceof Rd?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Y([],{[St]:e}):e;return new z(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Tt.U)(u=>new Y([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Cn.D)(o).pipe($i(u=>{const d=r.children[u],m=Sn(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,Tt.U)(v=>({segment:v,outlet:u})))}),ji((u,d)=>(u[d.outlet]=d.segment,u),{}),function Sy(n,e){const t=arguments.length>=2;return r=>r.pipe(n?sr((o,u)=>n(o,u,r)):Ti.y,Eu(1),t?Kh(e):wu(()=>new Bs))}())}expandSegment(e,t,r,o,u,d){return(0,Cn.D)(r).pipe($i(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(or(I=>{if(I instanceof Rd)return Qe(null);throw I}))),Ba(m=>!!m),or((m,v)=>{if(m instanceof Bs||"EmptyError"===m.name){if(jy(t,o,u))return Qe(new Y([],{}));throw new Rd(t)}throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return Tg(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Yn(t):Yn(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ku(u):this.lineralizeSegments(r,u).pipe((0,On.z)(d=>{const m=new Y(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:v,lastChild:I,positionalParamSegments:S}=Sd(t,o,u);if(!m)return Yn(t);const N=this.applyRedirectCommands(v,o.redirectTo,S);return o.redirectTo.startsWith("/")?ku(N):this.lineralizeSegments(o,N).pipe((0,On.z)(L=>this.expandSegment(e,t,r,L.concat(u.slice(I)),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Qe(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Tt.U)(L=>(r._loadedConfig=L,new Y(o,{})))):Qe(new Y(o,{}));const{matched:d,consumedSegments:m,lastChild:v}=Sd(t,r,o);if(!d)return Yn(t);const I=o.slice(v);return this.getChildConfig(e,r,o).pipe((0,On.z)(N=>{const L=N.module,G=N.routes,{segmentGroup:J,slicedSegments:_e}=Ou(t,m,I,G),ke=new Y(J.segments,J.children);if(0===_e.length&&ke.hasChildren())return this.expandChildren(L,G,ke).pipe((0,Tt.U)(dt=>new Y(m,dt)));if(0===G.length&&0===_e.length)return Qe(new Y(m,{}));const ct=Wi(r)===u;return this.expandSegment(L,ke,G,_e,ct?St:u,!0).pipe((0,Tt.U)(Ot=>new Y(m.concat(Ot.segments),Ot.children)))}))}getChildConfig(e,t,r){return t.children?Qe(new xu(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Qe(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,On.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Tt.U)(u=>(t._loadedConfig=u,u))):function hf(n){return new yr.y(e=>e.error(Iu(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Qe(new xu([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?Qe(o.map(d=>{const m=e.get(d);let v;if(function s0(n){return n&&vo(n.canLoad)}(m))v=m.canLoad(t,r);else{if(!vo(m))throw new Error("Invalid CanLoad guard");v=m(t,r)}return $n(v)})).pipe(zl(),(0,Yr.b)(d=>{if(!na(d))return;const m=Iu(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,Tt.U)(d=>!0===d)):Qe(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Qe(r);if(o.numberOfChildren>1||!o.children[St])return Nd(e.redirectTo);o=o.children[St]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new z(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return En(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return En(t.children,(m,v)=>{d[v]=this.createSegmentGroup(e,m,r,o)}),new Y(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Jr(n){const e={};for(const r of Object.keys(n.children)){const u=Jr(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function ff(n){if(1===n.numberOfChildren&&n.children[St]){const e=n.children[St];return new Y(n.segments.concat(e.segments),e.children)}return n}(new Y(n.segments,e))}class xd{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Od{constructor(e,t){this.component=e,this.route=t}}function Pd(n,e,t){const r=n._root;return Xl(r,e?e._root:null,t,[r.value])}function Jl(n,e,t){const r=function Cg(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Xl(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Mu(e);return n.children.forEach(d=>{(function Gs(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const v=function Ag(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ge(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ge(n.url,e.url)||!Kn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_o(n,e)||!Kn(n.queryParams,e.queryParams);default:return!_o(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new xd(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Xl(n,e,u.component?m?m.children:null:t,r,o),v&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Od(m.outlet.component,d))}else d&&ec(e,m,o),o.canActivateChecks.push(new xd(r)),Xl(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),En(u,(d,m)=>ec(d,t.getContext(m),o)),o}function ec(n,e,t){const r=Mu(n),o=n.value;En(r,(u,d)=>{ec(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Od(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class tc{}function kd(n){return new yr.y(e=>e.error(n))}class Gy{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Ou(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,St);if(null===t)return null;const r=new $a([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},St,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new yo(r,t),u=new vd(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=_d(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=Sn(e,u),v=this.processSegmentGroup(m,d,u);if(null===v)return null;r.push(...v)}const o=Ng(r);return function _f(n){n.sort((e,t)=>e.value.outlet===St?-1:t.value.outlet===St?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return jy(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Tg(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const G=r.length>0?Cu(r).parameters:{};u=new $a(r,G,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,g(e),Wi(e),e.component,e,y(t),h(t)+r.length,E(e))}else{const G=Sd(t,e,r);if(!G.matched)return null;d=G.consumedSegments,m=r.slice(G.lastChild),u=new $a(d,G.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,g(e),Wi(e),e.component,e,y(t),h(t)+d.length,E(e))}const v=function qy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:I,slicedSegments:S}=Ou(t,d,m,v.filter(G=>void 0===G.redirectTo),this.relativeLinkResolution);if(0===S.length&&I.hasChildren()){const G=this.processChildren(v,I);return null===G?null:[new yo(u,G)]}if(0===v.length&&0===S.length)return[new yo(u,[])];const N=Wi(e)===o,L=this.processSegment(v,I,S,N?St:o);return null===L?null:[new yo(u,L)]}}function Rg(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ng(n){const e=[],t=new Set;for(const r of n){if(!Rg(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Ng(r.children);e.push(new yo(r.value,o))}return e.filter(r=>!t.has(r))}function y(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function h(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function g(n){return n.data||{}}function E(n){return n.resolve||{}}function Ve(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function gt(n){return hn(e=>{const t=n(e);return t?(0,Cn.D)(t).pipe((0,Tt.U)(()=>e)):Qe(e)})}class Zi extends class wn{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const qa=new f.OlP("ROUTES");class nc{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Tt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new xu(Tu(d.injector.get(qa,void 0,f.XFs.Self|f.XFs.Optional)).map(Kl),d)}),or(u=>{throw t._loader$=void 0,u}));return t._loader$=new vu(o,()=>new ln.x).pipe(Nl()),t._loader$}loadModuleFactory(e){return $n(e()).pipe((0,On.z)(t=>t instanceof f.YKP?Qe(t):(0,Cn.D)(this.compiler.compileModuleAsync(t))))}}class vf{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function zy(n){throw n}function ra(n,e,t){return e.parse("/")}function ic(n,e){return Qe(null)}const Ef={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wf={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wr=(()=>{class n{constructor(t,r,o,u,d,m,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ln.x,this.errorHandler=zy,this.malformedUriErrorHandler=ra,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ic,afterPreactivation:ic},this.urlHandlingStrategy=new vf,this.routeReuseStrategy=new Zi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(f.h0i),this.console=d.get(f.c2e);const N=d.get(f.R0b);this.isNgZoneEnabled=N instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function Ll(){return new z(new Y([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new nc(d,m,L=>this.triggerEvent(new Qr(L)),L=>this.triggerEvent(new kl(L))),this.routerState=yd(this.currentUrlTree,this.rootComponentType),this.transitions=new Zr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(sr(o=>0!==o.id),(0,Tt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),hn(o=>{let u=!1,d=!1;return Qe(o).pipe((0,Yr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),hn(m=>{const v=this.browserUrlTree.toString(),I=!this.navigated||m.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Fu(m.source)&&(this.browserUrlTree=m.extractedUrl),Qe(m).pipe(hn(N=>{const L=this.transitions.getValue();return r.next(new dd(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),L!==this.transitions.getValue()?po.E:Promise.resolve(N)}),function Ql(n,e,t,r){return hn(o=>function Pr(n,e,t,r,o){return new Ga(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Tt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Yr.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function A(n,e,t,r,o){return(0,On.z)(u=>function Mg(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new Gy(n,e,t,r,o,u).recognize();return null===d?kd(new tc):Qe(d)}catch(d){return kd(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Tt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Yr.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(G,N)}this.browserUrlTree=N.urlAfterRedirects}const L=new Ol(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(L)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:G,source:J,restoredState:_e,extras:ke}=m,ct=new dd(L,this.serializeUrl(G),J,_e);r.next(ct);const _t=yd(G,this.rootComponentType).snapshot;return Qe(Object.assign(Object.assign({},m),{targetSnapshot:_t,urlAfterRedirects:G,extras:Object.assign(Object.assign({},ke),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),po.E}),gt(m=>{const{targetSnapshot:v,id:I,extractedUrl:S,rawUrl:N,extras:{skipLocationChange:L,replaceUrl:G}}=m;return this.hooks.beforePreactivation(v,{navigationId:I,appliedUrlTree:S,rawUrlTree:N,skipLocationChange:!!L,replaceUrl:!!G})}),(0,Yr.b)(m=>{const v=new mo(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),(0,Tt.U)(m=>Object.assign(Object.assign({},m),{guards:Pd(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function gf(n,e){return(0,On.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?Qe(Object.assign(Object.assign({},t),{guardsResult:!0})):function $y(n,e,t,r){return(0,Cn.D)(n).pipe((0,On.z)(o=>function Eo(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Qe(u.map(m=>{const v=Jl(m,e,o);let I;if(function uf(n){return n&&vo(n.canDeactivate)}(v))I=$n(v.canDeactivate(n,e,t,r));else{if(!vo(v))throw new Error("Invalid CanDeactivate guard");I=$n(v(n,e,t,r))}return I.pipe(Ba())})).pipe(zl()):Qe(!0)}(o.component,o.route,t,e,r)),Ba(o=>!0!==o,!0))}(d,r,o,n).pipe((0,On.z)(m=>m&&function r0(n){return"boolean"==typeof n}(m)?function Sg(n,e,t,r){return(0,Cn.D)(e).pipe($i(o=>Wo(function mf(n,e){return null!==n&&e&&e(new Yo(n)),Qe(!0)}(o.route.parent,r),function ar(n,e){return null!==n&&e&&e(new Gi(n)),Qe(!0)}(o.route,r),function Hy(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function pf(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>_u(()=>Qe(d.guards.map(v=>{const I=Jl(v,d.node,t);let S;if(function af(n){return n&&vo(n.canActivateChild)}(I))S=$n(I.canActivateChild(r,n));else{if(!vo(I))throw new Error("Invalid CanActivateChild guard");S=$n(I(r,n))}return S.pipe(Ba())})).pipe(zl())));return Qe(u).pipe(zl())}(n,o.path,t),function yf(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Qe(!0);const o=r.map(u=>_u(()=>{const d=Jl(u,e,t);let m;if(function of(n){return n&&vo(n.canActivate)}(d))m=$n(d.canActivate(e,n));else{if(!vo(d))throw new Error("Invalid CanActivate guard");m=$n(d(e,n))}return m.pipe(Ba())}));return Qe(o).pipe(zl())}(n,o.route,t))),Ba(o=>!0!==o,!0))}(r,u,n,e):Qe(m)),(0,Tt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Yr.b)(m=>{if(na(m.guardsResult)){const I=Iu(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw I.url=m.guardsResult,I}const v=new My(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(v)}),sr(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),gt(m=>{if(m.guards.canActivateChecks.length)return Qe(m).pipe((0,Yr.b)(v=>{const I=new Pl(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}),hn(v=>{let I=!1;return Qe(v).pipe(function x(n,e){return(0,On.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Qe(t);let u=0;return(0,Cn.D)(o).pipe($i(d=>function q(n,e,t,r){return function le(n,e,t,r){const o=Ve(n);if(0===o.length)return Qe({});const u={};return(0,Cn.D)(o).pipe((0,On.z)(d=>function Je(n,e,t,r){const o=Jl(n,e,r);return $n(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,Yr.b)(m=>{u[d]=m}))),Eu(1),(0,On.z)(()=>Ve(u).length===o.length?Qe(u):po.E))}(n._resolve,n,e,r).pipe((0,Tt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),_d(n,t).resolve),null)))}(d.route,r,n,e)),(0,Yr.b)(()=>u++),Eu(1),(0,On.z)(d=>u===o.length?Qe(t):po.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Yr.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(v),this.cancelNavigationTransition(v,"At least one route resolver didn't emit any value."))}}))}),(0,Yr.b)(v=>{const I=new vr(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}))}),gt(m=>{const{targetSnapshot:v,id:I,extractedUrl:S,rawUrl:N,extras:{skipLocationChange:L,replaceUrl:G}}=m;return this.hooks.afterPreactivation(v,{navigationId:I,appliedUrlTree:S,rawUrlTree:N,skipLocationChange:!!L,replaceUrl:!!G})}),(0,Tt.U)(m=>{const v=function Oy(n,e,t){const r=Hl(n,e._root,t?t._root:void 0);return new jl(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:v})}),(0,Yr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Tt.U)(r=>(new ql(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Yr.b)({next(){u=!0},complete(){u=!0}}),function Yh(n){return(0,Kr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),or(m=>{if(d=!0,function ja(n){return n&&n[Nr]}(m)){const v=na(m.url);v||(this.navigated=!0,this.restoreHistory(o,!0));const I=new Qh(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(I),v?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Fu(o.source)};this.scheduleNavigation(S,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new vn(o.id,this.serializeUrl(o.extractedUrl),m);r.next(v);try{o.resolve(this.errorHandler(m))}catch(I){o.reject(I)}}return po.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const v=Object.assign({},d);delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){df(t),this.config=t.map(Kl),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:v}=r,I=o||this.routerState.root,S=v?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function ky(n,e,t,r,o){if(0===t.length)return Gl(e.root,e.root,e,r,o);const u=function Fy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new wd(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return En(u.outlets,(v,I)=>{m[I]="string"==typeof v?v.split("/"):v}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,v)=>{0==v&&"."===m||(0==v&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new wd(t,e,r)}(t);if(u.toRoot())return Gl(e.root,new Y([],{}),e,r,o);const d=function vg(n,e,t){if(n.isAbsolute)return new Dd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Dd(u,u===e.root,0)}const r=fi(n.commands[0])?0:1;return function Eg(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Dd(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?rf(d.segmentGroup,d.index,u.commands):wg(d.segmentGroup,d.index,u.commands);return Gl(d.segmentGroup,m,e,r,o)}(I,this.currentUrlTree,t,N,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=na(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Wy(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Ef):!1===r?Object.assign({},wf):r,na(t))return Jo(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Jo(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ai(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,v,I;if(this.disposed)return Promise.resolve(!1);const S=this.transitions.value,N=Fu(r)&&S&&!Fu(S.source),L=S.rawUrl.toString()===t.toString(),G=S.id===(null===(m=this.currentNavigation)||void 0===m?void 0:m.id);if(N&&L&&G)return Promise.resolve(!0);let _e,ke,ct;d?(_e=d.resolve,ke=d.reject,ct=d.promise):ct=new Promise((dt,nn)=>{_e=dt,ke=nn});const _t=++this.navigationId;let Ot;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Ot=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(v=this.browserPageId)&&void 0!==v?v:0:(null!==(I=this.browserPageId)&&void 0!==I?I:0)+1):Ot=0,this.setTransition({id:_t,targetPageId:Ot,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:_e,reject:ke,promise:ct,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ct.catch(dt=>Promise.reject(dt))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Qh(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Fu(n){return"imperative"!==n}let sc=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new ln.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Fd(this.skipLocationChange),replaceUrl:Fd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Fd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(wr),f.Y36(Nu),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function Fd(n){return""===n||!!n}class xg{}class Og{preload(e,t){return Qe(null)}}let l0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new nc(o,r,v=>t.triggerEvent(new Qr(v)),v=>t.triggerEvent(new kl(v)))}setUpPreloading(){this.subscription=this.router.events.pipe(sr(t=>t instanceof Ai),$i(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,Cn.D)(o).pipe((0,js.J)(),(0,Tt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Qe(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,On.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(wr),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(xg))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ky=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof dd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ai&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof bu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new bu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Lu=new f.OlP("ROUTER_CONFIGURATION"),Vu=new f.OlP("ROUTER_FORROOT_GUARD"),c0=[Se,{provide:Ht,useClass:An},{provide:wr,useFactory:function p0(n,e,t,r,o,u,d={},m,v){const I=new wr(null,n,e,t,r,o,Tu(u));return m&&(I.urlHandlingStrategy=m),v&&(I.routeReuseStrategy=v),function Qy(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,I),d.enableTracing&&I.events.subscribe(S=>{var N,L;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(L=console.groupEnd)||void 0===L||L.call(console)}),I},deps:[Ht,Wl,Se,f.zs3,f.Sil,qa,Lu,[class rc{},new f.FiY],[class st{},new f.FiY]]},Wl,{provide:Nu,useFactory:function g0(n){return n.routerState.root},deps:[wr]},l0,Og,class u0{preload(e,t){return t().pipe(or(()=>Qe(null)))}},{provide:Lu,useValue:{enableTracing:!1}}];function d0(){return new f.PXZ("Router",wr)}let h0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[c0,Yy(t),{provide:Vu,useFactory:f0,deps:[[wr,new f.FiY,new f.tp0]]},{provide:Lu,useValue:r||{}},{provide:W,useFactory:aI,deps:[ce,[new f.tBr(Re),new f.FiY],Lu]},{provide:Ky,useFactory:Pg,deps:[wr,cu,Lu]},{provide:xg,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Og},{provide:f.PXZ,multi:!0,useFactory:d0},[Ld,{provide:f.ip1,multi:!0,useFactory:kg,deps:[Ld]},{provide:Fg,useFactory:m0,deps:[Ld]},{provide:f.tb,multi:!0,useExisting:Fg}]]}}static forChild(t){return{ngModule:n,providers:[Yy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Vu,8),f.LFG(wr,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Pg(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ky(n,e,t)}function aI(n,e,t={}){return t.useHash?new ee(n,e):new Ie(n,e)}function f0(n){return"guarded"}function Yy(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:qa,multi:!0,useValue:n}]}let Ld=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ln.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(wr),d=this.injector.get(Lu);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?Qe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Lu),o=this.injector.get(l0),u=this.injector.get(Ky),d=this.injector.get(wr),m=this.injector.get(f.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function kg(n){return n.appInitializer.bind(n)}function m0(n){return n.bootstrapListener.bind(n)}const Fg=new f.OlP("Router Initializer");let v0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Uu=(()=>{class n extends v0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const ia=new f.OlP("NgValueAccessor"),Xy={provide:ia,useExisting:(0,f.Gpc)(()=>bf),multi:!0},QA=new f.OlP("CompositionEventMode");let bf=(()=>{class n extends v0{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function E0(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(QA,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([Xy]),f.qOj]}),n})();function Bu(n){return null==n||0===n.length}function e_(n){return null!=n&&"number"==typeof n.length}const pi=new f.OlP("NgValidators"),ju=new f.OlP("NgAsyncValidators"),wo=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Lg{static min(e){return function t_(n){return e=>{if(Bu(e.value)||Bu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function w0(n){return e=>{if(Bu(e.value)||Bu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function D0(n){return Bu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function b0(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function I0(n){return Bu(n.value)||wo.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function n_(n){return e=>Bu(e.value)||!e_(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function T0(n){return e=>e_(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function C0(n){if(!n)return Vg;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Bu(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return o_(e)}static composeAsync(e){return Bg(e)}}function Vg(n){return null}function Dt(n){return null!=n}function r_(n){const e=(0,f.QGY)(n)?(0,Cn.D)(n):n;return(0,f.CqO)(e),e}function i_(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function s_(n,e){return e.map(t=>t(n))}function qs(n){return n.map(e=>function Ug(n){return!n.validate}(e)?e:t=>e.validate(t))}function o_(n){if(!n)return null;const e=n.filter(Dt);return 0==e.length?null:function(t){return i_(s_(t,e))}}function a_(n){return null!=n?o_(qs(n)):null}function Bg(n){if(!n)return null;const e=n.filter(Dt);return 0==e.length?null:function(t){return function Df(...n){const e=(0,Vs.jO)(n),{args:t,keys:r}=ys(n),o=new yr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let v=d,I=d;for(let S=0;S<d;S++){let N=!1;(0,$s.Xf)(t[S]).subscribe((0,yn.x)(u,L=>{N||(N=!0,I--),m[S]=L},()=>v--,void 0,()=>{(!v||!N)&&(I||u.next(r?Va(r,m):m),u.complete())}))}});return e?o.pipe(cd(e)):o}(s_(t,e).map(r_)).pipe((0,Tt.U)(i_))}}function Do(n){return null!=n?Bg(qs(n)):null}function jg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function u_(n){return n._rawValidators}function $g(n){return n._rawAsyncValidators}function A0(n){return n?Array.isArray(n)?n:[n]:[]}function If(n,e){return Array.isArray(n)?n.includes(e):n===e}function lI(n,e){const t=A0(e);return A0(n).forEach(o=>{If(t,o)||t.push(o)}),t}function Tf(n,e){return A0(e).filter(t=>!If(n,t))}class Cf{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=a_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Do(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class sa extends Cf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Xr extends Cf{get formDirective(){return null}get path(){return null}}class Hg{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let S0=(()=>{class n extends Hg{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(sa,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),M0=(()=>{class n extends Hg{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Xr,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function Gg(n,e){p_(n,e),e.valueAccessor.writeValue(n.value),function g_(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qg(n,e)})}(n,e),function fI(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function N0(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qg(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function f_(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function h_(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Sf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function bo(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function p_(n,e){const t=u_(n);null!==e.validator?n.setValidators(jg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=$g(n);null!==e.asyncValidator?n.setAsyncValidators(jg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();bo(e._rawValidators,o),bo(e._rawAsyncValidators,o)}function Sf(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=u_(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=$g(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return bo(e._rawValidators,r),bo(e._rawAsyncValidators,r),t}function qg(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function oc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const oa="VALID",$u="INVALID",Io="PENDING",Nf="DISABLED";function zg(n){return(ac(n)?n.validators:n)||null}function Wg(n){return Array.isArray(n)?a_(n):n||null}function xf(n,e){return(ac(e)?e.asyncValidators:n)||null}function v_(n){return Array.isArray(n)?Do(n):n||null}function ac(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const E_=n=>n instanceof b_,Of=n=>n instanceof Kg,pI=n=>n instanceof Ki;function w_(n){return E_(n)?n.value:n.getRawValue()}function D_(n,e){const t=Of(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function F0(n,e){Of(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new f.vHH(1002,"")})}class Zg{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Wg(this._rawValidators),this._composedAsyncValidatorFn=v_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===oa}get invalid(){return this.status===$u}get pending(){return this.status==Io}get disabled(){return this.status===Nf}get enabled(){return this.status!==Nf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Wg(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=v_(e)}addValidators(e){this.setValidators(lI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Tf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Tf(e,this._rawAsyncValidators))}hasValidator(e){return If(this._rawValidators,e)}hasAsyncValidator(e){return If(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Io,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Nf,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=oa,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===oa||this.status===Io)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nf:oa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Io,this._hasOwnPendingAsyncValidator=!0;const t=r_(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function k0(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Of(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:pI(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Nf:this.errors?$u:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Io)?Io:this._anyControlsHaveStatus($u)?$u:oa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ac(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class b_ extends Zg{constructor(e=null,t,r){super(zg(t),xf(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ac(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){oc(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){oc(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Kg extends Zg{constructor(e,t,r){super(zg(t),xf(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){F0(this,e),Object.keys(e).forEach(r=>{D_(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=w_(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Ki extends Zg{constructor(e,t,r){super(zg(t),xf(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){F0(this,e),e.forEach((r,o)=>{D_(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>w_(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let $0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),T_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const A_=new f.OlP("NgModelWithFormControlWarning"),DI={provide:Xr,useExisting:(0,f.Gpc)(()=>Yg)};let Yg=(()=>{class n extends Xr{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Sf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Gg(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){h_(t.control||null,t,!1),oc(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function P0(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(h_(r||null,t),E_(o)&&(Gg(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function za(n,e){p_(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function x0(n,e){return Sf(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){p_(this.form,this),this._oldForm&&Sf(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(pi,10),f.Y36(ju,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([DI]),f.qOj,f.TTD]}),n})();const R_={provide:sa,useExisting:(0,f.Gpc)(()=>N_)};let N_=(()=>{class n extends sa{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function __(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===bf?t=u:function O0(n){return Object.getPrototypeOf(n.constructor)===Uu}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function y_(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function d_(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(Xr,13),f.Y36(pi,10),f.Y36(ju,10),f.Y36(ia,10),f.Y36(A_,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([R_]),f.qOj,f.TTD]}),n})(),PI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[T_]]}),n})(),lc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:A_,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[PI]}),n})(),FI=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,u=null,d=null;return null!=r&&(function kI(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new Kg(o,{asyncValidators:d,updateOn:m,validators:u})}control(t,r,o){return new b_(t,r,o)}array(t,r,o){const u=t.map(d=>this._createControl(d));return new Ki(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return E_(t)||Of(t)||pI(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:lc}),n})();var LI=P(4986),un=P(5813);function Vf(){return(0,Kr.e)((n,e)=>{let t,r=!1;n.subscribe((0,yn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function tw(n,e){return n===e}var Ze,zs=P(2011),UI=(P(389),P(3942)),ye=P(5861),cc=P(9681),tm=P(4859),Wa=P(1877),Vt=P(2090),nw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Za={},rw=rw||{},bt=nw||self;function Vd(){}function B_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ud(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var sw="closure_uid_"+(1e9*Math.random()>>>0),Co=0;function hS(n,e,t){return n.call.apply(n.bind,arguments)}function fS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function kr(n,e,t){return(kr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hS:fS).apply(null,arguments)}function Uf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Fr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Hu(){this.s=this.s,this.o=this.o}var ow={};Hu.prototype.s=!1,Hu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function iw(n){return Object.prototype.hasOwnProperty.call(n,sw)&&n[sw]||(n[sw]=++Co)}(this);delete ow[n]}},Hu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nm=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},aw=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function uw(n){return Array.prototype.concat.apply([],arguments)}function $_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function rm(n){return/^[\s\xa0]*$/.test(n)}var Lr,lw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Mi(n,e){return-1!=n.indexOf(e)}function H_(n,e){return n<e?-1:n>e?1:0}e:{var dc=bt.navigator;if(dc){var cw=dc.userAgent;if(cw){Lr=cw;break e}}Lr=""}function hc(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function dw(n){const e={};for(const t in n)e[t]=n[t];return e}var hw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function im(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<hw.length;u++)t=hw[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ws(n){return Ws[" "](n),n}Ws[" "]=Vd;var Ka,n,gi=Mi(Lr,"Opera"),Zs=Mi(Lr,"Trident")||Mi(Lr,"MSIE"),jf=Mi(Lr,"Edge"),Yi=jf||Zs,sm=Mi(Lr,"Gecko")&&!(Mi(Lr.toLowerCase(),"webkit")&&!Mi(Lr,"Edge"))&&!(Mi(Lr,"Trident")||Mi(Lr,"MSIE"))&&!Mi(Lr,"Edge"),Bd=Mi(Lr.toLowerCase(),"webkit")&&!Mi(Lr,"Edge");function fc(){var n=bt.document;return n?n.documentMode:void 0}e:{var Gu="",qu=(n=Lr,sm?/rv:([^\);]+)(\)|;)/.exec(n):jf?/Edge\/([\d\.]+)/.exec(n):Zs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Bd?/WebKit\/(\S+)/.exec(n):gi?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(qu&&(Gu=qu?qu[1]:""),Zs){var zu=fc();if(null!=zu&&zu>parseFloat(Gu)){Ka=String(zu);break e}}Ka=Gu}var jd={};var fw=bt.document&&Zs&&(fc()||parseInt(Ka,10))||void 0,pw=function(){if(!bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{bt.addEventListener("test",Vd,e),bt.removeEventListener("test",Vd,e)}catch(t){}return n}();function ei(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Hd(n,e){if(ei.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(sm){e:{try{Ws(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:gw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Hd.Z.h.call(this)}}ei.prototype.h=function(){this.defaultPrevented=!0},Fr(Hd,ei);var gw={2:"touch",3:"pen",4:"mouse"};Hd.prototype.h=function(){Hd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Gd="closure_listenable_"+(1e6*Math.random()|0),mw=0;function yw(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++mw,this.ca=this.fa=!1}function om(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function $f(n){this.src=n,this.g={},this.h=0}function q_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=nm(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(om(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function z_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}$f.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=z_(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new yw(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var am="closure_lm_"+(1e6*Math.random()|0),W_={};function _w(n,e,t,r,o){if(r&&r.once)return K_(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)_w(n,e[u],t,r,o);return null}return t=Q_(t),n&&n[Gd]?n.N(e,t,Ud(r)?!!r.capture:!!r,o):Z_(n,e,t,!1,r,o)}function Z_(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Ud(o)?!!o.capture:!!o,m=Hf(n);if(m||(n[am]=m=new $f(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function BI(){var e=$I;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)pw||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(jI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function K_(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)K_(n,e[u],t,r,o);return null}return t=Q_(t),n&&n[Gd]?n.O(e,t,Ud(r)?!!r.capture:!!r,o):Z_(n,e,t,!0,r,o)}function vw(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)vw(n,e[u],t,r,o);else r=Ud(r)?!!r.capture:!!r,t=Q_(t),n&&n[Gd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=z_(u=n.g[e],t,r,o))&&(om(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Hf(n))&&(e=n.g[e.toString()],n=-1,e&&(n=z_(e,t,r,o)),(t=-1<n?e[n]:null)&&Y_(t))}function Y_(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Gd])q_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(jI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Hf(e))?(q_(t,n),0==t.h&&(t.src=null,e[am]=null)):om(n)}}}function jI(n){return n in W_?W_[n]:W_[n]="on"+n}function $I(n,e){if(n.ca)n=!0;else{e=new Hd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Y_(n),n=t.call(r,e)}return n}function Hf(n){return(n=n[am])instanceof $f?n:null}var Gf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Q_(n){return"function"==typeof n?n:(n[Gf]||(n[Gf]=function(e){return n.handleEvent(e)}),n[Gf])}function ti(){Hu.call(this),this.i=new $f(this),this.P=this,this.I=null}function mi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ei(e,n);else if(e instanceof ei)e.target=e.target||n;else{var o=e;im(e=new ei(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=J_(d,r,!0,e)&&o}if(o=J_(d=e.g=n,r,!0,e)&&o,o=J_(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=J_(d=e.g=t[u],r,!1,e)&&o}function J_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,v=d.ia||d.src;d.fa&&q_(n.i,d),o=!1!==m.call(v,r)&&o}}return o&&!r.defaultPrevented}Fr(ti,Hu),ti.prototype[Gd]=!0,ti.prototype.removeEventListener=function(n,e,t,r){vw(this,n,e,t,r)},ti.prototype.M=function(){if(ti.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)om(t[r]);delete n.g[e],n.h--}}this.I=null},ti.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ti.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var X_=bt.JSON.stringify;function Ew(){var n=bw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ev,ww=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new qd,n=>n.reset());class qd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function HI(n){bt.setTimeout(()=>{throw n},0)}function um(n,e){ev||function Dw(){var n=bt.Promise.resolve(void 0);ev=function(){n.then(Iw)}}(),zd||(ev(),zd=!0),bw.add(n,e)}var zd=!1,bw=new class gS{constructor(){this.h=this.g=null}add(e,t){const r=ww.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Iw(){for(var n;n=Ew();){try{n.h.call(n.g)}catch(t){HI(t)}var e=ww;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}zd=!1}function lm(n,e){ti.call(this),this.h=n||1,this.g=e||bt,this.j=kr(this.kb,this),this.l=Date.now()}function tv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function nv(n,e,t){if("function"==typeof n)t&&(n=kr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=kr(n.handleEvent,n)}return 2147483647<Number(e)?-1:bt.setTimeout(n,e||0)}function Tw(n){n.g=nv(()=>{n.g=null,n.i&&(n.i=!1,Tw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Fr(lm,ti),(Ze=lm.prototype).da=!1,Ze.S=null,Ze.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),mi(this,"tick"),this.da&&(tv(this),this.start()))}},Ze.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ze.M=function(){lm.Z.M.call(this),tv(this),delete this.g};class GI extends Hu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Tw(this)}M(){super.M(),this.g&&(bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wd(n){Hu.call(this),this.h=n,this.g={}}Fr(Wd,Hu);var Cw=[];function rv(n,e,t,r){Array.isArray(t)||(t&&(Cw[0]=t.toString()),t=Cw);for(var o=0;o<t.length;o++){var u=_w(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function iv(n){hc(n.g,function(e,t){this.g.hasOwnProperty(t)&&Y_(e)},n),n.g={}}function Zd(){this.g=!0}function Kd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function qf(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return X_(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Wd.prototype.M=function(){Wd.Z.M.call(this),iv(this)},Wd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zd.prototype.Aa=function(){this.g=!1},Zd.prototype.info=function(){};var Zu={},cm=null;function Yd(){return cm=cm||new ti}function Aw(n){ei.call(this,Zu.Ma,n)}function pc(n){const e=Yd();mi(e,new Aw(e,n))}function dm(n,e){ei.call(this,Zu.STAT_EVENT,n),this.stat=e}function yi(n){const e=Yd();mi(e,new dm(e,n))}function qI(n,e){ei.call(this,Zu.Na,n),this.size=e}function zf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return bt.setTimeout(function(){n()},e)}Zu.Ma="serverreachability",Fr(Aw,ei),Zu.STAT_EVENT="statevent",Fr(dm,ei),Zu.Na="timingevent",Fr(qI,ei);var Qd={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},hm={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ov(){}function fm(){}ov.prototype.h=null;var gm,Jd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function pm(){ei.call(this,"d")}function Wf(){ei.call(this,"c")}function mm(){}function Xd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Wd(this),this.P=lv,this.W=new lm(n=Yi?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new uv}function uv(){this.i=null,this.g="",this.h=!1}Fr(pm,ei),Fr(Wf,ei),Fr(mm,ov),mm.prototype.g=function(){return new XMLHttpRequest},mm.prototype.i=function(){return{}},gm=new mm;var lv=45e3,ym={},_m={};function cv(n,e,t){n.K=1,n.v=Qa(Ya(e)),n.s=t,n.U=!0,Sw(n,null)}function Sw(n,e){n.F=Date.now(),eh(n),n.A=Ya(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),yv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new uv,n.g=iT(n.l,t?e:null,!n.s),0<n.O&&(n.L=new GI(kr(n.Ia,n,n.g),n.O)),rv(n.V,n.g,"readystatechange",n.gb),e=n.H?dw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),pc(1),function mS(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),v=0;v<m.length;v++){var I=m[v].split("=");if(1<I.length){var S=I[0];I=I[1];var N=S.split("_");d=2<=N.length&&"type"==N[1]?d+(S+"=")+I+"&":d+(S+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function dv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function vm(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Mw(n,t),o==_m){4==e&&(n.o=4,yi(14),r=!1),Kd(n.j,n.m,null,"[Incomplete Response]");break}if(o==ym){n.o=4,yi(15),Kd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Kd(n.j,n.m,o,null),Em(n,o)}dv(n)&&o!=_m&&o!=ym&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,yi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Nm(e),e.L=!0,yi(11))):(Kd(n.j,n.m,t,"[Invalid Chunked Response]"),Ku(n),th(n))}function Mw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?_m:(t=Number(e.substring(t,r)),isNaN(t)?ym:(r+=1)+t>e.length?_m:(e=e.substr(r,t),n.C=r+t,e))}function eh(n){n.Y=Date.now()+n.P,hv(n,n.P)}function hv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zf(kr(n.eb,n),e)}function Zf(n){n.B&&(bt.clearTimeout(n.B),n.B=null)}function th(n){0==n.l.G||n.I||xm(n.l,n)}function Ku(n){Zf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,tv(n.W),iv(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Em(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||_v(t.i,n)))if(t.I=n.N,!n.J&&_v(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(I){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=zf(kr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;ep(t),Mm(t)}Rm(t),yi(18)}if(1>=sh(t.i)&&t.ka){try{t.ka()}catch(I){}t.ka=void 0}}else _c(t,11)}else if((n.J||t.g==n)&&ep(t),!rm(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let I=o[e];if(t.U=I[0],I=I[1],2==t.G)if("c"==I[0]){t.J=I[1],t.la=I[2];const S=I[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const N=I[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const L=I[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const J=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(J){var u=r.i;!u.g&&(Mi(J,"spdy")||Mi(J,"quic")||Mi(J,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Im(u,u.h),u.h=null))}if(r.D){const _e=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;_e&&(r.sa=_e,Dn(r.F,r.D,_e))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=vc(r,r.H?r.la:null,r.W),d.J){kw(r.i,d);var m=d,v=r.K;v&&m.setTimeout(v),m.B&&(Zf(m),eh(m)),r.g=d}else Av(r);0<t.l.length&&Xf(t)}else"stop"!=I[0]&&"close"!=I[0]||_c(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?_c(t,7):bv(t):"noop"!=I[0]&&t.j&&t.j.wa(I),t.A=0)}pc(4)}catch(I){}}function Nw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(B_(n)||"string"==typeof n)aw(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(B_(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function Rw(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(B_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function nh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof nh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function fv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Yu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Yu(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Yu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ze=Xd.prototype).setTimeout=function(n){this.P=n},Ze.gb=function(n){n=n.target;const e=this.L;e&&3==Ja(n)?e.l():this.Ia(n)},Ze.Ia=function(n){try{if(n==this.g)e:{const S=Ja(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>S)&&(3!=S||Yi||this.g&&(this.h.h||this.g.ga()||Hw(this.g)))){this.I||4!=S||7==e||pc(8==e||0>=N?3:2),Zf(this);var t=this.g.ba();this.N=t;t:if(dv(this)){var r=Hw(this.g);n="";var o=r.length,u=4==Ja(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ku(this),th(this);var d="";break t}this.h.i=new bt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function sv(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,v=this.g;if((m=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rm(m)){var I=m;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,yi(12),Ku(this),th(this);break e}Kd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Em(this,t)}this.U?(vm(this,S,d),Yi&&this.i&&3==S&&(rv(this.V,this.W,"tick",this.fb),this.W.start())):(Kd(this.j,this.m,d,null),Em(this,d)),4==S&&Ku(this),this.i&&!this.I&&(4==S?xm(this.l,this):(this.i=!1,eh(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,yi(12)):(this.o=0,yi(13)),Ku(this),th(this)}}}catch(S){}},Ze.fb=function(){if(this.g){var n=Ja(this.g),e=this.g.ga();this.C<e.length&&(Zf(this),vm(this,n,e),this.i&&4!=n&&eh(this))}},Ze.cancel=function(){this.I=!0,Ku(this)},Ze.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function yS(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(pc(3),yi(17)),Ku(this),this.o=2,th(this)):hv(this,this.Y-n)},(Ze=nh.prototype).R=function(){fv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ze.T=function(){return fv(this),this.g.concat()},Ze.get=function(n,e){return Yu(this.h,n)?this.h[n]:e},Ze.set=function(n,e){Yu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ze.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var xw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Qu){this.g=void 0!==e?e:n.g,wm(this,n.j),this.s=n.s,Kf(this,n.i),Dm(this,n.m),this.l=n.l,e=n.h;var t=new ih;t.i=e.i,e.g&&(t.g=new nh(e.g),t.h=e.h),pv(this,t),this.o=n.o}else n&&(t=String(n).match(xw))?(this.g=!!e,wm(this,t[1]||"",!0),this.s=rh(t[2]||""),Kf(this,t[3]||"",!0),Dm(this,t[4]),this.l=rh(t[5]||"",!0),pv(this,t[6]||"",!0),this.o=rh(t[7]||"")):(this.g=!!e,this.h=new ih(null,this.g))}function Ya(n){return new Qu(n)}function wm(n,e,t){n.j=t?rh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Kf(n,e,t){n.i=t?rh(e,!0):e}function Dm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function pv(n,e,t){e instanceof ih?(n.h=e,function YI(n,e){e&&!n.j&&(ni(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Ks(this,r),yv(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Yf(e,la)),n.h=new ih(e,n.g))}function Dn(n,e,t){n.h.set(e,t)}function Qa(n){return Dn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function rh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Yf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ow),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ow(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Qu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Yf(e,ZI,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Yf(e,ZI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Yf(t,"/"==t.charAt(0)?mv:gv,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Yf(t,KI)),n.join("")};var ZI=/[#\/\?@]/g,gv=/[#\?:]/g,mv=/[#\?]/g,la=/[#\?@]/g,KI=/#/g;function ih(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ni(n){n.g||(n.g=new nh,n.h=0,n.i&&function Dr(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ks(n,e){ni(n),e=gc(n,e),Yu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Yu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&fv(n)))}function Ys(n,e){return ni(n),e=gc(n,e),Yu(n.g.h,e)}function yv(n,e,t){Ks(n,e),0<t.length&&(n.i=null,n.g.set(gc(n,e),$_(t)),n.h+=t.length)}function gc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Pw(n){this.l=n||JI,n=bt.PerformanceNavigationTiming?0<(n=bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(bt.g&&bt.g.Ea&&bt.g.Ea()&&bt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ze=ih.prototype).add=function(n,e){ni(this),this.i=null,n=gc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ze.forEach=function(n,e){ni(this),this.g.forEach(function(t,r){aw(t,function(o){n.call(e,o,r,this)},this)},this)},Ze.T=function(){ni(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Ze.R=function(n){ni(this);var e=[];if("string"==typeof n)Ys(this,n)&&(e=uw(e,this.g.get(gc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=uw(e,n[t])}return e},Ze.set=function(n,e){return ni(this),this.i=null,Ys(this,n=gc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ze.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var JI=10;function bm(n){return!!n.h||!!n.g&&n.g.size>=n.j}function sh(n){return n.h?1:n.g?n.g.size:0}function _v(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Im(n,e){n.g?n.g.add(e):n.h=e}function kw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function vv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return $_(n.i)}function Tm(){}function Cm(){this.g=new Tm}function XI(n,e,t){const r=t||"";try{Nw(n,function(o,u){let d=o;Ud(o)&&(d=X_(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Qf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function mc(n){this.l=n.$b||null,this.j=n.ib||!1}function yc(n,e){ti.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Am,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pw.prototype.cancel=function(){if(this.i=vv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Tm.prototype.stringify=function(n){return bt.JSON.stringify(n,void 0)},Tm.prototype.parse=function(n){return bt.JSON.parse(n,void 0)},Fr(mc,ov),mc.prototype.g=function(){return new yc(this.l,this.j)},mc.prototype.i=function(n){return function(){return n}}({}),Fr(yc,ti);var Am=0;function Ev(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function oh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ah(n)}function ah(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ze=yc.prototype).open=function(n,e){if(this.readyState!=Am)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ah(this)},Ze.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||bt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,oh(this)),this.readyState=Am},Ze.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ah(this)),this.g&&(this.readyState=3,ah(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==bt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ev(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ze.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?oh(this):ah(this),3==this.readyState&&Ev(this)}},Ze.Ua=function(n){this.g&&(this.response=this.responseText=n,oh(this))},Ze.Ta=function(n){this.g&&(this.response=n,oh(this))},Ze.ha=function(){this.g&&oh(this)},Ze.setRequestHeader=function(n,e){this.v.append(n,e)},Ze.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ze.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(yc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Lw=bt.JSON.parse;function Qn(n){ti.call(this),this.headers=new nh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=wv,this.K=this.L=!1}Fr(Qn,ti);var wv="",Vw=/^https?$/i,eT=["POST","PUT"];function nT(n){return"content-type"==n.toLowerCase()}function Uw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Bw(n),Sm(n)}function Bw(n){n.D||(n.D=!0,mi(n,"complete"),mi(n,"error"))}function jw(n){if(n.h&&void 0!==rw&&(!n.C[1]||4!=Ja(n)||2!=n.ba()))if(n.v&&4==Ja(n))nv(n.Fa,0,n);else if(mi(n,"readystatechange"),4==Ja(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(xw)[1]||null;if(!o&&bt.self&&bt.self.location){var u=bt.self.location.protocol;o=u.substr(0,u.length-1)}r=!Vw.test(o?o.toLowerCase():"")}t=r}if(t)mi(n,"complete"),mi(n,"success");else{n.m=6;try{var d=2<Ja(n)?n.g.statusText:""}catch(v){d=""}n.j=d+" ["+n.ba()+"]",Bw(n)}}finally{Sm(n)}}}function Sm(n,e){if(n.g){$w(n);const t=n.g,r=n.C[0]?Vd:null;n.g=null,n.C=null,e||mi(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function $w(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(bt.clearTimeout(n.A),n.A=null)}function Ja(n){return n.g?n.g.readyState:0}function Hw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case wv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Dv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function rT(n){let e="";return hc(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Dn(n,e,t))}function Jf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Gw(n){this.za=0,this.l=[],this.h=new Zd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Jf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Jf("baseRetryDelayMs",5e3,n),this.$a=Jf("retryDelaySeedMs",1e4,n),this.Ya=Jf("forwardChannelMaxRetries",2,n),this.ra=Jf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Pw(n&&n.concurrentRequestLimit),this.Ca=new Cm,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function bv(n){if(qw(n),3==n.G){var e=n.V++,t=Ya(n.F);Dn(t,"SID",n.J),Dn(t,"RID",e),Dn(t,"TYPE","terminate"),uh(n,t),(e=new Xd(n,n.h,e,void 0)).K=2,e.v=Qa(Ya(t)),t=!1,bt.navigator&&bt.navigator.sendBeacon&&(t=bt.navigator.sendBeacon(e.v.toString(),"")),!t&&bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=iT(e.l,null),e.g.ea(e.v)),e.F=Date.now(),eh(e)}Ww(n)}function Mm(n){n.g&&(Nm(n),n.g.cancel(),n.g=null)}function qw(n){Mm(n),n.u&&(bt.clearTimeout(n.u),n.u=null),ep(n),n.i.cancel(),n.m&&("number"==typeof n.m&&bt.clearTimeout(n.m),n.m=null)}function Iv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Xf(n)}function Xf(n){bm(n.i)||n.m||(n.m=!0,um(n.Ha,n),n.C=0)}function Tv(n,e){var t;t=e?e.m:n.V++;const r=Ya(n.F);Dn(r,"SID",n.J),Dn(r,"RID",t),Dn(r,"AID",n.U),uh(n,r),n.o&&n.s&&Dv(r,n.o,n.s),t=new Xd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Cv(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Im(n.i,t),cv(t,r,e)}function uh(n,e){n.j&&Nw({},function(t,r){Dn(e,r,t)})}function Cv(n,e,t){t=Math.min(n.l.length,t);var r=n.j?kr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let v=0;v<t;v++){let I=o[v].h;const S=o[v].g;if(I-=u,0>I)u=Math.max(0,o[v].h-100),m=!1;else try{XI(S,d,"req"+I+"_")}catch(N){r&&r(S)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Av(n){n.g||n.u||(n.Y=1,um(n.Ga,n),n.A=0)}function Rm(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=zf(kr(n.Ga,n),Ju(n,n.A)),n.A++,0))}function Nm(n){null!=n.B&&(bt.clearTimeout(n.B),n.B=null)}function Sv(n){n.g=new Xd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ya(n.oa);Dn(e,"RID","rpc"),Dn(e,"SID",n.J),Dn(e,"CI",n.N?"0":"1"),Dn(e,"AID",n.U),uh(n,e),Dn(e,"TYPE","xmlhttp"),n.o&&n.s&&Dv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Qa(Ya(e)),t.s=null,t.U=!0,Sw(t,n)}function ep(n){null!=n.v&&(bt.clearTimeout(n.v),n.v=null)}function xm(n,e){var t=null;if(n.g==e){ep(n),Nm(n),n.g=null;var r=2}else{if(!_v(n.i,e))return;t=e.D,kw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;mi(r=Yd(),new qI(r,t,e,o)),Xf(n)}else Av(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function zw(n,e){return!(sh(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=zf(kr(n.Ha,n,e),Ju(n,n.C)),n.C++,0)))}(n,e)||2==r&&Rm(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:_c(n,5);break;case 4:_c(n,10);break;case 3:_c(n,6);break;default:_c(n,2)}}function Ju(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function _c(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=kr(n.jb,n);t||(t=new Qu("//www.google.com/images/cleardot.gif"),bt.location&&"http"==bt.location.protocol||wm(t,"https"),Qa(t)),function Fw(n,e){const t=new Zd;if(bt.Image){const r=new Image;r.onload=Uf(Qf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Uf(Qf,t,r,"TestLoadImage: error",!1,e),r.onabort=Uf(Qf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Uf(Qf,t,r,"TestLoadImage: timeout",!1,e),bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else yi(2);n.G=0,n.j&&n.j.va(e),Ww(n),qw(n)}function Ww(n){n.G=0,n.I=-1,n.j&&((0!=vv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,$_(n.l),n.l.length=0),n.j.ua())}function vc(n,e,t){let r=function zI(n){return n instanceof Qu?Ya(n):new Qu(n,void 0)}(t);if(""!=r.i)e&&Kf(r,e+"."+r.i),Dm(r,r.m);else{const o=bt.location;r=function WI(n,e,t,r){var o=new Qu(null,void 0);return n&&wm(o,n),e&&Kf(o,e),t&&Dm(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&hc(n.aa,function(o,u){Dn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Dn(r,e,t),Dn(r,"VER",n.ma),uh(n,r),r}function iT(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qn(t&&n.Ba&&!n.qa?new mc({ib:!0}):n.qa)).L=n.H,e}function Om(){}function Mv(){if(Zs&&!(10<=Number(fw)))throw Error("Environmental error: no available transport.")}function Qi(n,e){ti.call(this),this.g=new Gw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!rm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new lt(this)}function Rv(n){pm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function sT(){Wf.call(this),this.status=1}function lt(n){this.g=n}(Ze=Qn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():gm.g(),this.C=function av(n){return n.h||(n.h=n.i())}(this.u?this.u:gm),this.g.onreadystatechange=kr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Uw(this,u)}n=t||"";const o=new nh(this.headers);r&&Nw(r,function(u,d){o.set(d,u)}),r=function j_(n){e:{var e=nT;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=bt.FormData&&n instanceof bt.FormData,!(0<=nm(eT,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$w(this),0<this.B&&((this.K=function tT(n){return Zs&&function $d(){return function Bf(n){var e=jd;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=lw(String(Ka)).split("."),t=lw("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=H_(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||H_(0==o[2].length,0==u[2].length)||H_(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=kr(this.pa,this)):this.A=nv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Uw(this,u)}},Ze.pa=function(){void 0!==rw&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mi(this,"timeout"),this.abort(8))},Ze.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,mi(this,"complete"),mi(this,"abort"),Sm(this))},Ze.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sm(this,!0)),Qn.Z.M.call(this)},Ze.Fa=function(){this.s||(this.F||this.v||this.l?jw(this):this.cb())},Ze.cb=function(){jw(this)},Ze.ba=function(){try{return 2<Ja(this)?this.g.status:-1}catch(n){return-1}},Ze.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ze.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Lw(e)}},Ze.Da=function(){return this.m},Ze.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ze=Gw.prototype).ma=8,Ze.G=1,Ze.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ze.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Xd(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=dw(u),im(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Cv(this,o,e),Dn(t=Ya(this.F),"RID",n),Dn(t,"CVER",22),this.D&&Dn(t,"X-HTTP-Session-Id",this.D),uh(this,t),this.o&&u&&Dv(t,this.o,u),Im(this.i,o),this.Ra&&Dn(t,"TYPE","init"),this.ja?(Dn(t,"$req",e),Dn(t,"SID","null"),o.$=!0,cv(o,t,null)):cv(o,t,e),this.G=2}}else 3==this.G&&(n?Tv(this,n):0==this.l.length||bm(this.i)||Tv(this))},Ze.Ga=function(){if(this.u=null,Sv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=zf(kr(this.bb,this),n)}},Ze.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,yi(10),Mm(this),Sv(this))},Ze.ab=function(){null!=this.v&&(this.v=null,Mm(this),Rm(this),yi(19))},Ze.jb=function(n){n?(this.h.info("Successfully pinged google.com"),yi(2)):(this.h.info("Failed to ping google.com"),yi(1))},(Ze=Om.prototype).xa=function(){},Ze.wa=function(){},Ze.va=function(){},Ze.ua=function(){},Ze.Oa=function(){},Mv.prototype.g=function(n,e){return new Qi(n,e)},Fr(Qi,ti),Qi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),um(kr(n.hb,n,e))),yi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=vc(n,null,n.W),Xf(n)},Qi.prototype.close=function(){bv(this.g)},Qi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Iv(this.g,e)}else this.v?((e={}).__data__=X_(n),Iv(this.g,e)):Iv(this.g,n)},Qi.prototype.M=function(){this.g.j=null,delete this.j,bv(this.g),delete this.g,Qi.Z.M.call(this)},Fr(Rv,pm),Fr(sT,Wf),Fr(lt,Om),lt.prototype.xa=function(){mi(this.g,"a")},lt.prototype.wa=function(n){mi(this.g,new Rv(n))},lt.prototype.va=function(n){mi(this.g,new sT(n))},lt.prototype.ua=function(){mi(this.g,"b")},Mv.prototype.createWebChannel=Mv.prototype.g,Qi.prototype.send=Qi.prototype.u,Qi.prototype.open=Qi.prototype.m,Qi.prototype.close=Qi.prototype.close,Qd.NO_ERROR=0,Qd.TIMEOUT=8,Qd.HTTP_ERROR=6,hm.COMPLETE="complete",fm.EventType=Jd,Jd.OPEN="a",Jd.CLOSE="b",Jd.ERROR="c",Jd.MESSAGE="d",ti.prototype.listen=ti.prototype.N,Qn.prototype.listenOnce=Qn.prototype.O,Qn.prototype.getLastError=Qn.prototype.La,Qn.prototype.getLastErrorCode=Qn.prototype.Da,Qn.prototype.getStatus=Qn.prototype.ba,Qn.prototype.getResponseJson=Qn.prototype.Qa,Qn.prototype.getResponseText=Qn.prototype.ga,Qn.prototype.send=Qn.prototype.ea;var oT=Za.createWebChannelTransport=function(){return new Mv},aT=Za.getStatEventTarget=function(){return Yd()},Nv=Za.ErrorCode=Qd,Pm=Za.EventType=hm,uT=Za.Event=Zu,tp=Za.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},km=Za.FetchXmlHttpFactory=mc,bn=Za.WebChannel=fm,_S=Za.XhrIo=Qn;const xv="@firebase/firestore";class ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ri.UNAUTHENTICATED=new ri(null),ri.GOOGLE_CREDENTIALS=new ri("google-credentials-uid"),ri.FIRST_PARTY=new ri("first-party-uid"),ri.MOCK_USER=new ri("mock-user");let lh="9.6.5";const Xa=new Wa.Yd("@firebase/firestore");function Fm(){return Xa.logLevel}function Fe(n,...e){if(Xa.logLevel<=Wa.in.DEBUG){const t=e.map(Ov);Xa.debug(`Firestore (${lh}): ${n}`,...t)}}function ur(n,...e){if(Xa.logLevel<=Wa.in.ERROR){const t=e.map(Ov);Xa.error(`Firestore (${lh}): ${n}`,...t)}}function np(n,...e){if(Xa.logLevel<=Wa.in.WARN){const t=e.map(Ov);Xa.warn(`Firestore (${lh}): ${n}`,...t)}}function Ov(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${lh}) INTERNAL ASSERTION FAILED: `+n;throw ur(e),new Error(e)}function vt(n,e){n||Xe()}function qe(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Vt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Pv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ri.UNAUTHENTICATED))}shutdown(){}}class rp{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ip{constructor(e){this.t=e,this.currentUser=ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=I=>this.i!==o?(o=this.i,t(I)):Promise.resolve();let d=new br;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new br,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const I=d;e.enqueueRetryable((0,ye.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},v=I=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(I=>v(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?v(I):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new br)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt("string"==typeof r.accessToken),new Pv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vt(null===e||"string"==typeof e),new ri(e)}}class dT{constructor(e,t,r){this.type="FirstParty",this.user=ri.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class hT{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new dT(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yw{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=o=>{e.enqueueRetryable(()=>{return null!=(u=o).error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`),t(u.token);var u})};const r=o=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?r(o):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vt("string"==typeof t.token),new Kw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ji{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.p(r),this.T=r=>t.writeSequenceNumber(r))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function pT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ji.I=-1;class kv{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=pT(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Ut(n,e){return n<e?-1:n>e?1:0}function ch(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function gT(n){return n+"\0"}class ii{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ii.fromMillis(Date.now())}static fromDate(e){return ii.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ii(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new ii(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function mT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sp(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class op{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xe(),void 0===r?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===op.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof op?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends op{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const Qw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jn extends op{construct(e,t,r){return new Jn(e,t,r)}static isValidIdentifier(e){return Qw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Jn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Me(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Me(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Me(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new Me(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jn(t)}static emptyPath(){return new Jn([])}}class dh{constructor(e){this.fields=e,e.sort(Jn.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ch(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ir(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const _T=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function el(n){if(vt(!!n),"string"==typeof n){let e=0;const t=_T.exec(n);if(vt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xn(n.seconds),nanos:Xn(n.nanos)}}function Xn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function hh(n){return"string"==typeof n?Ir.fromBase64String(n):Ir.fromUint8Array(n)}function Fv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ec(n){const e=n.mapValue.fields.__previous_value__;return Fv(e)?Ec(e):e}function ap(n){const e=el(n.mapValue.fields.__local_write_time__.timestampValue);return new ii(e.seconds,e.nanos)}function tl(n){return null==n}function Lm(n){return 0===n&&1/n==-1/0}function Lv(n){return"number"==typeof n&&Number.isInteger(n)&&!Lm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(Qt.fromString(e))}static fromName(e){return new rt(Qt.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new Qt(e.slice()))}}function nl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fv(n)?4:10:Xe()}function ca(n,e){if(n===e)return!0;const t=nl(n);if(t!==nl(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ap(n).isEqual(ap(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=el(r.timestampValue),d=el(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,hh(n.bytesValue).isEqual(hh(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Xn(r.geoPointValue.latitude)===Xn(o.geoPointValue.latitude)&&Xn(r.geoPointValue.longitude)===Xn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Xn(r.integerValue)===Xn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Xn(r.doubleValue),d=Xn(o.doubleValue);return u===d?Lm(u)===Lm(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return ch(n.arrayValue.values||[],e.arrayValue.values||[],ca);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(mT(u)!==mT(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!ca(u[m],d[m])))return!1;return!0}(n,e);default:return Xe()}var o}function wc(n,e){return void 0!==(n.values||[]).find(t=>ca(t,e))}function fh(n,e){if(n===e)return 0;const t=nl(n),r=nl(e);if(t!==r)return Ut(t,r);switch(t){case 0:return 0;case 1:return Ut(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Xn(o.integerValue||o.doubleValue),m=Xn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return Vv(n.timestampValue,e.timestampValue);case 4:return Vv(ap(n),ap(e));case 5:return Ut(n.stringValue,e.stringValue);case 6:return function(o,u){const d=hh(o),m=hh(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let v=0;v<d.length&&v<m.length;v++){const I=Ut(d[v],m[v]);if(0!==I)return I}return Ut(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Ut(Xn(o.latitude),Xn(u.latitude));return 0!==d?d:Ut(Xn(o.longitude),Xn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let v=0;v<d.length&&v<m.length;++v){const I=fh(d[v],m[v]);if(I)return I}return Ut(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const d=o.fields||{},m=Object.keys(d),v=u.fields||{},I=Object.keys(v);m.sort(),I.sort();for(let S=0;S<m.length&&S<I.length;++S){const N=Ut(m[S],I[S]);if(0!==N)return N;const L=fh(d[m[S]],v[I[S]]);if(0!==L)return L}return Ut(m.length,I.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function Vv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ut(n,e);const t=el(n),r=el(e),o=Ut(t.seconds,r.seconds);return 0!==o?o:Ut(t.nanos,r.nanos)}function Vm(n){return Uv(n)}function Uv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=el(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?hh(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Uv(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${Uv(r.fields[m])}`;return u+"}"}(n.mapValue):Xe();var e}function Um(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bv(n){return!!n&&"integerValue"in n}function up(n){return!!n&&"arrayValue"in n}function Jw(n){return!!n&&"nullValue"in n}function jv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bm(n){return!!n&&"mapValue"in n}function lp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lp(n.arrayValue.values[t]);return e}return Object.assign({},n)}class _i{constructor(e){this.value=e}static empty(){return new _i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Bm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lp(t)}setAll(e){let t=Jn.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=lp(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Bm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Bm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Xu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new _i(lp(this.value))}}function Xw(n){const e=[];return Xu(n.fields,(t,r)=>{const o=new Jn([t]);if(Bm(r)){const u=Xw(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new dh(e)}class Mn{constructor(e,t,r,o,u){this.key=e,this.documentType=t,this.version=r,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Mn(e,0,Ct.min(),_i.empty(),0)}static newFoundDocument(e,t,r){return new Mn(e,1,t,r,0)}static newNoDocument(e,t){return new Mn(e,2,t,_i.empty(),0)}static newUnknownDocument(e,t){return new Mn(e,3,t,_i.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_i.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vT{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.R=null}}function eD(n,e=null,t=[],r=[],o=null,u=null,d=null){return new vT(n,e,t,r,o,u,d)}function cp(n){const e=qe(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function nD(n){return n.field.canonicalString()+n.op.toString()+Vm(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),tl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=ph(e.startAt)),e.endAt&&(t+="|ub:",t+=ph(e.endAt)),e.R=t}return e.R}function dp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!iD(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ca(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Gv(n.startAt,e.startAt)&&Gv(n.endAt,e.endAt)}function jm(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Ri extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new ET(e,t,r):"array-contains"===t?new $v(e,r):"in"===t?new rD(e,r):"not-in"===t?new Hv(e,r):"array-contains-any"===t?new bT(e,r):new Ri(e,t,r)}static P(e,t,r){return"in"===t?new wT(e,r):new DT(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(fh(t,this.value)):null!==t&&nl(this.value)===nl(t)&&this.v(fh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ET extends Ri{constructor(e,t,r){super(e,t,r),this.key=rt.fromName(r.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.v(t)}}class wT extends Ri{constructor(e,t){super(e,"in",t),this.keys=$m(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class DT extends Ri{constructor(e,t){super(e,"not-in",t),this.keys=$m(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $m(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>rt.fromName(r.referenceValue))}class $v extends Ri{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return up(t)&&wc(t.arrayValue,this.value)}}class rD extends Ri{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wc(this.value.arrayValue,t)}}class Hv extends Ri{constructor(e,t){super(e,"not-in",t)}matches(e){if(wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wc(this.value.arrayValue,t)}}class bT extends Ri{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!up(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wc(this.value.arrayValue,r))}}class hp{constructor(e,t){this.position=e,this.before=t}}function ph(n){return`${n.before?"b":"a"}:${n.position.map(e=>Vm(e)).join(",")}`}class gh{constructor(e,t="asc"){this.field=e,this.dir=t}}function iD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function sD(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?rt.comparator(rt.fromName(d.referenceValue),t.key):fh(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function Gv(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ca(n.position[t],e.position[t]))return!1;return!0}class eu{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=v,this.S=null,this.D=null}}function qv(n,e,t,r,o,u,d,m){return new eu(n,e,t,r,o,u,d,m)}function fp(n){return new eu(n)}function Hm(n){return!tl(n.limit)&&"F"===n.limitType}function rl(n){return!tl(n.limit)&&"L"===n.limitType}function zv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function il(n){for(const e of n.filters)if(e.V())return e.field;return null}function Dc(n){return null!==n.collectionGroup}function mh(n){const e=qe(n);if(null===e.S){e.S=[];const t=il(e),r=zv(e);if(null!==t&&null===r)t.isKeyField()||e.S.push(new gh(t)),e.S.push(new gh(Jn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.S.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new gh(Jn.keyField(),u))}}}return e.S}function Ao(n){const e=qe(n);if(!e.D)if("F"===e.limitType)e.D=eD(e.path,e.collectionGroup,mh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of mh(e))t.push(new gh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new hp(e.endAt.position,!e.endAt.before):null,o=e.startAt?new hp(e.startAt.position,!e.startAt.before):null;e.D=eD(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.D}function Wv(n,e,t){return new eu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pp(n,e){return dp(Ao(n),Ao(e))&&n.limitType===e.limitType}function oD(n){return`${cp(Ao(n))}|lt:${n.limitType}`}function Zv(n){return`Query(target=${function tD(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Vm(r.value)}`;var r}).join(", ")}]`),tl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+ph(n.startAt)),n.endAt&&(e+=", endAt: "+ph(n.endAt)),`Target(${e})`}(Ao(n))}; limitType=${n.limitType})`}function gp(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):rt.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!sD(t.startAt,mh(t),r)||t.endAt&&sD(t.endAt,mh(t),r)));var t,r}function Kv(n){return(e,t)=>{let r=!1;for(const o of mh(n)){const u=aD(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function aD(n,e,t){const r=n.field.isKeyField()?rt.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),v=d.data.field(o);return null!==m&&null!==v?fh(m,v):Xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}function Gm(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lm(e)?"-0":e}}function mp(n){return{integerValue:""+n}}function yh(n,e){return Lv(e)?mp(e):Gm(n,e)}class qm{constructor(){this._=void 0}}function uD(n,e,t){return n instanceof _h?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof bc?zm(n,e):n instanceof Ic?IT(n,e):function(r,o){const u=cD(r,o),d=dD(u)+dD(r.N);return Bv(u)&&Bv(r.N)?mp(d):Gm(r.k,d)}(n,e)}function lD(n,e,t){return n instanceof bc?zm(n,e):n instanceof Ic?IT(n,e):t}function cD(n,e){return n instanceof vh?Bv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class _h extends qm{}class bc extends qm{constructor(e){super(),this.elements=e}}function zm(n,e){const t=Tc(e);for(const r of n.elements)t.some(o=>ca(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ic extends qm{constructor(e){super(),this.elements=e}}function IT(n,e){let t=Tc(e);for(const r of n.elements)t=t.filter(o=>!ca(o,r));return{arrayValue:{values:t}}}class vh extends qm{constructor(e,t){super(),this.k=e,this.N=t}}function dD(n){return Xn(n.integerValue||n.doubleValue)}function Tc(n){return up(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Eh{constructor(e,t){this.field=e,this.transform=t}}class vS{constructor(e,t){this.version=e,this.transformResults=t}}class er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Yv{}function hD(n,e,t){n instanceof yp?function(r,o,u){const d=r.value.clone(),m=yD(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof sl?function(r,o,u){if(!Wm(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=yD(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(mD(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function fD(n,e,t){var o;n instanceof yp?function(r,o,u){if(!Wm(r.precondition,o))return;const d=r.value.clone(),m=_D(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(gD(o),d).setHasLocalMutations()}(n,e,t):n instanceof sl?function(r,o,u){if(!Wm(r.precondition,o))return;const d=_D(r.fieldTransforms,u,o),m=o.data;m.setAll(mD(r)),m.setAll(d),o.convertToFoundDocument(gD(o),m).setHasLocalMutations()}(n,e,t):Wm(n.precondition,o=e)&&o.convertToNoDocument(Ct.min())}function pD(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=cD(r.transform,o||null);null!=u&&(null==t&&(t=_i.empty()),t.set(r.field,u))}return t||null}function Zm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ch(t,r,(o,u)=>function wh(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof bc&&r instanceof bc||t instanceof Ic&&r instanceof Ic?ch(t.elements,r.elements,ca):t instanceof vh&&r instanceof vh?ca(t.N,r.N):t instanceof _h&&r instanceof _h);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function gD(n){return n.isFoundDocument()?n.version:Ct.min()}class yp extends Yv{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class sl extends Yv{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function mD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function yD(n,e,t){const r=new Map;vt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,lD(d,m,t[o]))}return r}function _D(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,uD(u,d,e))}return r}class _p extends Yv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Qv extends Yv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class TT{constructor(e){this.count=e}}var lr,kt;function Jv(n){switch(n){default:return Xe();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function Xv(n){if(void 0===n)return ur("GRPC error has no .code"),ue.UNKNOWN;switch(n){case lr.OK:return ue.OK;case lr.CANCELLED:return ue.CANCELLED;case lr.UNKNOWN:return ue.UNKNOWN;case lr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case lr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case lr.INTERNAL:return ue.INTERNAL;case lr.UNAVAILABLE:return ue.UNAVAILABLE;case lr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case lr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case lr.NOT_FOUND:return ue.NOT_FOUND;case lr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case lr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case lr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case lr.ABORTED:return ue.ABORTED;case lr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case lr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case lr.DATA_LOSS:return ue.DATA_LOSS;default:return Xe()}}(kt=lr||(lr={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";class cr{constructor(e,t){this.comparator=e,this.root=t||Vr.EMPTY}insert(e,t){return new cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vp(this.root,e,this.comparator,!1)}getReverseIterator(){return new vp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vp(this.root,e,this.comparator,!0)}}class vp{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Vr.RED,this.left=null!=o?o:Vr.EMPTY,this.right=null!=u?u:Vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Vr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Vr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1,Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Vr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vD(this.data.getIterator())}getIteratorFrom(e){return new vD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hn(this.comparator);return t.data=e,t}}class vD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const CT=new cr(rt.comparator);function Qs(){return CT}const AT=new cr(rt.comparator);function eE(){return AT}const ST=new cr(rt.comparator);function Dh(){return ST}const MT=new Hn(rt.comparator);function Jt(...n){let e=MT;for(const t of n)e=e.add(t);return e}const da=new Hn(Ut);function Km(){return da}class Cc{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,tu.createSynthesizedTargetChangeForCurrentChange(e,t)),new Cc(Ct.min(),r,Km(),Qs(),Jt())}}class tu{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new tu(Ir.EMPTY_BYTE_STRING,t,Jt(),Jt(),Jt())}}class Ym{constructor(e,t,r,o){this.$=e,this.removedTargetIds=t,this.key=r,this.O=o}}class ED{constructor(e,t){this.targetId=e,this.M=t}}class wD{constructor(e,t,r=Ir.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Ep{constructor(){this.F=0,this.L=bD(),this.B=Ir.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.F}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=Jt(),t=Jt(),r=Jt();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Xe()}}),new tu(this.B,this.U,e,t,r)}H(){this.q=!1,this.L=bD()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.F+=1}Z(){this.F-=1}tt(){this.q=!0,this.U=!0}}class Qm{constructor(e){this.et=e,this.nt=new Map,this.st=Qs(),this.it=DD(),this.rt=new Hn(Ut)}ot(e){for(const t of e.$)e.O&&e.O.isFoundDocument()?this.ct(t,e.O):this.at(t,e.key,e.O);for(const t of e.removedTargetIds)this.at(t,e.key,e.O)}ut(e){this.forEachTarget(e,t=>{const r=this.ht(t);switch(e.state){case 0:this.lt(t)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(t);break;case 3:this.lt(t)&&(r.tt(),r.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),r.W(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((r,o)=>{this.lt(o)&&t(o)})}dt(e){const t=e.targetId,r=e.M.count,o=this.wt(t);if(o){const u=o.target;if(jm(u))if(0===r){const d=new rt(u.path);this.at(t,d,Mn.newNoDocument(d,Ct.min()))}else vt(1===r);else this._t(t)!==r&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&jm(m.target)){const v=new rt(m.target.path);null!==this.st.get(v)||this.yt(d,v)||this.at(d,v,Mn.newNoDocument(v,e))}u.j&&(t.set(d,u.G()),u.H())}});let r=Jt();this.it.forEach((u,d)=>{let m=!0;d.forEachWhile(v=>{const I=this.wt(v);return!I||2===I.purpose||(m=!1,!1)}),m&&(r=r.add(u))});const o=new Cc(e,t,this.rt,this.st,r);return this.st=Qs(),this.it=DD(),this.rt=new Hn(Ut),o}ct(e,t){if(!this.lt(e))return;const r=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,r),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}at(e,t,r){if(!this.lt(e))return;const o=this.ht(e);this.yt(e,t)?o.J(t,1):o.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),r&&(this.st=this.st.insert(t,r))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new Ep,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new Hn(Ut),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new Ep),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function DD(){return new cr(rt.comparator)}function bD(){return new cr(rt.comparator)}const ID={asc:"ASCENDING",desc:"DESCENDING"},TD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class tE{constructor(e,t){this.databaseId=e,this.C=t}}function bh(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CD(n,e){return n.C?e.toBase64():e.toUint8Array()}function RT(n,e){return bh(n,e.toTimestamp())}function si(n){return vt(!!n),Ct.fromTimestamp(function(e){const t=el(e);return new ii(t.seconds,t.nanos)}(n))}function wp(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Jm(n){const e=Qt.fromString(n);return vt(PD(e)),e}function Ih(n,e){return wp(n.databaseId,e.path)}function Js(n,e){const t=Jm(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(SD(t))}function Dp(n,e){return wp(n.databaseId,e)}function AD(n){const e=Jm(n);return 4===e.length?Qt.emptyPath():SD(e)}function bp(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SD(n){return vt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function MD(n,e,t){return{name:Ih(n,e),fields:t.value.mapValue.fields}}function nE(n,e,t){const r=Js(n,e.name),o=si(e.updateTime),u=new _i({mapValue:{fields:e.fields}}),d=Mn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Xm(n,e){let t;if(e instanceof yp)t={update:MD(n,e.key,e.value)};else if(e instanceof _p)t={delete:Ih(n,e.key)};else if(e instanceof sl)t={update:MD(n,e.key,e.data),updateMask:uE(e.fieldMask)};else{if(!(e instanceof Qv))return Xe();t={verify:Ih(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof _h)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof bc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ic)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof vh)return{fieldPath:u.field.canonicalString(),increment:d.N};throw Xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:RT(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Xe()),t;var o}function iE(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?er.updateTime(si(o.updateTime)):void 0!==o.exists?er.exists(o.exists):er.none():er.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(vt("REQUEST_TIME"===d.setToServerValue),m=new _h):"appendMissingElements"in d?m=new bc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Ic(d.removeAllFromArray.values||[]):"increment"in d?m=new vh(u,d.increment):Xe();const v=Jn.fromServerFormat(d.fieldPath);return new Eh(v,m)}(n,o)):[];var o;if(e.update){const o=Js(n,e.update.name),u=new _i({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new dh((e.updateMask.fieldPaths||[]).map(I=>Jn.fromServerFormat(I)));return new sl(o,u,d,t,r)}return new yp(o,u,t,r)}if(e.delete){const o=Js(n,e.delete);return new _p(o,t)}if(e.verify){const o=Js(n,e.verify);return new Qv(o,t)}return Xe()}function xD(n,e){return{documents:[Dp(n,e.path)]}}function sE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Dp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Dp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(m){if(0===m.length)return;const v=m.map(I=>function(S){if("=="===S.op){if(jv(S.value))return{unaryFilter:{field:Ch(S.field),op:"IS_NAN"}};if(Jw(S.value))return{unaryFilter:{field:Ch(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(jv(S.value))return{unaryFilter:{field:Ch(S.field),op:"IS_NOT_NAN"}};if(Jw(S.value))return{unaryFilter:{field:Ch(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ch(S.field),op:xT(S.op),value:S.value}}}(I));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(m){if(0!==m.length)return m.map(v=>{return{field:Ch((I=v).field),direction:Th(I.dir)};var I})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(v=e.limit,n.C||tl(v)?v:{value:v});var v;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=OD(e.startAt)),e.endAt&&(t.structuredQuery.endAt=OD(e.endAt)),t}function oE(n){let e=AD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){vt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=aE(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new gh(Ip((N=S).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(S){let N;return N="object"==typeof S?S.value:S,tl(N)?null:N}(t.limit));let v=null;t.startAt&&(v=vi(t.startAt));let I=null;return t.endAt&&(I=vi(t.endAt)),qv(e,o,d,u,m,"F",v,I)}function aE(n){return n?void 0!==n.unaryFilter?[OT(n)]:void 0!==n.fieldFilter?[Tp(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>aE(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function OD(n){return{before:n.before,values:n.position}}function vi(n){return new hp(n.values||[],!!n.before)}function Th(n){return ID[n]}function xT(n){return TD[n]}function Ch(n){return{fieldPath:n.canonicalString()}}function Ip(n){return Jn.fromServerFormat(n.fieldPath)}function Tp(n){return Ri.create(Ip(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function OT(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ip(n.unaryFilter.field);return Ri.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ip(n.unaryFilter.field);return Ri.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ip(n.unaryFilter.field);return Ri.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ip(n.unaryFilter.field);return Ri.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function uE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function PD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Xs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kD(e)),e=PT(n.get(t),e);return kD(e)}function PT(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function kD(n){return n+"\x01\x01"}function So(n){const e=n.length;if(vt(e>=2),2===e)return vt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&Xe(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let v;0===o.length?v=m:(o+=m,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:Xe()}u=d+2}return new Qt(r)}class FD{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Xi{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Xi.store="owner",Xi.key="owner";class Mo{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Mo.store="mutationQueues",Mo.keyPath="userId";class cn{constructor(e,t,r,o,u){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=u}}cn.store="mutations",cn.keyPath="batchId",cn.userMutationsIndex="userMutationsIndex",cn.userMutationsKeyPath=["userId","batchId"];class Ni{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Xs(t)]}static key(e,t,r){return[e,Xs(t),r]}}Ni.store="documentMutations",Ni.PLACEHOLDER=new Ni;class LD{constructor(e,t){this.path=e,this.readTime=t}}class kT{constructor(e,t){this.path=e,this.version=t}}class Pn{constructor(e,t,r,o,u,d){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=u,this.parentPath=d}}Pn.store="remoteDocuments",Pn.readTimeIndex="readTimeIndex",Pn.readTimeIndexPath="readTime",Pn.collectionReadTimeIndex="collectionReadTimeIndex",Pn.collectionReadTimeIndexPath=["parentPath","readTime"];class Ds{constructor(e){this.byteSize=e}}Ds.store="remoteDocumentGlobal",Ds.key="remoteDocumentGlobalKey";class xi{constructor(e,t,r,o,u,d,m){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=u,this.lastLimboFreeSnapshotVersion=d,this.query=m}}xi.store="targets",xi.keyPath="targetId",xi.queryTargetsIndexName="queryTargetsIndex",xi.queryTargetsKeyPath=["canonicalId","targetId"];class oi{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}oi.store="targetDocuments",oi.keyPath=["targetId","path"],oi.documentTargetsIndex="documentTargetsIndex",oi.documentTargetsKeyPath=["path","targetId"];class Oi{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}Oi.key="targetGlobalKey",Oi.store="targetGlobal";class nu{constructor(e,t){this.collectionId=e,this.parent=t}}nu.store="collectionParents",nu.keyPath=["collectionId","parent"];class ol{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}ol.store="clientMetadata",ol.keyPath="clientId";class Ah{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Ah.store="bundles",Ah.keyPath="bundleId";class Sh{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Sh.store="namedQueries",Sh.keyPath="name";const VD=[Mo.store,cn.store,Ni.store,Pn.store,xi.store,Xi.store,Oi.store,oi.store,ol.store,Ds.store,nu.store,Ah.store,Sh.store],lE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ae((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ae?t:Ae.resolve(t)}catch(t){return Ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ae.reject(t)}static resolve(e){return new Ae((t,r)=>{t(e)})}static reject(e){return new Ae((t,r)=>{r(e)})}static waitFor(e){return new Ae((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},v=>r(v))}),d=!0,u===o&&t()})}static or(e){let t=Ae.resolve(!1);for(const r of e)t=t.next(o=>o?Ae.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Cp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new br,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new Mh(e,t.error)):this.It.resolve()},this.transaction.onerror=r=>{const o=ey(r.target.error);this.It.reject(new Mh(e,o))}}static open(e,t,r,o){try{return new Cp(t,e.transaction(o,r))}catch(u){throw new Mh(t,u)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new BD(t)}}class Ro{constructor(e,t,r){this.name=e,this.version=t,this.Rt=r,12.2===Ro.bt((0,Vt.z$)())&&ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),al(window.indexedDB.deleteDatabase(e)).toPromise()}static Pt(){if(!(0,Vt.hl)())return!1;if(Ro.vt())return!0;const e=(0,Vt.z$)(),t=Ro.bt(e),r=0<t&&t<10,o=Ro.Vt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static bt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Mh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Me(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Me(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Mh(e,m))},u.onupgradeneeded=d=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Rt.Nt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=r=>t.kt(r)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ye.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Ct(e);const v=Cp.open(u.db,e,d?"readonly":"readwrite",r),I=o(v).catch(S=>(v.abort(S),Ae.reject(S))).toPromise();return I.catch(()=>{}),yield v.At,I}catch(v){const I="FirebaseError"!==v.name&&m<3;if(Fe("SimpleDb","Transaction failed with error:",v.message,"Retrying:",I),u.close(),!I)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class FT{constructor(e){this.$t=e,this.Ot=!1,this.Mt=null}get isDone(){return this.Ot}get Ft(){return this.Mt}set cursor(e){this.$t=e}done(){this.Ot=!0}Lt(e){this.Mt=e}delete(){return al(this.$t.delete())}}class Mh extends Me{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ac(n){return"IndexedDbTransactionError"===n.name}class BD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),al(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),al(this.store.add(e))}get(e){return al(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),al(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),al(this.store.count())}Bt(e,t){const r=this.cursor(this.options(e,t)),o=[];return this.Ut(r,(u,d)=>{o.push(d)}).next(()=>o)}qt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Kt=!1;const o=this.cursor(r);return this.Ut(o,(u,d,m)=>m.delete())}jt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Ut(o,t)}Qt(e){const t=this.cursor({});return new Ae((r,o)=>{t.onerror=u=>{const d=ey(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Ut(e,t){const r=[];return new Ae((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const v=new FT(m),I=t(m.primaryKey,m.value,v);if(I instanceof Ae){const S=I.catch(N=>(v.done(),Ae.reject(N)));r.push(S)}v.isDone?o():null===v.Ft?m.continue():m.continue(v.Ft)}}).next(()=>Ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Kt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function al(n){return new Ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=ey(r.target.error);t(o)}})}let cE=!1;function ey(n){const e=Ro.bt((0,Vt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cE||(cE=!0,setTimeout(()=>{throw r},0)),r}}return n}class jD extends UD{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function es(n,e){const t=qe(n);return Ro.Dt(t.Wt,e)}class $D{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&hD(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&fD(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&fD(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Ct.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&ch(this.mutations,e.mutations,(t,r)=>Zm(t,r))&&ch(this.baseMutations,e.baseMutations,(t,r)=>Zm(t,r))}}class ty{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){vt(e.mutations.length===r.length);let o=Dh();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new ty(e,t,r,o)}}class Sc{constructor(e,t,r,o,u=Ct.min(),d=Ct.min(),m=Ir.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Sc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Sc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Sc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class LT{constructor(e){this.Gt=e}}function HD(n,e){if(e.document)return nE(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=rt.fromSegments(e.noDocument.path),r=Sp(e.noDocument.readTime),o=Mn.newNoDocument(t,r);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){const t=rt.fromSegments(e.unknownDocument.path),r=Sp(e.unknownDocument.version);return Mn.newUnknownDocument(t,r)}return Xe()}function VT(n,e,t){const r=GD(t),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){const u={name:Ih(m=n.Gt,(v=e).key),fields:v.data.value.mapValue.fields,updateTime:bh(m,v.version.toTimestamp())};return new Pn(null,null,u,e.hasCommittedMutations,r,o)}var m,v;if(e.isNoDocument()){const u=e.key.path.toArray(),d=Ap(e.version),m=e.hasCommittedMutations;return new Pn(null,new LD(u,d),null,m,r,o)}if(e.isUnknownDocument()){const u=e.key.path.toArray(),d=Ap(e.version);return new Pn(new kT(u,d),null,null,!0,r,o)}return Xe()}function GD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function UT(n){const e=new ii(n[0],n[1]);return Ct.fromTimestamp(e)}function Ap(n){const e=n.toTimestamp();return new FD(e.seconds,e.nanoseconds)}function Sp(n){const e=new ii(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function ru(n,e){const t=(e.baseMutations||[]).map(u=>iE(n.Gt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>iE(n.Gt,u)),o=ii.fromMillis(e.localWriteTimeMs);return new $D(e.batchId,o,t,r)}function ny(n){const e=Sp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Sp(n.lastLimboFreeSnapshotVersion):Ct.min();let r;var o;return void 0!==n.query.documents?(vt(1===(o=n.query).documents.length),r=Ao(fp(AD(o.documents[0])))):r=Ao(oE(n.query)),new Sc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ir.fromBase64String(n.resumeToken))}function ry(n,e){const t=Ap(e.snapshotVersion),r=Ap(e.lastLimboFreeSnapshotVersion);let o;o=jm(e.target)?xD(n.Gt,e.target):sE(n.Gt,e.target);const u=e.resumeToken.toBase64();return new xi(e.targetId,cp(e.target),t,u,e.sequenceNumber,r,o)}function ul(n){const e=oE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Wv(e,e.limit,"L"):e}class qD{getBundleMetadata(e,t){return zD(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Sp(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return zD(e).put({bundleId:(r=t).id,createTime:Ap(si(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return WD(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:ul(o.bundledQuery),readTime:Sp(o.readTime)};var o})}saveNamedQuery(e,t){return WD(e).put({name:(r=t).name,readTime:Ap(si(r.readTime)),bundledQuery:r.bundledQuery});var r}}function zD(n){return es(n,Ah.store)}function WD(n){return es(n,Sh.store)}class dE{constructor(){this.zt=new iy}addToCollectionParentIndex(e,t){return this.zt.add(t),Ae.resolve()}getCollectionParents(e,t){return Ae.resolve(this.zt.getEntries(t))}}class iy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Hn(Qt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Hn(Qt.comparator)).toArray()}}class ZD{constructor(){this.Ht=new iy}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const u={collectionId:r,parent:Xs(o)};return hE(e).put(u)}return Ae.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[gT(t),""],!1,!0);return hE(e).Bt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(So(d.parent))}return r})}}function hE(n){return es(n,nu.store)}const BT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Pi(e,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Mp(n,e,t){const r=n.store(cn.store),o=n.store(Ni.store),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const v=r.jt({range:d},(S,N,L)=>(m++,L.delete()));u.push(v.next(()=>{vt(1===m)}));const I=[];for(const S of t.mutations){const N=Ni.key(e,S.key.path,t.batchId);u.push(o.delete(N)),I.push(S.key)}return Ae.waitFor(u).next(()=>I)}function Rp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}Pi.DEFAULT_COLLECTION_PERCENTILE=10,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pi.DEFAULT=new Pi(41943040,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pi.DISABLED=new Pi(-1,0,0);class KD{constructor(e,t,r,o){this.userId=e,this.k=t,this.Jt=r,this.referenceDelegate=o,this.Yt={}}static Xt(e,t,r,o){vt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new KD(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mc(e).jt({index:cn.userMutationsIndex,range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Rh(e),d=Mc(e);return d.add({}).next(m=>{vt("number"==typeof m);const v=new $D(m,t,r,o),I=function(L,G,J){const _e=J.baseMutations.map(ct=>Xm(L.Gt,ct)),ke=J.mutations.map(ct=>Xm(L.Gt,ct));return new cn(G,J.batchId,J.localWriteTime.toMillis(),_e,ke)}(this.k,this.userId,v),S=[];let N=new Hn((L,G)=>Ut(L.canonicalString(),G.canonicalString()));for(const L of o){const G=Ni.key(this.userId,L.key.path,m);N=N.add(L.key.path.popLast()),S.push(d.put(I)),S.push(u.put(G,Ni.PLACEHOLDER))}return N.forEach(L=>{S.push(this.Jt.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.Yt[m]=v.keys()}),Ae.waitFor(S).next(()=>v)})}lookupMutationBatch(e,t){return Mc(e).get(t).next(r=>r?(vt(r.userId===this.userId),ru(this.k,r)):null)}Zt(e,t){return this.Yt[t]?Ae.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Yt[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Mc(e).jt({index:cn.userMutationsIndex,range:o},(d,m,v)=>{m.userId===this.userId&&(vt(m.batchId>=r),u=ru(this.k,m)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Mc(e).jt({index:cn.userMutationsIndex,range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mc(e).Bt(cn.userMutationsIndex,t).next(r=>r.map(o=>ru(this.k,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ni.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Rh(e).jt({range:o},(d,m,v)=>{const[I,S,N]=d,L=So(S);if(I===this.userId&&t.path.isEqual(L))return Mc(e).get(N).next(G=>{if(!G)throw Xe();vt(G.userId===this.userId),u.push(ru(this.k,G))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Ut);const o=[];return t.forEach(u=>{const d=Ni.prefixForPath(this.userId,u.path),m=IDBKeyRange.lowerBound(d),v=Rh(e).jt({range:m},(I,S,N)=>{const[L,G,J]=I,_e=So(G);L===this.userId&&u.path.isEqual(_e)?r=r.add(J):N.done()});o.push(v)}),Ae.waitFor(o).next(()=>this.te(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Ni.prefixForPath(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new Hn(Ut);return Rh(e).jt({range:d},(v,I,S)=>{const[N,L,G]=v,J=So(L);N===this.userId&&r.isPrefixOf(J)?J.length===o&&(m=m.add(G)):S.done()}).next(()=>this.te(e,m))}te(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Mc(e).get(u).next(d=>{if(null===d)throw Xe();vt(d.userId===this.userId),r.push(ru(this.k,d))}))}),Ae.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Mp(e.Wt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),Ae.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ae.resolve();const r=IDBKeyRange.lowerBound(Ni.prefixForUser(this.userId)),o=[];return Rh(e).jt({range:r},(u,d,m)=>{if(u[0]===this.userId){const v=So(u[1]);o.push(v)}else m.done()}).next(()=>{vt(0===o.length)})})}containsKey(e,t){return jT(e,this.userId,t)}ne(e){return sy(e).get(this.userId).next(t=>t||new Mo(this.userId,-1,""))}}function jT(n,e,t){const r=Ni.prefixForPath(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Rh(n).jt({range:u,Kt:!0},(m,v,I)=>{const[S,N,L]=m;S===e&&N===o&&(d=!0),I.done()}).next(()=>d)}function Mc(n){return es(n,cn.store)}function Rh(n){return es(n,Ni.store)}function sy(n){return es(n,Mo.store)}class Rc{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new Rc(0)}static re(){return new Rc(-1)}}class ES{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const r=new Rc(t.highestTargetId);return t.highestTargetId=r.next(),this.ce(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>Ct.fromTimestamp(new ii(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.oe(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.ce(e,o)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.oe(e).next(r=>(r.targetCount+=1,this.ue(t,r),this.ce(e,r))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Nh(e).delete(t.targetId)).next(()=>this.oe(e)).next(r=>(vt(r.targetCount>0),r.targetCount-=1,this.ce(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Nh(e).jt((d,m)=>{const v=ny(m);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,u.push(this.removeTargetData(e,v)))}).next(()=>Ae.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Nh(e).jt((r,o)=>{const u=ny(o);t(u)})}oe(e){return oy(e).get(Oi.key).next(t=>(vt(null!==t),t))}ce(e,t){return oy(e).put(Oi.key,t)}ae(e,t){return Nh(e).put(ry(this.k,t))}ue(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const r=cp(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Nh(e).jt({range:o,index:xi.queryTargetsIndexName},(d,m,v)=>{const I=ny(m);dp(t,I.target)&&(u=I,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=ll(e);return t.forEach(d=>{const m=Xs(d.path);o.push(u.put(new oi(r,m))),o.push(this.referenceDelegate.addReference(e,r,d))}),Ae.waitFor(o)}removeMatchingKeys(e,t,r){const o=ll(e);return Ae.forEach(t,u=>{const d=Xs(u.path);return Ae.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ll(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=ll(e);let u=Jt();return o.jt({range:r,Kt:!0},(d,m,v)=>{const I=So(d[1]),S=new rt(I);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Xs(t.path),o=IDBKeyRange.bound([r],[gT(r)],!1,!0);let u=0;return ll(e).jt({index:oi.documentTargetsIndex,Kt:!0,range:o},([d,m],v,I)=>{0!==d&&(u++,I.done())}).next(()=>u>0)}Et(e,t){return Nh(e).get(t).next(r=>r?ny(r):null)}}function Nh(n){return es(n,xi.store)}function oy(n){return es(n,Oi.store)}function ll(n){return es(n,oi.store)}function Tr(n){return fE.apply(this,arguments)}function fE(){return fE=(0,ye.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==lE)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),fE.apply(this,arguments)}function ay([n,e],[t,r]){const o=Ut(n,t);return 0===o?Ut(e,r):o}class $T{constructor(e){this.he=e,this.buffer=new Hn(ay),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ay(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class HT{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const r=this.we?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Ac(o)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Tr(o)}yield t.me(e)}))}}class pE{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ae.resolve(Ji.I);const r=new $T(t);return this.ge.forEachTarget(e,o=>r.de(o.sequenceNumber)).next(()=>this.ge.pe(e,o=>r.de(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.ge.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(BT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BT):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let r,o,u,d,m,v,I;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(I=Date.now(),Fm()<=Wa.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(v-m)+`ms\n\tRemoved ${N} documents in `+(I-v)+`ms\nTotal Duration: ${I-S}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class YD{constructor(e,t){this.db=e,this.garbageCollector=new pE(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Ee(e){let t=0;return this.pe(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(r,o)=>t(o))}addReference(e,t,r){return Np(e,r)}removeReference(e,t,r){return Np(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Np(e,t)}Ae(e,t){return function(r,o){let u=!1;return sy(r).Qt(d=>jT(r,d,o).next(m=>(m&&(u=!0),Ae.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Ie(e,(d,m)=>{if(m<=t){const v=this.Ae(e,d).next(I=>{if(!I)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d),ll(e).delete([0,Xs(d.path)])))});o.push(v)}}).next(()=>Ae.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Np(e,t)}Ie(e,t){const r=ll(e);let o,u=Ji.I;return r.jt({index:oi.documentTargetsIndex},([d,m],{path:v,sequenceNumber:I})=>{0===d?(u!==Ji.I&&t(new rt(So(o)),u),u=I,o=v):u=Ji.I}).next(()=>{u!==Ji.I&&t(new rt(So(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Np(n,e){return ll(n).put((r=n.currentSequenceNumber,new oi(0,Xs(e.path),r)));var r}class xh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){Xu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return sp(this.inner)}}class gE{constructor(){this.changes=new xh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Ct.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Mn.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ae.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QD{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,r){return ha(e).put(ts(t),r)}removeEntry(e,t){const r=ha(e),o=ts(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Re(e,r)))}getEntry(e,t){return ha(e).get(ts(t)).next(r=>this.be(t,r))}Pe(e,t){return ha(e).get(ts(t)).next(r=>({document:this.be(t,r),size:Rp(r)}))}getEntries(e,t){let r=Qs();return this.ve(e,t,(o,u)=>{const d=this.be(o,u);r=r.insert(o,d)}).next(()=>r)}Ve(e,t){let r=Qs(),o=new cr(rt.comparator);return this.ve(e,t,(u,d)=>{const m=this.be(u,d);r=r.insert(u,m),o=o.insert(u,Rp(d))}).next(()=>({documents:r,Se:o}))}ve(e,t,r){if(t.isEmpty())return Ae.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),u=t.getIterator();let d=u.getNext();return ha(e).jt({range:o},(m,v,I)=>{const S=rt.fromSegments(m);for(;d&&rt.comparator(d,S)<0;)r(d,null),d=u.getNext();d&&d.isEqual(S)&&(r(d,v),d=u.hasNext()?u.getNext():null),d?I.Lt(d.path.toArray()):I.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r){let o=Qs();const u=t.path.length+1,d={};if(r.isEqual(Ct.min())){const m=t.path.toArray();d.range=IDBKeyRange.lowerBound(m)}else{const m=t.path.toArray(),v=GD(r);d.range=IDBKeyRange.lowerBound([m,v],!0),d.index=Pn.collectionReadTimeIndex}return ha(e).jt(d,(m,v,I)=>{if(m.length!==u)return;const S=HD(this.k,v);t.path.isPrefixOf(S.key.path)?gp(t,S)&&(o=o.insert(S.key,S)):I.done()}).next(()=>o)}newChangeBuffer(e){return new GT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return JD(e).get(Ds.key).next(t=>(vt(!!t),t))}Re(e,t){return JD(e).put(Ds.key,t)}be(e,t){if(t){const r=HD(this.k,t);if(!r.isNoDocument()||!r.version.isEqual(Ct.min()))return r}return Mn.newInvalidDocument(e)}}class GT extends gE{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new xh(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Hn((u,d)=>Ut(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Ce.get(u);if(d.document.isValidDocument()){const v=VT(this.De.k,d.document,this.getReadTime(u));o=o.add(u.path.popLast()),r+=Rp(v)-m,t.push(this.De.addEntry(e,u,v))}else if(r-=m,this.trackRemovals){const v=VT(this.De.k,Mn.newNoDocument(u,Ct.min()),this.getReadTime(u));t.push(this.De.addEntry(e,u,v))}else t.push(this.De.removeEntry(e,u))}),o.forEach(u=>{t.push(this.De.Jt.addToCollectionParentIndex(e,u))}),t.push(this.De.updateMetadata(e,r)),Ae.waitFor(t)}getFromCache(e,t){return this.De.Pe(e,t).next(r=>(this.Ce.set(t,r.size),r.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:r,Se:o})=>(o.forEach((u,d)=>{this.Ce.set(u,d)}),r))}}function JD(n){return es(n,Ds.store)}function ha(n){return es(n,Pn.store)}function ts(n){return n.path.toArray()}class qT{constructor(e){this.k=e}Nt(e,t,r,o){vt(r<o&&r>=0&&o<=11);const u=new Cp("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore(Xi.store),(m=e).createObjectStore(Mo.store,{keyPath:Mo.keyPath}),m.createObjectStore(cn.store,{keyPath:cn.keyPath,autoIncrement:!0}).createIndex(cn.userMutationsIndex,cn.userMutationsKeyPath,{unique:!0}),m.createObjectStore(Ni.store),zT(e),function(m){m.createObjectStore(Pn.store)}(e));let d=Ae.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore(oi.store),m.deleteObjectStore(xi.store),m.deleteObjectStore(Oi.store)}(e),zT(e)),d=d.next(()=>function(m){const v=m.store(Oi.store),I=new Oi(0,0,Ct.min().toTimestamp(),0);return v.put(Oi.key,I)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,v){return v.store(cn.store).Bt().next(I=>{m.deleteObjectStore(cn.store),m.createObjectStore(cn.store,{keyPath:cn.keyPath,autoIncrement:!0}).createIndex(cn.userMutationsIndex,cn.userMutationsKeyPath,{unique:!0});const S=v.store(cn.store),N=I.map(L=>S.put(L));return Ae.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore(ol.store,{keyPath:ol.keyPath})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Ne(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore(Ds.store)}(e),this.ke(u)))),r<7&&o>=7&&(d=d.next(()=>this.xe(u))),r<8&&o>=8&&(d=d.next(()=>this.$e(e,u))),r<9&&o>=9&&(d=d.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e),function(m){const v=m.objectStore(Pn.store);v.createIndex(Pn.readTimeIndex,Pn.readTimeIndexPath,{unique:!1}),v.createIndex(Pn.collectionReadTimeIndex,Pn.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(d=d.next(()=>this.Oe(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore(Ah.store,{keyPath:Ah.keyPath})})(e),function(m){m.createObjectStore(Sh.store,{keyPath:Sh.keyPath})}(e)})),d}ke(e){let t=0;return e.store(Pn.store).jt((r,o)=>{t+=Rp(o)}).next(()=>{const r=new Ds(t);return e.store(Ds.store).put(Ds.key,r)})}Ne(e){const t=e.store(Mo.store),r=e.store(cn.store);return t.Bt().next(o=>Ae.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.Bt(cn.userMutationsIndex,d).next(m=>Ae.forEach(m,v=>{vt(v.userId===u.userId);const I=ru(this.k,v);return Mp(e,u.userId,I).next(()=>{})}))}))}xe(e){const t=e.store(oi.store),r=e.store(Pn.store);return e.store(Oi.store).get(Oi.key).next(o=>{const u=[];return r.jt((d,m)=>{const v=new Qt(d),I=[0,Xs(v)];u.push(t.get(I).next(S=>S?Ae.resolve():t.put(new oi(0,Xs(v),o.highestListenSequenceNumber))))}).next(()=>Ae.waitFor(u))})}$e(e,t){e.createObjectStore(nu.store,{keyPath:nu.keyPath});const r=t.store(nu.store),o=new iy,u=d=>{if(o.add(d)){const m=d.lastSegment(),v=d.popLast();return r.put({collectionId:m,parent:Xs(v)})}};return t.store(Pn.store).jt({Kt:!0},(d,m)=>{const v=new Qt(d);return u(v.popLast())}).next(()=>t.store(Ni.store).jt({Kt:!0},([d,m,v],I)=>{const S=So(m);return u(S.popLast())}))}Oe(e){const t=e.store(xi.store);return t.jt((r,o)=>{const u=ny(o),d=ry(this.k,u);return t.put(d)})}}function zT(n){n.createObjectStore(oi.store,{keyPath:oi.keyPath}).createIndex(oi.documentTargetsIndex,oi.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(xi.store,{keyPath:xi.keyPath}).createIndex(xi.queryTargetsIndexName,xi.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Oi.store)}const mE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class uy{constructor(e,t,r,o,u,d,m,v,I,S){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Me=u,this.window=d,this.document=m,this.Fe=I,this.Le=S,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=N=>Promise.resolve(),!uy.Pt())throw new Me(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new YD(this,o),this.Ge=t+"main",this.k=new LT(v),this.ze=new Ro(this.Ge,11,new qT(this.k)),this.He=new ES(this.referenceDelegate,this.k),this.Jt=new ZD,this.Je=new QD(this.k,this.Jt),this.Ye=new qD,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===S&&ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ue.FAILED_PRECONDITION,mE);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new Ji(e,this.Fe)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var r=(0,ye.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Me.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ly(e).put(new ol(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Me.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.cn(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(Ac(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Me.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return xp(e).get(Xi.key).next(t=>Ae.resolve(this.un(t)))}hn(e){return ly(e).delete(this.clientId)}ln(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=es(r,ol.store);return o.Bt().next(u=>{const d=e.dn(u,18e5),m=u.filter(v=>-1===d.indexOf(v));return Ae.forEach(m,v=>o.delete(v.clientId)).next(()=>m)})}).catch(()=>[]);if(e.Xe)for(const r of t)e.Xe.removeItem(e.wn(r.clientId))}})()}nn(){this.je=this.Me.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Ae.resolve(!0):xp(e).get(Xi.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Me(ue.FAILED_PRECONDITION,mE);return!1}}return!(!this.networkEnabled||!this.inForeground)||ly(e).Bt().next(r=>void 0===this.dn(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[Xi.store,ol.store],t=>{const r=new jD(t,Ji.I);return e.cn(r).next(()=>e.hn(r))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(r=>this.fn(r.updateTimeMs,t)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>ly(e).Bt().next(t=>this.dn(t,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(e){return KD.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,r){let u;return Fe("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",VD,d=>(u=new jD(d,this.Be?this.Be.next():Ji.I),"readwrite-primary"===t?this.rn(u).next(m=>!!m||this.on(u)).next(m=>{if(!m)throw ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Me.enqueueRetryable(()=>this.We(!1)),new Me(ue.FAILED_PRECONDITION,lE);return r(u)}).next(m=>this.an(u).next(()=>m)):this.En(u).next(()=>r(u)))).then(d=>(u.raiseOnCommittedEvent(),d))}En(e){return xp(e).get(Xi.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ue.FAILED_PRECONDITION,mE)})}an(e){const t=new Xi(this.clientId,this.allowTabSynchronization,Date.now());return xp(e).put(Xi.key,t)}static Pt(){return Ro.Pt()}cn(e){const t=xp(e);return t.get(Xi.key).next(r=>this.un(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete(Xi.key)):Ae.resolve())}fn(e,t){const r=Date.now();return!(e<r-t||e>r&&(ur(`Detected an update time that is in the future: ${e} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Me.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,Vt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Me.enterRestrictedMode(!0),this.Me.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const r=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ur("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){ur("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xp(n){return es(n,Xi.store)}function ly(n){return es(n,ol.store)}function cy(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class WT{constructor(e,t){this.progress=e,this.In=t}}class ZT{constructor(e,t,r){this.Je=e,this.An=t,this.Jt=r}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.bn(e,t,r))}bn(e,t,r){return this.Je.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}Pn(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}vn(e,t){return this.Je.getEntries(e,t).next(r=>this.Vn(e,r).next(()=>r))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Pn(t,r))}getDocumentsMatchingQuery(e,t,r){return rt.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Sn(e,t.path):Dc(t)?this.Dn(e,t,r):this.Cn(e,t,r);var o}Sn(e,t){return this.Rn(e,new rt(t)).next(r=>{let o=eE();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Dn(e,t,r){const o=t.collectionGroup;let u=eE();return this.Jt.getCollectionParents(e,o).next(d=>Ae.forEach(d,m=>{const v=(I=t,S=m.child(o),new eu(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,S;return this.Cn(e,v,r).next(I=>{I.forEach((S,N)=>{u=u.insert(S,N)})})}).next(()=>u))}Cn(e,t,r){let o,u;return this.Je.getDocumentsMatchingQuery(e,t,r).next(d=>(o=d,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(d=>(u=d,this.Nn(e,u,o).next(m=>{o=m;for(const v of u)for(const I of v.mutations){const S=I.key;let N=o.get(S);null==N&&(N=Mn.newInvalidDocument(S),o=o.insert(S,N)),fD(I,N,v.localWriteTime),N.isFoundDocument()||(o=o.remove(S))}}))).next(()=>(o.forEach((d,m)=>{gp(t,m)||(o=o.remove(d))}),o))}Nn(e,t,r){let o=Jt();for(const d of t)for(const m of d.mutations)m instanceof sl&&null===r.get(m.key)&&(o=o.add(m.key));let u=r;return this.Je.getEntries(e,o).next(d=>(d.forEach((m,v)=>{v.isFoundDocument()&&(u=u.insert(m,v))}),u))}}class dy{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.kn=r,this.xn=o}static $n(e,t){let r=Jt(),o=Jt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new dy(e,t.fromCache,r,o)}}class yE{On(e){this.Mn=e}getDocumentsMatchingQuery(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(Ct.min())?this.Fn(e,t):this.Mn.vn(e,o).next(u=>{const d=this.Ln(t,u);return(Hm(t)||rl(t))&&this.Bn(t.limitType,d,o,r)?this.Fn(e,t):(Fm()<=Wa.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zv(t)),this.Mn.getDocumentsMatchingQuery(e,t,r).next(m=>(d.forEach(v=>{m=m.insert(v.key,v)}),m)))});var u}Ln(e,t){let r=new Hn(Kv(e));return t.forEach((o,u)=>{gp(e,u)&&(r=r.add(u))}),r}Bn(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Fn(e,t){return Fm()<=Wa.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",Zv(t)),this.Mn.getDocumentsMatchingQuery(e,t,Ct.min())}}class KT{constructor(e,t,r,o){this.persistence=e,this.Un=t,this.k=o,this.qn=new cr(Ut),this.Kn=new xh(u=>cp(u),dp),this.jn=Ct.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new ZT(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function XD(n,e,t,r){return new KT(n,e,t,r)}function _E(n,e){return Nc.apply(this,arguments)}function Nc(){return Nc=(0,ye.Z)(function*(n,e){const t=qe(n);let r=t.An,o=t.Wn;const u=yield t.persistence.runTransaction("Handle user change","readonly",d=>{let m;return t.An.getAllMutationBatches(d).next(v=>(m=v,r=t.persistence.getMutationQueue(e),o=new ZT(t.Qn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(d))).next(v=>{const I=[],S=[];let N=Jt();for(const L of m){I.push(L.batchId);for(const G of L.mutations)N=N.add(G.key)}for(const L of v){S.push(L.batchId);for(const G of L.mutations)N=N.add(G.key)}return o.vn(d,N).next(L=>({Gn:L,removedBatchIds:I,addedBatchIds:S}))})});return t.An=r,t.Wn=o,t.Un.On(t.Wn),u}),Nc.apply(this,arguments)}function vE(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Qn.newChangeBuffer({trackRemovals:!0});return function(d,m,v,I){const S=v.batch,N=S.keys();let L=Ae.resolve();return N.forEach(G=>{L=L.next(()=>I.getEntry(m,G)).next(J=>{const _e=v.docVersions.get(G);vt(null!==_e),J.version.compareTo(_e)<0&&(S.applyToRemoteDocument(J,v),J.isValidDocument()&&I.addEntry(J,v.commitVersion))})}),L.next(()=>d.An.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.An.performConsistencyCheck(r)).next(()=>t.Wn.vn(r,o))})}function EE(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function YT(n,e){const t=qe(n),r=e.snapshotVersion;let o=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Qn.newChangeBuffer({trackRemovals:!0});o=t.qn;const m=[];e.targetChanges.forEach((I,S)=>{const N=o.get(S);if(!N)return;m.push(t.He.removeMatchingKeys(u,I.removedDocuments,S).next(()=>t.He.addMatchingKeys(u,I.addedDocuments,S)));let L=N.withSequenceNumber(u.currentSequenceNumber);var G,J,_e;e.targetMismatches.has(S)?L=L.withResumeToken(Ir.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):I.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(I.resumeToken,r)),o=o.insert(S,L),J=L,_e=I,(0===(G=N).resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0)&&m.push(t.He.updateTargetData(u,L))});let v=Qs();if(e.documentUpdates.forEach((I,S)=>{e.resolvedLimboDocuments.has(I)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,I))}),m.push(wE(u,d,e.documentUpdates,r,void 0).next(I=>{v=I})),!r.isEqual(Ct.min())){const I=t.He.getLastRemoteSnapshotVersion(u).next(S=>t.He.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(I)}return Ae.waitFor(m).next(()=>d.apply(u)).next(()=>t.Wn.Vn(u,v)).next(()=>v)}).then(u=>(t.qn=o,u))}function wE(n,e,t,r,o){let u=Jt();return t.forEach(d=>u=u.add(d)),e.getEntries(n,u).next(d=>{let m=Qs();return t.forEach((v,I)=>{const S=d.get(v),N=(null==o?void 0:o.get(v))||r;I.isNoDocument()&&I.version.isEqual(Ct.min())?(e.removeEntry(v,N),m=m.insert(v,I)):!S.isValidDocument()||I.version.compareTo(S.version)>0||0===I.version.compareTo(S.version)&&S.hasPendingWrites?(e.addEntry(I,N),m=m.insert(v,I)):Fe("LocalStore","Ignoring outdated watch update for ",v,". Current version:",S.version," Watch version:",I.version)}),m})}function eb(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(r,e)))}function Oh(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.He.getTargetData(r,e).next(u=>u?(o=u,Ae.resolve(o)):t.He.allocateTargetId(r).next(d=>(o=new Sc(e,d,0,r.currentSequenceNumber),t.He.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qn.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qn=t.qn.insert(r.targetId,r),t.Kn.set(e,r.targetId)),r})}function Ph(n,e,t){return tb.apply(this,arguments)}function tb(){return tb=(0,ye.Z)(function*(n,e,t){const r=qe(n),o=r.qn.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Ac(d))throw d;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.qn=r.qn.remove(e),r.Kn.delete(o.target)}),tb.apply(this,arguments)}function DE(n,e,t){const r=qe(n);let o=Ct.min(),u=Jt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,v,I){const S=qe(m),N=S.Kn.get(I);return void 0!==N?Ae.resolve(S.qn.get(N)):S.He.getTargetData(v,I)}(r,d,Ao(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(d,m.targetId).next(v=>{u=v})}).next(()=>r.Un.getDocumentsMatchingQuery(d,e,t?o:Ct.min(),t?u:Jt())).next(m=>({documents:m,zn:u})))}function bE(n,e){const t=qe(n),r=qe(t.He),o=t.qn.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function nb(n){const e=qe(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,u){const d=qe(r);let m=Qs(),v=GD(u);const I=ha(o),S=IDBKeyRange.lowerBound(v,!0);return I.jt({index:Pn.readTimeIndex,range:S},(N,L)=>{const G=HD(d.k,L);m=m.insert(G.key,G),v=L.readTime}).next(()=>({In:m,readTime:UT(v)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:r})=>(e.jn=r,t))}function IE(){return IE=(0,ye.Z)(function*(n){const e=qe(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=ha(r);let u=Ct.min();return o.jt({index:Pn.readTimeIndex,reverse:!0},(d,m,v)=>{m.readTime&&(u=UT(m.readTime)),v.done()}).next(()=>u)}(t)).then(t=>{e.jn=t})}),IE.apply(this,arguments)}function rb(){return rb=(0,ye.Z)(function*(n,e,t,r){const o=qe(n);let u=Jt(),d=Qs(),m=Dh();for(const S of t){const N=e.Hn(S.metadata.name);S.document&&(u=u.add(N)),d=d.insert(N,e.Jn(S)),m=m.insert(N,e.Yn(S.metadata.readTime))}const v=o.Qn.newChangeBuffer({trackRemovals:!0}),I=yield Oh(o,(S=r,Ao(fp(Qt.fromString(`__bundle__/docs/${S}`)))));var S;return o.persistence.runTransaction("Apply bundle documents","readwrite",S=>wE(S,v,d,Ct.min(),m).next(N=>(v.apply(S),N)).next(N=>o.He.removeMatchingKeysForTargetId(S,I.targetId).next(()=>o.He.addMatchingKeys(S,u,I.targetId)).next(()=>o.Wn.Vn(S,N)).next(()=>N)))}),rb.apply(this,arguments)}function DS(n,e){return ib.apply(this,arguments)}function ib(){return ib=(0,ye.Z)(function*(n,e,t=Jt()){const r=yield Oh(n,Ao(ul(e.bundledQuery))),o=qe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=si(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ye.saveNamedQuery(u,e);const m=r.withResumeToken(Ir.EMPTY_BYTE_STRING,d);return o.qn=o.qn.insert(m.targetId,m),o.He.updateTargetData(u,m).next(()=>o.He.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.He.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ye.saveNamedQuery(u,e))})}),ib.apply(this,arguments)}class bS{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Ae.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var r;return this.Xn.set(t.id,{id:(r=t).id,version:r.version,createTime:si(r.createTime)}),Ae.resolve()}getNamedQuery(e,t){return Ae.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(r=t).name,query:ul(r.bundledQuery),readTime:si(r.readTime)}),Ae.resolve();var r}}class TE{constructor(){this.ts=new Hn(tr.es),this.ns=new Hn(tr.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const r=new tr(e,t);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.os(new tr(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new rt(new Qt([])),r=new tr(t,e),o=new tr(t,e+1),u=[];return this.ns.forEachInRange([r,o],d=>{this.os(d),u.push(d.key)}),u}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new rt(new Qt([])),r=new tr(t,e),o=new tr(t,e+1);let u=Jt();return this.ns.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new tr(e,0),r=this.ts.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class tr{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return rt.comparator(e.key,t.key)||Ut(e.fs,t.fs)}static ss(e,t){return Ut(e.fs,t.fs)||rt.comparator(e.key,t.key)}}class JT{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new Hn(tr.es)}checkEmpty(e){return Ae.resolve(0===this.An.length)}addMutationBatch(e,t,r,o){const u=this.ds;this.ds++;const d=new $D(u,t,r,o);this.An.push(d);for(const m of o)this.ws=this.ws.add(new tr(m.key,u)),this.Jt.addToCollectionParentIndex(e,m.key.path.popLast());return Ae.resolve(d)}lookupMutationBatch(e,t){return Ae.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.gs(t+1),u=o<0?0:o;return Ae.resolve(this.An.length>u?this.An[u]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Ae.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new tr(t,0),o=new tr(t,Number.POSITIVE_INFINITY),u=[];return this.ws.forEachInRange([r,o],d=>{const m=this._s(d.fs);u.push(m)}),Ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Ut);return t.forEach(o=>{const u=new tr(o,0),d=new tr(o,Number.POSITIVE_INFINITY);this.ws.forEachInRange([u,d],m=>{r=r.add(m.fs)})}),Ae.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;rt.isDocumentKey(u)||(u=u.child(""));const d=new tr(new rt(u),0);let m=new Hn(Ut);return this.ws.forEachWhile(v=>{const I=v.key.path;return!!r.isPrefixOf(I)&&(I.length===o&&(m=m.add(v.fs)),!0)},d),Ae.resolve(this.ys(m))}ys(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){vt(0===this.ps(t.batchId,"removed")),this.An.shift();let r=this.ws;return Ae.forEach(t.mutations,o=>{const u=new tr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ws=r})}ee(e){}containsKey(e,t){const r=new tr(t,0),o=this.ws.firstAfterOrEqual(r);return Ae.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return Ae.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class XT{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new cr(rt.comparator),this.size=0}addEntry(e,t,r){const o=t.key,u=this.docs.get(o),d=u?u.size:0,m=this.Ts(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:m,readTime:r}),this.size+=m-d,this.Jt.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ae.resolve(r?r.document.mutableCopy():Mn.newInvalidDocument(t))}getEntries(e,t){let r=Qs();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Mn.newInvalidDocument(o))}),Ae.resolve(r)}getDocumentsMatchingQuery(e,t,r){let o=Qs();const u=new rt(t.path.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:v,readTime:I}}=d.getNext();if(!t.path.isPrefixOf(m.path))break;I.compareTo(r)<=0||gp(t,v)&&(o=o.insert(v.key,v.mutableCopy()))}return Ae.resolve(o)}Es(e,t){return Ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sb(this)}getSize(e){return Ae.resolve(this.size)}}class sb extends gE{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.document.isValidDocument()?t.push(this.De.addEntry(e,o.document,this.getReadTime(r))):this.De.removeEntry(r)}),Ae.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class xc{constructor(e){this.persistence=e,this.Is=new xh(t=>cp(t),dp),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.As=0,this.Rs=new TE,this.targetCount=0,this.bs=Rc.ie()}forEachTarget(e,t){return this.Is.forEach((r,o)=>t(o)),Ae.resolve()}getLastRemoteSnapshotVersion(e){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ae.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.As&&(this.As=t),Ae.resolve()}ae(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new Rc(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,Ae.resolve()}updateTargetData(e,t){return this.ae(t),Ae.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Is.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Is.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),Ae.waitFor(u).next(()=>o)}getTargetCount(e){return Ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Is.get(t)||null;return Ae.resolve(r)}addMatchingKeys(e,t,r){return this.Rs.rs(t,r),Ae.resolve()}removeMatchingKeys(e,t,r){this.Rs.cs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),Ae.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Rs.ls(t);return Ae.resolve(r)}containsKey(e,t){return Ae.resolve(this.Rs.containsKey(t))}}class ob{constructor(e,t){this.Ps={},this.Be=new Ji(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new xc(this),this.Jt=new dE,this.Je=new XT(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new LT(t),this.Ye=new bS(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.Ps[e.toKey()];return t||(t=new JT(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const o=new CE(this.Be.next());return this.referenceDelegate.Vs(),r(o).next(u=>this.referenceDelegate.Ss(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ds(e,t){return Ae.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class CE extends UD{constructor(e){super(),this.currentSequenceNumber=e}}class Op{constructor(e){this.persistence=e,this.Cs=new TE,this.Ns=null}static ks(e){return new Op(e)}get xs(){if(this.Ns)return this.Ns;throw Xe()}addReference(e,t,r){return this.Cs.addReference(r,t),this.xs.delete(r.toString()),Ae.resolve()}removeReference(e,t,r){return this.Cs.removeReference(r,t),this.xs.add(r.toString()),Ae.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Ae.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(o=>this.xs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.xs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.xs,r=>{const o=rt.fromPath(r);return this.$s(e,o).next(u=>{u||t.removeEntry(o)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return Ae.or([()=>Ae.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function ab(n,e){return`firestore_clients_${n}_${e}`}function hy(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Pp(n,e){return`firestore_targets_${n}_${e}`}class Oc{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Os(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Me(o.error.code,o.error.message))),d?new Oc(e,t,o.state,u):(ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fy{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Os(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Me(r.error.code,r.error.message))),u?new fy(e,r.state,o):(ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class AE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Os(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Km();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=Lv(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new AE(e,u):(ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ub{constructor(e,t){this.clientId=e,this.onlineState=t}static Os(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ub(t.clientId,t.onlineState):(ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lb{constructor(){this.activeTargetIds=Km()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ms(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class py{constructor(e,t,r,o,u){this.window=e,this.Me=t,this.persistenceKey=r,this.Bs=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new cr(Ut),this.started=!1,this.js=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Qs=ab(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new lb),this.Gs=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(m){return`firestore_bundle_loaded_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static Pt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Tn();for(const o of t){if(o===e.Bs)continue;const u=e.getItem(ab(e.persistenceKey,o));if(u){const d=AE.Os(o,u);d&&(e.Ks=e.Ks.insert(d.clientId,d))}}e.Xs();const r=e.storage.getItem(e.Js);if(r){const o=e.Zs(r);o&&e.ti(o)}for(const o of e.js)e.qs(o);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,r){this.ni(e,t,r),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Pp(this.persistenceKey,e));if(r){const o=fy.Os(e,r);o&&(t=o.state)}}return this.ii.Fs(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pp(this.persistenceKey,e))}updateQueryState(e,t,r){this.ri(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.si(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ci()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Me.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.Gs.test(r.key)){if(null==r.newValue){const o=t.ai(r.key);return t.ui(o,null)}{const o=t.hi(r.key,r.newValue);if(o)return t.ui(o.clientId,o)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const o=t.li(r.key,r.newValue);if(o)return t.fi(o)}}else if(t.Hs.test(r.key)){if(null!==r.newValue){const o=t.di(r.key,r.newValue);if(o)return t.wi(o)}}else if(r.key===t.Js){if(null!==r.newValue){const o=t.Zs(r.newValue);if(o)return t.ti(o)}}else if(r.key===t.Ws){const o=function(u){let d=Ji.I;if(null!=u)try{const m=JSON.parse(u);vt("number"==typeof m),d=m}catch(m){ur("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==Ji.I&&t.sequenceNumberHandler(o)}else if(r.key===t.Ys)return t.syncEngine._i()}else t.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Ms())}ni(e,t,r){const o=new Oc(this.currentUser,e,t,r),u=hy(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Ms())}si(e){const t=hy(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,r){const o=Pp(this.persistenceKey,e),u=new fy(e,t,r);this.setItem(o,u.Ms())}ci(){this.setItem(this.Ys,"value-not-used")}ai(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const r=this.ai(e);return AE.Os(r,t)}li(e,t){const r=this.zs.exec(e),o=Number(r[1]);return Oc.Os(new ri(void 0!==r[2]?r[2]:null),o,t)}di(e,t){const r=this.Hs.exec(e),o=Number(r[1]);return fy.Os(o,t)}Zs(e){return ub.Os(e)}fi(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const r=t?this.Ks.insert(e,t):this.Ks.remove(e),o=this.ei(this.Ks),u=this.ei(r),d=[],m=[];return u.forEach(v=>{o.has(v)||d.push(v)}),o.forEach(v=>{u.has(v)||m.push(v)}),this.syncEngine.yi(d,m).then(()=>{this.Ks=r})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=Km();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class cb{constructor(){this.pi=new lb,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.pi.Fs(e),this.Ti[e]||"not-current"}updateQueryState(e,t,r){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new lb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class eC{Ei(e){}shutdown(){}}class db{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}bi(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const tC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class hb{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Oi(e){this.ki(e)}Mi(e){this.xi(e)}}class fb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,r,o,u){const d=this.Ui(e,t);Fe("RestConnection","Sending: ",d,r);const m={};return this.qi(m,o,u),this.Ki(e,d,m,r).then(v=>(Fe("RestConnection","Received: ",v),v),v=>{throw np("RestConnection",`${e} failed with error: `,v,"url: ",d,"request:",r),v})}ji(e,t,r,o,u){return this.Bi(e,t,r,o,u)}qi(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+lh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}Ui(e,t){return`${this.Fi}/v1/${t}:${tC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,r,o){return new Promise((u,d)=>{const m=new _S;m.listenOnce(Pm.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Nv.NO_ERROR:const I=m.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(I)),u(I);break;case Nv.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),d(new Me(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Nv.HTTP_ERROR:const S=m.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",m.getResponseText()),S>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const L=function(G){const J=G.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(J)>=0?J:ue.UNKNOWN}(N.status);d(new Me(L,N.message))}else d(new Me(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Me(ue.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);m.send(t,"POST",v,r,15)})}Qi(e,t,r){const o=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=oT(),d=aT(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new km({})),this.qi(m.initMessageHeaders,t,r),(0,Vt.uI)()||(0,Vt.b$)()||(0,Vt.d)()||(0,Vt.w1)()||(0,Vt.Mn)()||(0,Vt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const v=o.join("");Fe("Connection","Creating WebChannel: "+v,m);const I=u.createWebChannel(v,m);let S=!1,N=!1;const L=new hb({Vi:J=>{N?Fe("Connection","Not sending because WebChannel is closed:",J):(S||(Fe("Connection","Opening WebChannel transport."),I.open(),S=!0),Fe("Connection","WebChannel sending:",J),I.send(J))},Si:()=>I.close()}),G=(J,_e,ke)=>{J.listen(_e,ct=>{try{ke(ct)}catch(_t){setTimeout(()=>{throw _t},0)}})};return G(I,bn.EventType.OPEN,()=>{N||Fe("Connection","WebChannel transport opened.")}),G(I,bn.EventType.CLOSE,()=>{N||(N=!0,Fe("Connection","WebChannel transport closed"),L.Oi())}),G(I,bn.EventType.ERROR,J=>{N||(N=!0,np("Connection","WebChannel transport errored:",J),L.Oi(new Me(ue.UNAVAILABLE,"The operation could not be completed")))}),G(I,bn.EventType.MESSAGE,J=>{var _e;if(!N){const ke=J.data[0];vt(!!ke);const ct=ke,_t=ct.error||(null===(_e=ct[0])||void 0===_e?void 0:_e.error);if(_t){Fe("Connection","WebChannel received error:",_t);const Ot=_t.status;let dt=function(dr){const jr=lr[dr];if(void 0!==jr)return Xv(jr)}(Ot),nn=_t.message;void 0===dt&&(dt=ue.INTERNAL,nn="Unknown error status: "+Ot+" with message "+_t.message),N=!0,L.Oi(new Me(dt,nn)),I.close()}else Fe("Connection","WebChannel received:",ke),L.Mi(ke)}}),G(d,uT.STAT_EVENT,J=>{J.stat===tp.PROXY?Fe("Connection","Detected buffering proxy"):J.stat===tp.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.$i()},0),L}}function SE(){return"undefined"!=typeof window?window:null}function gy(){return"undefined"!=typeof document?document:null}function kp(n){return new tE(n,!0)}class my{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Me=e,this.timerId=t,this.Wi=r,this.Gi=o,this.zi=u,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),o=Math.max(0,t-r);o>0&&Fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ji=this.Me.enqueueAfterDelay(this.timerId,o,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class Fp{constructor(e,t,r,o,u,d,m,v){this.Me=e,this.nr=r,this.sr=o,this.ir=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=v,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new my(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,ye.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.cr&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,ye.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}pr(){this.ar&&(this.ar.cancel(),this.ar=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==e?r.ur.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(ur(t.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.rr===t&&this.Ir(r,o)},r=>{e(()=>{const o=new Me(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(o)})})}Ir(e,t){const r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{r(()=>(this.state=2,this.ar=this.Me.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(o=>{r(()=>this.Ar(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}dr(){var e=this;this.state=5,this.ur.Zi((0,ye.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Me.enqueueAndForget(()=>this.rr===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IS extends Fp{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.k=u}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function RD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:Xe(),o=e.targetChange.targetIds||[],u=function(v,I){return v.C?(vt(void 0===I||"string"==typeof I),Ir.fromBase64String(I||"")):(vt(void 0===I||I instanceof Uint8Array),Ir.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(v){const I=void 0===v.code?ue.UNKNOWN:Xv(v.code);return new Me(I,v.message||"")}(d);t=new wD(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Js(n,r.document.name),u=si(r.document.updateTime),d=new _i({mapValue:{fields:r.document.fields}}),m=Mn.newFoundDocument(o,u,d);t=new Ym(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Js(n,r.document),u=r.readTime?si(r.readTime):Ct.min(),d=Mn.newNoDocument(o,u);t=new Ym([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Js(n,r.document);t=new Ym([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Xe();{const r=e.filter,u=new TT(r.count||0);t=new ED(r.targetId,u)}}var v;return t}(this.k,e),r=function(o){if(!("targetChange"in o))return Ct.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Ct.min():u.readTime?si(u.readTime):Ct.min()}(e);return this.listener.br(t,r)}Pr(e){const t={};t.database=bp(this.k),t.addTarget=function(o,u){let d;const m=u.target;return d=jm(m)?{documents:xD(o,m)}:{query:sE(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=CD(o,u.resumeToken):u.snapshotVersion.compareTo(Ct.min())>0&&(d.readTime=bh(o,u.snapshotVersion.toTimestamp())),d}(this.k,e);const r=function NT(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.gr(t)}vr(e){const t={};t.database=bp(this.k),t.removeTarget=e,this.gr(t)}}class pb extends Fp{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.k=u,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function ND(n,e){return n&&n.length>0?(vt(void 0!==e),n.map(t=>function(r,o){let u=si(r.updateTime?r.updateTime:o);return u.isEqual(Ct.min())&&(u=si(o)),new vS(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=si(e.commitTime);return this.listener.Cr(r,t)}return vt(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=bp(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Xm(this.k,r))};this.gr(t)}}class yy extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=r,this.k=o,this.$r=!1}Or(){if(this.$r)throw new Me(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.ir.Bi(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(ue.UNKNOWN,o.toString())})}ji(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.ir.ji(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(ue.UNKNOWN,o.toString())})}terminate(){this.$r=!0}}class nC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}Br(){0===this.Mr&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Mr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(ur(t),this.Lr=!1):Fe("OnlineStateTracker",t)}jr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class rC{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=u,this.Hr.Ei(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var v;cl(d)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,ye.Z)(function*(I){const S=qe(I);S.Gr.add(4),yield Vp(S),S.Jr.set("Unknown"),S.Gr.delete(4),yield Lp(S)}),function(I){return v.apply(this,arguments)})(d))}))}),this.Jr=new nC(r,o)}}function Lp(n){return ME.apply(this,arguments)}function ME(){return ME=(0,ye.Z)(function*(n){if(cl(n))for(const e of n.zr)yield e(!0)}),ME.apply(this,arguments)}function Vp(n){return RE.apply(this,arguments)}function RE(){return RE=(0,ye.Z)(function*(n){for(const e of n.zr)yield e(!1)}),RE.apply(this,arguments)}function _y(n,e){const t=qe(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),OE(t)?xE(t):we(t).lr()&&NE(t,e))}function Up(n,e){const t=qe(n),r=we(t);t.Wr.delete(e),r.lr()&&gb(t,e),0===t.Wr.size&&(r.lr()?r._r():cl(t)&&t.Jr.set("Unknown"))}function NE(n,e){n.Yr.X(e.targetId),we(n).Pr(e)}function gb(n,e){n.Yr.X(e),we(n).vr(e)}function xE(n){n.Yr=new Qm({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),we(n).start(),n.Jr.Br()}function OE(n){return cl(n)&&!we(n).hr()&&n.Wr.size>0}function cl(n){return 0===qe(n).Gr.size}function iC(n){n.Yr=void 0}function TS(n){return mb.apply(this,arguments)}function mb(){return mb=(0,ye.Z)(function*(n){n.Wr.forEach((e,t)=>{NE(n,e)})}),mb.apply(this,arguments)}function CS(n,e){return yb.apply(this,arguments)}function yb(){return yb=(0,ye.Z)(function*(n,e){iC(n),OE(n)?(n.Jr.Kr(e),xE(n)):n.Jr.set("Unknown")}),yb.apply(this,arguments)}function sC(n,e,t){return _b.apply(this,arguments)}function _b(){return _b=(0,ye.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof wD&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.Wr.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.Wr.delete(m),o.Yr.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield PE(n,r)}else if(e instanceof Ym?n.Yr.ot(e):e instanceof ED?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(Ct.min()))try{const r=yield EE(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.Yr.gt(u);return d.targetChanges.forEach((m,v)=>{if(m.resumeToken.approximateByteSize()>0){const I=o.Wr.get(v);I&&o.Wr.set(v,I.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const v=o.Wr.get(m);if(!v)return;o.Wr.set(m,v.withResumeToken(Ir.EMPTY_BYTE_STRING,v.snapshotVersion)),gb(o,m);const I=new Sc(v.target,m,1,v.sequenceNumber);NE(o,I)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield PE(n,r)}var r}),_b.apply(this,arguments)}function PE(n,e,t){return vb.apply(this,arguments)}function vb(){return vb=(0,ye.Z)(function*(n,e,t){if(!Ac(e))throw e;n.Gr.add(1),yield Vp(n),n.Jr.set("Offline"),t||(t=()=>EE(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield Lp(n)}))}),vb.apply(this,arguments)}function oC(n,e){return e().catch(t=>PE(n,t,e))}function i(n){return s.apply(this,arguments)}function s(){return s=(0,ye.Z)(function*(n){const e=qe(n),t=et(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;a(e);)try{const o=yield eb(e.localStore,r);if(null===o){0===e.Qr.length&&t._r();break}r=o.batchId,l(e,o)}catch(o){yield PE(e,o)}c(e)&&p(e)}),s.apply(this,arguments)}function a(n){return cl(n)&&n.Qr.length<10}function l(n,e){n.Qr.push(e);const t=et(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function c(n){return cl(n)&&!et(n).hr()&&n.Qr.length>0}function p(n){et(n).start()}function _(n){return w.apply(this,arguments)}function w(){return w=(0,ye.Z)(function*(n){et(n).kr()}),w.apply(this,arguments)}function D(n){return C.apply(this,arguments)}function C(){return C=(0,ye.Z)(function*(n){const e=et(n);for(const t of n.Qr)e.Dr(t.mutations)}),C.apply(this,arguments)}function M(n,e,t){return k.apply(this,arguments)}function k(){return k=(0,ye.Z)(function*(n,e,t){const r=n.Qr.shift(),o=ty.from(r,e,t);yield oC(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield i(n)}),k.apply(this,arguments)}function B(n,e){return K.apply(this,arguments)}function K(){return K=(0,ye.Z)(function*(n,e){var t;e&&et(n).Sr&&(yield(t=(0,ye.Z)(function*(r,o){if(Jv(u=o.code)&&u!==ue.ABORTED){const d=r.Qr.shift();et(r).wr(),yield oC(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield i(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),c(n)&&p(n)}),K.apply(this,arguments)}function me(n,e){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,ye.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=cl(t);t.Gr.add(3),yield Vp(t),r&&t.Jr.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Gr.delete(3),yield Lp(t)}),Pe.apply(this,arguments)}function $e(n,e){return We.apply(this,arguments)}function We(){return We=(0,ye.Z)(function*(n,e){const t=qe(n);e?(t.Gr.delete(2),yield Lp(t)):e||(t.Gr.add(2),yield Vp(t),t.Jr.set("Unknown"))}),We.apply(this,arguments)}function we(n){return n.Xr||(n.Xr=function(e,t,r){const o=qe(e);return o.Or(),new IS(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:TS.bind(null,n),Ni:CS.bind(null,n),br:sC.bind(null,n)}),n.zr.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Xr.wr(),OE(n)?xE(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),iC(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function et(n){return n.Zr||(n.Zr=function(e,t,r){const o=qe(e);return o.Or(),new pb(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:_.bind(null,n),Ni:B.bind(null,n),Nr:D.bind(null,n),Cr:M.bind(null,n)}),n.zr.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Zr.wr(),yield i(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class Pt{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new Pt(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bt(n,e){if(ur("AsyncQueue",`${e}: ${n}`),Ac(n))return new Me(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class Ur{constructor(e){this.comparator=e?(t,r)=>e(t,r)||rt.comparator(t.key,r.key):(t,r)=>rt.comparator(t.key,r.key),this.keyedMap=eE(),this.sortedSet=new cr(this.comparator)}static emptySet(e){return new Ur(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ur)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ur;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class dl{constructor(){this.eo=new cr(rt.comparator)}track(e){const t=e.doc.key,r=this.eo.get(t);r?0!==e.type&&3===r.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==r.type?this.eo=this.eo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.eo=this.eo.remove(t):1===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):Xe():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,r)=>{e.push(r)}),e}}class hl{constructor(e,t,r,o,u,d,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new hl(e,t,Ur.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class kE{constructor(){this.so=void 0,this.listeners=[]}}class FE{constructor(){this.queries=new xh(e=>oD(e),pp),this.onlineState="Unknown",this.io=new Set}}function Bp(n,e){return jp.apply(this,arguments)}function jp(){return jp=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new kE),o)try{u.so=yield t.onListen(r)}catch(d){const m=Bt(d,`Initialization of query '${Zv(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.ro(t.onlineState),u.so&&e.oo(u.so)&&aC(t)}),jp.apply(this,arguments)}function $p(n,e){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Hp.apply(this,arguments)}function LE(n,e){const t=qe(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.oo(o)&&(r=!0);d.so=o}}r&&aC(t)}function VE(n,e,t){const r=qe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function aC(n){n.io.forEach(e=>{e.next()})}class uC{constructor(e,t,r){this.query=e,this.co=t,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new hl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.ao?this.ho(e)&&(this.co.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.co.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.ao&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.ao=!0,this.co.next(e)}}class wN{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class AS{constructor(e){this.k=e}Hn(e){return Js(this.k,e)}Jn(e){return e.metadata.exists?nE(this.k,e.document,!1):Mn.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return si(e)}}class DN{constructor(e,t,r){this.mo=e,this.localStore=t,this.k=r,this.queries=[],this.documents=[],this.progress=SS(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,r=new AS(this.k);for(const o of e)if(o.metadata.queries){const u=r.Hn(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||Jt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function wS(n,e,t,r){return rb.apply(this,arguments)}(e.localStore,new AS(e.k),e.documents,e.mo.id),r=e.po(e.documents);for(const o of e.queries)yield DS(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new WT(Object.assign({},e.progress),t)})()}}function SS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class MS{constructor(e){this.key=e}}class RS{constructor(e){this.key=e}}class NS{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=Jt(),this.mutatedKeys=Jt(),this.Ao=Kv(e),this.Ro=new Ur(this.Ao)}get bo(){return this.To}Po(e,t){const r=t?t.vo:new dl,o=t?t.Ro:this.Ro;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const v=Hm(this.query)&&o.size===this.query.limit?o.last():null,I=rl(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,N)=>{const L=o.get(S),G=gp(this.query,N)?N:null,J=!!L&&this.mutatedKeys.has(L.key),_e=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let ke=!1;L&&G?L.data.isEqual(G.data)?J!==_e&&(r.track({type:3,doc:G}),ke=!0):this.Vo(L,G)||(r.track({type:2,doc:G}),ke=!0,(v&&this.Ao(G,v)>0||I&&this.Ao(G,I)<0)&&(m=!0)):!L&&G?(r.track({type:0,doc:G}),ke=!0):L&&!G&&(r.track({type:1,doc:L}),ke=!0,(v||I)&&(m=!0)),ke&&(G?(d=d.add(G),u=_e?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),Hm(this.query)||rl(this.query))for(;d.size>this.query.limit;){const S=Hm(this.query)?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Ro:d,vo:r,Bn:m,mutatedKeys:u}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const u=e.vo.no();u.sort((I,S)=>function(N,L){const G=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return G(N)-G(L)}(I.type,S.type)||this.Ao(I.doc,S.doc)),this.So(r);const d=t?this.Do():[],m=0===this.Io.size&&this.current?1:0,v=m!==this.Eo;return this.Eo=m,0!==u.length||v?{snapshot:new hl(this.query,e.Ro,o,u,e.mutatedKeys,0===m,v,!1),Co:d}:{Co:d}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new dl,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=Jt(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const t=[];return e.forEach(r=>{this.Io.has(r)||t.push(new RS(r))}),this.Io.forEach(r=>{e.has(r)||t.push(new MS(r))}),t}ko(e){this.To=e.zn,this.Io=Jt();const t=this.Po(e.documents);return this.applyChanges(t,!0)}xo(){return hl.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class bN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class IN{constructor(e){this.key=e,this.$o=!1}}class TN{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Oo={},this.Mo=new xh(m=>oD(m),pp),this.Fo=new Map,this.Lo=new Set,this.Bo=new cr(rt.comparator),this.Uo=new Map,this.qo=new TE,this.Ko={},this.jo=new Map,this.Qo=Rc.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function CN(n,e){return lC.apply(this,arguments)}function lC(){return lC=(0,ye.Z)(function*(n,e){const t=xC(n);let r,o;const u=t.Mo.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.xo();else{const d=yield Oh(t.localStore,Ao(e)),m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield cC(t,e,r,"current"===m),t.isPrimaryClient&&_y(t.remoteStore,d)}return o}),lC.apply(this,arguments)}function cC(n,e,t,r){return dC.apply(this,arguments)}function dC(){return dC=(0,ye.Z)(function*(n,e,t,r){n.Go=(S,N,L)=>{return(G=(0,ye.Z)(function*(J,_e,ke,ct){let _t=_e.view.Po(ke);_t.Bn&&(_t=yield DE(J.localStore,_e.query,!1).then(({documents:nn})=>_e.view.Po(nn,_t)));const Ot=ct&&ct.targetChanges.get(_e.targetId),dt=_e.view.applyChanges(_t,J.isPrimaryClient,Ot);return wC(J,_e.targetId,dt.Co),dt.snapshot}),function(J,_e,ke,ct){return G.apply(this,arguments)})(n,S,N,L);var G};const o=yield DE(n.localStore,e,!0),u=new NS(e,o.zn),d=u.Po(o.documents),m=tu.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=u.applyChanges(d,n.isPrimaryClient,m);wC(n,t,v.Co);const I=new bN(e,t,u);return n.Mo.set(e,I),n.Fo.has(t)?n.Fo.get(t).push(e):n.Fo.set(t,[e]),v.snapshot}),dC.apply(this,arguments)}function AN(n,e){return hC.apply(this,arguments)}function hC(){return hC=(0,ye.Z)(function*(n,e){const t=qe(n),r=t.Mo.get(e),o=t.Fo.get(r.targetId);if(o.length>1)return t.Fo.set(r.targetId,o.filter(u=>!pp(u,e))),void t.Mo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ph(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Up(t.remoteStore,r.targetId),vy(t,r.targetId)}).catch(Tr))):(vy(t,r.targetId),yield Ph(t.localStore,r.targetId,!0))}),hC.apply(this,arguments)}function fC(){return fC=(0,ye.Z)(function*(n,e,t){const r=OC(n);try{const o=yield function(u,d){const m=qe(u),v=ii.now(),I=d.reduce((N,L)=>N.add(L.key),Jt());let S;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.Wn.vn(N,I).next(L=>{S=L;const G=[];for(const J of d){const _e=pD(J,S.get(J.key));null!=_e&&G.push(new sl(J.key,_e,Xw(_e.value.mapValue),er.exists(!0)))}return m.An.addMutationBatch(N,v,G,d)})).then(N=>(N.applyToLocalDocumentSet(S),{batchId:N.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let v=u.Ko[u.currentUser.toKey()];v||(v=new cr(Ut)),v=v.insert(d,m),u.Ko[u.currentUser.toKey()]=v}(r,o.batchId,t),yield Pc(r,o.changes),yield i(r.remoteStore)}catch(o){const u=Bt(o,"Failed to persist write");t.reject(u)}}),fC.apply(this,arguments)}function xS(n,e){return pC.apply(this,arguments)}function pC(){return pC=(0,ye.Z)(function*(n,e){const t=qe(n);try{const r=yield YT(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.Uo.get(u);d&&(vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.$o=!0:o.modifiedDocuments.size>0?vt(d.$o):o.removedDocuments.size>0&&(vt(d.$o),d.$o=!1))}),yield Pc(t,r,e)}catch(r){yield Tr(r)}}),pC.apply(this,arguments)}function OS(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Mo.forEach((u,d)=>{const m=d.view.ro(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=qe(u);m.onlineState=d;let v=!1;m.queries.forEach((I,S)=>{for(const N of S.listeners)N.ro(d)&&(v=!0)}),v&&aC(m)}(r.eventManager,e),o.length&&r.Oo.br(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function MN(n,e,t){return gC.apply(this,arguments)}function gC(){return gC=(0,ye.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Uo.get(e),u=o&&o.key;if(u){let d=new cr(rt.comparator);d=d.insert(u,Mn.newNoDocument(u,Ct.min()));const m=Jt().add(u),v=new Cc(Ct.min(),new Map,new Hn(Ut),d,m);yield xS(r,v),r.Bo=r.Bo.remove(u),r.Uo.delete(e),DC(r)}else yield Ph(r.localStore,e,!1).then(()=>vy(r,e,t)).catch(Tr)}),gC.apply(this,arguments)}function RN(n,e){return mC.apply(this,arguments)}function mC(){return mC=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const o=yield vE(t.localStore,e);EC(t,r,null),vC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pc(t,o)}catch(o){yield Tr(o)}}),mC.apply(this,arguments)}function NN(n,e,t){return yC.apply(this,arguments)}function yC(){return yC=(0,ye.Z)(function*(n,e,t){const r=qe(n);try{const o=yield function(u,d){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let I;return m.An.lookupMutationBatch(v,d).next(S=>(vt(null!==S),I=S.keys(),m.An.removeMutationBatch(v,S))).next(()=>m.An.performConsistencyCheck(v)).next(()=>m.Wn.vn(v,I))})}(r.localStore,e);EC(r,e,t),vC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pc(r,o)}catch(o){yield Tr(o)}}),yC.apply(this,arguments)}function _C(){return _C=(0,ye.Z)(function*(n,e){const t=qe(n);cl(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=qe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.An.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.jo.get(r)||[];o.push(e),t.jo.set(r,o)}catch(r){const o=Bt(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),_C.apply(this,arguments)}function vC(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function EC(n,e,t){const r=qe(n);let o=r.Ko[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Ko[r.currentUser.toKey()]=o}}function vy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fo.get(e))n.Mo.delete(r),t&&n.Oo.zo(r,t);n.Fo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(r=>{n.qo.containsKey(r)||PS(n,r)})}function PS(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(Up(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),DC(n))}function wC(n,e,t){for(const r of t)r instanceof MS?(n.qo.addReference(r.key,e),ON(n,r)):r instanceof RS?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,e),n.qo.containsKey(r.key)||PS(n,r.key)):Xe()}function ON(n,e){const t=e.key,r=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.Lo.add(r),DC(n))}function DC(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new rt(Qt.fromString(e)),r=n.Qo.next();n.Uo.set(r,new IN(t)),n.Bo=n.Bo.insert(t,r),_y(n.remoteStore,new Sc(Ao(fp(t.path)),r,2,Ji.I))}}function Pc(n,e,t){return bC.apply(this,arguments)}function bC(){return bC=(0,ye.Z)(function*(n,e,t){const r=qe(n),o=[],u=[],d=[];var m;r.Mo.isEmpty()||(r.Mo.forEach((m,v)=>{d.push(r.Go(v,e,t).then(I=>{if(I){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,I.fromCache?"not-current":"current"),o.push(I);const S=dy.$n(v.targetId,I);u.push(S)}}))}),yield Promise.all(d),r.Oo.br(o),yield(m=(0,ye.Z)(function*(v,I){const S=qe(v);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>Ae.forEach(I,L=>Ae.forEach(L.kn,G=>S.persistence.referenceDelegate.addReference(N,L.targetId,G)).next(()=>Ae.forEach(L.xn,G=>S.persistence.referenceDelegate.removeReference(N,L.targetId,G)))))}catch(N){if(!Ac(N))throw N;Fe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of I){const L=N.targetId;if(!N.fromCache){const G=S.qn.get(L),_e=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);S.qn=S.qn.insert(L,_e)}}}),function(v,I){return m.apply(this,arguments)})(r.localStore,u))}),bC.apply(this,arguments)}function PN(n,e){return IC.apply(this,arguments)}function IC(){return IC=(0,ye.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield _E(t.localStore,e);t.currentUser=e,(o=t).jo.forEach(d=>{d.forEach(m=>{m.reject(new Me(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.jo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pc(t,r.Gn)}var o}),IC.apply(this,arguments)}function kN(n,e){const t=qe(n),r=t.Uo.get(e);if(r&&r.$o)return Jt().add(r.key);{let o=Jt();const u=t.Fo.get(e);if(!u)return o;for(const d of u){const m=t.Mo.get(d);o=o.unionWith(m.view.bo)}return o}}function FN(n,e){return TC.apply(this,arguments)}function TC(){return TC=(0,ye.Z)(function*(n,e){const t=qe(n),r=yield DE(t.localStore,e.query,!0),o=e.view.ko(r);return t.isPrimaryClient&&wC(t,e.targetId,o.Co),o}),TC.apply(this,arguments)}function LN(n){return CC.apply(this,arguments)}function CC(){return CC=(0,ye.Z)(function*(n){const e=qe(n);return nb(e.localStore).then(t=>Pc(e,t))}),CC.apply(this,arguments)}function VN(n,e,t,r){return AC.apply(this,arguments)}function AC(){return AC=(0,ye.Z)(function*(n,e,t,r){const o=qe(n),u=yield function(d,m){const v=qe(d),I=qe(v.An);return v.persistence.runTransaction("Lookup mutation documents","readonly",S=>I.Zt(S,m).next(N=>N?v.Wn.vn(S,N):Ae.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield i(o.remoteStore):"acknowledged"===t||"rejected"===t?(EC(o,e,r||null),vC(o,e),m=e,qe(qe(o.localStore).An).ee(m)):Xe(),yield Pc(o,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),AC.apply(this,arguments)}function SC(){return SC=(0,ye.Z)(function*(n,e){const t=qe(n);if(xC(t),OC(t),!0===e&&!0!==t.Wo){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield kS(t,r.toArray());t.Wo=!0,yield $e(t.remoteStore,!0);for(const u of o)_y(t.remoteStore,u)}else if(!1===e&&!1!==t.Wo){const r=[];let o=Promise.resolve();t.Fo.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(vy(t,d),Ph(t.localStore,d,!0))),Up(t.remoteStore,d)}),yield o,yield kS(t,r),function(u){const d=qe(u);d.Uo.forEach((m,v)=>{Up(d.remoteStore,v)}),d.qo.hs(),d.Uo=new Map,d.Bo=new cr(rt.comparator)}(t),t.Wo=!1,yield $e(t.remoteStore,!1)}}),SC.apply(this,arguments)}function kS(n,e,t){return MC.apply(this,arguments)}function MC(){return MC=(0,ye.Z)(function*(n,e,t){const r=qe(n),o=[],u=[];for(const d of e){let m;const v=r.Fo.get(d);if(v&&0!==v.length){m=yield Oh(r.localStore,Ao(v[0]));for(const I of v){const S=r.Mo.get(I),N=yield FN(r,S);N.snapshot&&u.push(N.snapshot)}}else{const I=yield bE(r.localStore,d);m=yield Oh(r.localStore,I),yield cC(r,FS(I),d,!1)}o.push(m)}return r.Oo.br(u),o}),MC.apply(this,arguments)}function FS(n){return qv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function BN(n){const e=qe(n);return qe(qe(e.localStore).persistence).Tn()}function jN(n,e,t,r){return RC.apply(this,arguments)}function RC(){return RC=(0,ye.Z)(function*(n,e,t,r){const o=qe(n);if(o.Wo)Fe("SyncEngine","Ignoring unexpected query state notification.");else if(o.Fo.has(e))switch(t){case"current":case"not-current":{const u=yield nb(o.localStore),d=Cc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Pc(o,u,d);break}case"rejected":yield Ph(o.localStore,e,!0),vy(o,e,r);break;default:Xe()}}),RC.apply(this,arguments)}function $N(n,e,t){return NC.apply(this,arguments)}function NC(){return NC=(0,ye.Z)(function*(n,e,t){const r=xC(n);if(r.Wo){for(const o of e){if(r.Fo.has(o)){Fe("SyncEngine","Adding an already active target "+o);continue}const u=yield bE(r.localStore,o),d=yield Oh(r.localStore,u);yield cC(r,FS(u),d.targetId,!1),_y(r.remoteStore,d)}for(const o of t)r.Fo.has(o)&&(yield Ph(r.localStore,o,!1).then(()=>{Up(r.remoteStore,o),vy(r,o)}).catch(Tr))}}),NC.apply(this,arguments)}function xC(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MN.bind(null,e),e.Oo.br=LE.bind(null,e.eventManager),e.Oo.zo=VE.bind(null,e.eventManager),e}function OC(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NN.bind(null,e),e}class LS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.k=kp(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return XD(this.persistence,new yE,e.initialUser,this.k)}Yo(e){return new ob(Op.ks,this.k)}Jo(e){return new cb}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class VS extends LS{constructor(e,t,r){super(),this.tc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield function QT(n){return IE.apply(this,arguments)}(r.localStore),yield r.tc.initialize(r,e),yield OC(r.tc.syncEngine),yield i(r.tc.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(e){return XD(this.persistence,new yE,e.initialUser,this.k)}Xo(e){return new HT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=cy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Pi.withCacheSize(this.cacheSizeBytes):Pi.DEFAULT;return new uy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,SE(),gy(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new cb}}class GN extends VS{constructor(e,t){super(e,t,!1),this.tc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const o=r.tc.syncEngine;r.sharedClientState instanceof py&&(r.sharedClientState.syncEngine={mi:VN.bind(null,o),gi:jN.bind(null,o),yi:$N.bind(null,o),Tn:BN.bind(null,o),_i:LN.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var u=(0,ye.Z)(function*(d){yield function UN(n,e){return SC.apply(this,arguments)}(r.tc.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}Jo(e){const t=SE();if(!py.Pt(t))throw new Me(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=cy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new py(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class PC{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>OS(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=PN.bind(null,r.syncEngine),yield $e(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new FE}createDatastore(e){const t=kp(e.databaseInfo.databaseId),r=new fb(e.databaseInfo);return new yy(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>OS(this.syncEngine,m,0),d=db.Pt()?new db:new eC,new rC(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,v,I){const S=new TN(r,o,u,d,m,v);return I&&(S.Wo=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=qe(t);Fe("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield Vp(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function US(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Eb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ec(this.observer.next,e)}error(e){this.observer.error?this.ec(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}nc(){this.muted=!0}ec(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qN{constructor(e,t){this.sc=e,this.k=t,this.metadata=new br,this.buffer=new Uint8Array,this.ic=new TextDecoder("utf-8"),this.rc().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.rc()})()}rc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.oc();if(null===t)return null;const r=e.ic.decode(t),o=Number(r);isNaN(o)&&e.cc(`length string (${r}) is not valid number`);const u=yield e.ac(o);return new wN(JSON.parse(u),t.length+o)})()}uc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oc(){var e=this;return(0,ye.Z)(function*(){for(;e.uc()<0&&!(yield e.hc()););if(0===e.buffer.length)return null;const t=e.uc();t<0&&e.cc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ac(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.hc())&&t.cc("Reached the end of bundle when more is expected.");const r=t.ic.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}cc(e){throw this.sc.cancel(),new Error(`Invalid bundle format: ${e}`)}hc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.sc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class zN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ye.Z)(function*(u,d){const m=qe(u),v=bp(m.k)+"/documents",I={documents:d.map(G=>Ih(m.k,G))},S=yield m.ji("BatchGetDocuments",v,I),N=new Map;S.forEach(G=>{const J=function rE(n,e){return"found"in e?function(t,r){vt(!!r.found);const o=Js(t,r.found.name),u=si(r.found.updateTime),d=new _i({mapValue:{fields:r.found.fields}});return Mn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){vt(!!r.missing),vt(!!r.readTime);const o=Js(t,r.missing),u=si(r.readTime);return Mn.newNoDocument(o,u)}(n,e):Xe()}(m.k,G);N.set(J.key.toString(),J)});const L=[];return d.forEach(G=>{const J=N.get(G.toString());vt(!!J),L.push(J)}),L}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _p(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=rt.fromPath(o);e.mutations.push(new Qv(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(o,u){const d=qe(o),m=bp(d.k)+"/documents",v={writes:u.map(I=>Xm(d.k,I))};yield d.Bi("Commit",m,v)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=Ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?er.updateTime(t):er.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Me(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return er.updateTime(t)}return er.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class WN{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.lc=5,this.ur=new my(this.asyncQueue,"transaction_retry")}run(){this.lc-=1,this.fc()}fc(){var e=this;this.ur.Zi((0,ye.Z)(function*(){const t=new zN(e.datastore),r=e.dc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.wc(u)}))}).catch(o=>{e.wc(o)})}))}dc(e){try{const t=this.updateFunction(e);return!tl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wc(e){this.lc>0&&this._c(e)?(this.lc-=1,this.asyncQueue.enqueueAndForget(()=>(this.fc(),Promise.resolve()))):this.deferred.reject(e)}_c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Jv(t)}return!1}}class ZN{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=ri.UNAUTHENTICATED,this.clientId=kv.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ye.Z)(function*(m){Fe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Fe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Bt(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function BS(n,e){return kC.apply(this,arguments)}function kC(){return kC=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ye.Z)(function*(u){r.isEqual(u)||(yield _E(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),kC.apply(this,arguments)}function jS(n,e){return FC.apply(this,arguments)}function FC(){return FC=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield LC(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>me(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>me(e.remoteStore,u)),n.onlineComponents=e}),FC.apply(this,arguments)}function LC(n){return VC.apply(this,arguments)}function VC(){return VC=(0,ye.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield BS(n,new LS)),n.offlineComponents}),VC.apply(this,arguments)}function wb(n){return UC.apply(this,arguments)}function UC(){return UC=(0,ye.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield jS(n,new PC)),n.onlineComponents}),UC.apply(this,arguments)}function $S(n){return LC(n).then(e=>e.persistence)}function BC(n){return LC(n).then(e=>e.localStore)}function HS(n){return wb(n).then(e=>e.remoteStore)}function jC(n){return wb(n).then(e=>e.syncEngine)}function Ey(n){return $C.apply(this,arguments)}function $C(){return $C=(0,ye.Z)(function*(n){const e=yield wb(n),t=e.eventManager;return t.onListen=CN.bind(null,e.syncEngine),t.onUnlisten=AN.bind(null,e.syncEngine),t}),$C.apply(this,arguments)}function GS(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,v){const I=new Eb({next:N=>{u.enqueueAndForget(()=>$p(o,S));const L=N.docs.has(d);!L&&N.fromCache?v.reject(new Me(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&N.fromCache&&m&&"server"===m.source?v.reject(new Me(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(N)},error:N=>v.reject(N)}),S=new uC(fp(d.path),I,{includeMetadataChanges:!0,wo:!0});return Bp(o,S)}(yield Ey(n),n.asyncQueue,e,t,r)})),r.promise}function qS(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,v){const I=new Eb({next:N=>{u.enqueueAndForget(()=>$p(o,S)),N.fromCache&&"server"===m.source?v.reject(new Me(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(N)},error:N=>v.reject(N)}),S=new uC(d,I,{includeMetadataChanges:!0,wo:!0});return Bp(o,S)}(yield Ey(n),n.asyncQueue,e,t,r)})),r.promise}class rx{constructor(e,t,r,o,u,d,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=v}}class wy{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wy&&e.projectId===this.projectId&&e.database===this.database}}const zS=new Map;function HC(n,e,t){if(!t)throw new Me(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function WS(n,e,t,r){if(!0===e&&!0===r)throw new Me(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ZS(n){if(!rt.isDocumentKey(n))throw new Me(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function KS(n){if(rt.isDocumentKey(n))throw new Me(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Db(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function Gt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Db(n);throw new Me(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function YS(n,e){if(e<=0)throw new Me(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class QS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,WS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class UE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QS({}),this._settingsFrozen=!1,e instanceof wy?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Me(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wy(o.options.projectId)}(e))}get app(){if(!this._app)throw new Me(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new cT;switch(t.type){case"gapi":const r=t.client;return vt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new hT(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zS.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),zS.delete(e),t.terminate())}(this),Promise.resolve()}}class kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}}class ns{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class fl extends ns{constructor(e,t,r){super(e,t,fp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new rt(e))}withConverter(e){return new fl(this.firestore,e,this._path)}}function JS(n,e,...t){if(n=(0,Vt.m9)(n),HC("collection","path",e),n instanceof UE){const r=Qt.fromString(e,...t);return KS(r),new fl(n,null,r)}{if(!(n instanceof kn||n instanceof fl))throw new Me(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return KS(r),new fl(n.firestore,null,r)}}function bb(n,e,...t){if(n=(0,Vt.m9)(n),1===arguments.length&&(e=kv.A()),HC("doc","path",e),n instanceof UE){const r=Qt.fromString(e,...t);return ZS(r),new kn(n,null,new rt(r))}{if(!(n instanceof kn||n instanceof fl))throw new Me(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return ZS(r),new kn(n.firestore,n instanceof fl?n.converter:null,new rt(r))}}function XS(n,e){return n=(0,Vt.m9)(n),e=(0,Vt.m9)(e),(n instanceof kn||n instanceof fl)&&(e instanceof kn||e instanceof fl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function eM(n,e){return n=(0,Vt.m9)(n),e=(0,Vt.m9)(e),n instanceof ns&&e instanceof ns&&n.firestore===e.firestore&&pp(n._query,e._query)&&n.converter===e.converter}class ox{constructor(){this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new my(this,"async_queue_retry"),this.bc=()=>{const t=gy();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=gy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}get isShuttingDown(){return this.yc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pc(),this.vc(e)}enterRestrictedMode(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;const t=gy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}}enqueue(e){if(this.Pc(),this.yc)return new Promise(()=>{});const t=new br;return this.vc(()=>this.yc&&this.Ac?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.gc.push(e),this.Vc()))}Vc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.gc.length){try{yield e.gc[0](),e.gc.shift(),e.ur.reset()}catch(t){if(!Ac(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.gc.length>0&&e.ur.Zi(()=>e.Vc())}})()}vc(e){const t=this.mc.then(()=>(this.Ic=!0,e().catch(r=>{throw this.Ec=r,this.Ic=!1,ur("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Ic=!1,r))));return this.mc=t,t}enqueueAfterDelay(e,t,r){this.Pc(),this.Rc.indexOf(e)>-1&&(t=0);const o=Pt.createAndSchedule(this,e,t,r,u=>this.Sc(u));return this.Tc.push(o),o}Pc(){this.Ec&&Xe()}verifyOperationInProgress(){}Dc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.mc,yield t}while(t!==e.mc)})()}Cc(e){for(const t of this.Tc)if(t.timerId===e)return!0;return!1}Nc(e){return this.Dc().then(()=>{this.Tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Dc()})}kc(e){this.Rc.push(e)}Sc(e){const t=this.Tc.indexOf(e);this.Tc.splice(t,1)}}function GC(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class ax{constructor(){this._progressObserver={},this._taskCompletionResolver=new br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Gn extends UE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new ox,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||tM(this),this._firestoreClient.terminate()}}function Br(n){return n._firestoreClient||tM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function tM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new rx(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new ZN(n._authCredentials,n._appCheckCredentials,n._queue,r)}function nM(n,e,t){const r=new br;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield BS(n,t),yield jS(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ue.FAILED_PRECONDITION||u.code===ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function rM(n){if(n._initialized||n._terminated)throw new Me(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class kc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pl(Ir.fromBase64String(e))}catch(t){throw new Me(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pl(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gp{constructor(e){this._methodName=e}}class Ib{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const yx=/^__.*__$/;class _x{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new sl(e,this.data,this.fieldMask,t,this.fieldTransforms):new yp(e,this.data,t,this.fieldTransforms)}}class iM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new sl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class Tb{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.k=r,this.ignoreUndefinedProperties=o,void 0===u&&this.xc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get $c(){return this.settings.$c}Oc(e){return new Tb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Oc({path:r,Fc:!1});return o.Lc(e),o}Bc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Oc({path:r,Fc:!1});return o.xc(),o}Uc(e){return this.Oc({path:void 0,Fc:!0})}qc(e){return Sb(e,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lc(this.path.get(e))}Lc(e){if(0===e.length)throw this.qc("Document fields must not be empty");if(sM(this.$c)&&yx.test(e))throw this.qc('Document fields cannot begin and end with "__"')}}class vx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=r||kp(e)}Qc(e,t,r,o=!1){return new Tb({$c:e,methodName:t,jc:r,path:Jn.emptyPath(),Fc:!1,Kc:o},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function qp(n){const e=n._freezeSettings(),t=kp(n._databaseId);return new vx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Cb(n,e,t,r,o,u={}){const d=n.Qc(u.merge||u.mergeFields?2:0,e,t,o);ZC("Data must be an object, but it was:",d,r);const m=uM(r,d);let v,I;if(u.merge)v=new dh(d.fieldMask),I=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const N of u.mergeFields){const L=KC(e,N,t);if(!d.contains(L))throw new Me(ue.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);cM(S,L)||S.push(L)}v=new dh(S),I=d.fieldTransforms.filter(N=>v.covers(N.field))}else v=null,I=d.fieldTransforms;return new _x(new _i(m),v,I)}class BE extends Gp{_toFieldTransform(e){if(2!==e.$c)throw e.qc(1===e.$c?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof BE}}function oM(n,e,t){return new Tb({$c:3,jc:e.settings.jc,methodName:n._methodName,Fc:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class qC extends Gp{_toFieldTransform(e){return new Eh(e.path,new _h)}isEqual(e){return e instanceof qC}}class Ex extends Gp{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=oM(this,e,!0),r=this.Wc.map(u=>zp(u,t)),o=new bc(r);return new Eh(e.path,o)}isEqual(e){return this===e}}class wx extends Gp{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=oM(this,e,!0),r=this.Wc.map(u=>zp(u,t)),o=new Ic(r);return new Eh(e.path,o)}isEqual(e){return this===e}}class Dx extends Gp{constructor(e,t){super(e),this.Gc=t}_toFieldTransform(e){const t=new vh(e.k,yh(e.k,this.Gc));return new Eh(e.path,t)}isEqual(e){return this===e}}function zC(n,e,t,r){const o=n.Qc(1,e,t);ZC("Data must be an object, but it was:",o,r);const u=[],d=_i.empty();Xu(r,(v,I)=>{const S=Ab(e,v,t);I=(0,Vt.m9)(I);const N=o.Bc(S);if(I instanceof BE)u.push(S);else{const L=zp(I,N);null!=L&&(u.push(S),d.set(S,L))}});const m=new dh(u);return new iM(d,m,o.fieldTransforms)}function WC(n,e,t,r,o,u){const d=n.Qc(1,e,t),m=[KC(e,r,t)],v=[o];if(u.length%2!=0)throw new Me(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)m.push(KC(e,u[L])),v.push(u[L+1]);const I=[],S=_i.empty();for(let L=m.length-1;L>=0;--L)if(!cM(I,m[L])){const G=m[L];let J=v[L];J=(0,Vt.m9)(J);const _e=d.Bc(G);if(J instanceof BE)I.push(G);else{const ke=zp(J,_e);null!=ke&&(I.push(G),S.set(G,ke))}}const N=new dh(I);return new iM(S,N,d.fieldTransforms)}function aM(n,e,t,r=!1){return zp(t,n.Qc(r?4:3,e))}function zp(n,e){if(lM(n=(0,Vt.m9)(n)))return ZC("Unsupported field value:",e,n),uM(n,e);if(n instanceof Gp)return function(t,r){if(!sM(r.$c))throw r.qc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.qc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fc&&4!==e.$c)throw e.qc("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=zp(d,r.Uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Vt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return yh(r.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=ii.fromDate(t);return{timestampValue:bh(r.k,o)}}if(t instanceof ii){const o=new ii(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:bh(r.k,o)}}if(t instanceof Ib)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pl)return{bytesValue:CD(r.k,t._byteString)};if(t instanceof kn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.qc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wp(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.qc(`Unsupported field value: ${Db(t)}`)}(n,e)}function uM(n,e){const t={};return sp(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xu(n,(r,o)=>{const u=zp(o,e.Mc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function lM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ii||n instanceof Ib||n instanceof pl||n instanceof kn||n instanceof Gp)}function ZC(n,e,t){if(!lM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Db(t);throw e.qc("an object"===r?n+" a custom object":n+" "+r)}var r}function KC(n,e,t){if((e=(0,Vt.m9)(e))instanceof kc)return e._internalPath;if("string"==typeof e)return Ab(n,e);throw Sb("Field path arguments must be of type string or ",n,!1,void 0,t)}const bx=new RegExp("[~\\*/\\[\\]]");function Ab(n,e,t){if(e.search(bx)>=0)throw Sb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kc(...e.split("."))._internalPath}catch(r){throw Sb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sb(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let v="";return(u||d)&&(v+=" (found",u&&(v+=` in field ${r}`),d&&(v+=` in document ${o}`),v+=")"),new Me(ue.INVALID_ARGUMENT,m+n+v)}function cM(n,e){return n.some(t=>t.isEqual(e))}class jE{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ix(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Mb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ix extends jE{data(){return super.data()}}function Mb(n,e){return"string"==typeof e?Ab(n,e):e instanceof kc?e._internalPath:e._delegate._internalPath}class Wp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fc extends jE{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $E(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Mb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class $E extends Fc{data(e={}){return super.data(e)}}class kh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Wp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $E(this._firestore,this._userDataWriter,r.key,r,new Wp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new $E(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Wp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new $E(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Wp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,I=-1;return 0!==d.type&&(v=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),I=u.indexOf(d.doc.key)),{type:Tx(d.type),doc:m,oldIndex:v,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Tx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function dM(n,e){return n instanceof Fc&&e instanceof Fc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof kh&&e instanceof kh&&n._firestore===e._firestore&&eM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function hM(n){if(rl(n)&&0===n.explicitOrderBy.length)throw new Me(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class HE{}function Fh(n,...e){for(const t of e)n=t._apply(n);return n}class Cx extends HE{constructor(e,t,r){super(),this.zc=e,this.Hc=t,this.Jc=r,this.type="where"}_apply(e){const t=qp(e.firestore),r=function(o,u,d,m,v,I,S){let N;if(v.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new Me(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){_M(S,I);const G=[];for(const J of S)G.push(yM(m,o,J));N={arrayValue:{values:G}}}else N=yM(m,o,S)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||_M(S,I),N=aM(d,"where",S,"in"===I||"not-in"===I);const L=Ri.create(v,I,N);return function(G,J){if(J.V()){const ke=il(G);if(null!==ke&&!ke.isEqual(J.field))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ke.toString()}' and '${J.field.toString()}'`);const ct=zv(G);null!==ct&&vM(0,J.field,ct)}const _e=function(ke,ct){for(const _t of ke.filters)if(ct.indexOf(_t.op)>=0)return _t.op;return null}(G,function(ke){switch(ke){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(J.op));if(null!==_e)throw new Me(ue.INVALID_ARGUMENT,_e===J.op?`Invalid query. You cannot use more than one '${J.op.toString()}' filter.`:`Invalid query. You cannot use '${J.op.toString()}' filters with '${_e.toString()}' filters.`)}(o,L),L}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new ns(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new eu(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class Sx extends HE{constructor(e,t){super(),this.zc=e,this.Yc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new gh(o,u);return function(m,v){if(null===zv(m)){const I=il(m);null!==I&&vM(0,I,v.field)}}(r,d),d}(e._query,this.zc,this.Yc);return new ns(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new eu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class fM extends HE{constructor(e,t,r){super(),this.type=e,this.Xc=t,this.Zc=r}_apply(e){return new ns(e.firestore,e.converter,Wv(e._query,this.Xc,this.Zc))}}class pM extends HE{constructor(e,t,r){super(),this.type=e,this.ta=t,this.ea=r}_apply(e){const t=mM(e,this.type,this.ta,this.ea);return new ns(e.firestore,e.converter,(o=t,new eu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class gM extends HE{constructor(e,t,r){super(),this.type=e,this.ta=t,this.ea=r}_apply(e){const t=mM(e,this.type,this.ta,this.ea);return new ns(e.firestore,e.converter,(o=t,new eu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function mM(n,e,t,r){if(t[0]=(0,Vt.m9)(t[0]),t[0]instanceof jE)return function(o,u,d,m,v){if(!m)throw new Me(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const I=[];for(const S of mh(o))if(S.field.isKeyField())I.push(Um(u,m.key));else{const N=m.data.field(S.field);if(Fv(N))throw new Me(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const L=S.field.canonicalString();throw new Me(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}I.push(N)}return new hp(I,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=qp(n.firestore);return function(u,d,m,v,I,S){const N=u.explicitOrderBy;if(I.length>N.length)throw new Me(ue.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let G=0;G<I.length;G++){const J=I[G];if(N[G].field.isKeyField()){if("string"!=typeof J)throw new Me(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof J}`);if(!Dc(u)&&-1!==J.indexOf("/"))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${J}' contains a slash.`);const _e=u.path.child(Qt.fromString(J));if(!rt.isDocumentKey(_e))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${_e}' is not because it contains an odd number of segments.`);const ke=new rt(_e);L.push(Um(d,ke))}else{const _e=aM(m,v,J);L.push(_e)}}return new hp(L,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function yM(n,e,t){if("string"==typeof(t=(0,Vt.m9)(t))){if(""===t)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dc(e)&&-1!==t.indexOf("/"))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!rt.isDocumentKey(r))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Um(n,new rt(r))}if(t instanceof kn)return Um(n,t._key);throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Db(t)}.`)}function _M(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function vM(n,e,t){if(!t.isEqual(e))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class YC{convertValue(e,t="none"){switch(nl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const r={};return Xu(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Ib(Xn(e.latitude),Xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ec(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ap(e));default:return null}}convertTimestamp(e){const t=el(e);return new ii(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);vt(PD(r));const o=new wy(r.get(1),r.get(3)),u=new rt(r.popFirst(5));return o.isEqual(t)||ur(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Rb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Fx extends YC{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}class EM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qp(e)}set(e,t,r){this._verifyNotCommitted();const o=Lh(e,this._firestore),u=Rb(o.converter,t,r),d=Cb(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,er.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Lh(e,this._firestore);let d;return d="string"==typeof(t=(0,Vt.m9)(t))||t instanceof kc?WC(this._dataReader,"WriteBatch.update",u._key,t,r,o):zC(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,er.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lh(e,this._firestore);return this._mutations=this._mutations.concat(new _p(t._key,er.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lh(n,e){if((n=(0,Vt.m9)(n)).firestore!==e)throw new Me(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Zp extends YC{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}function wM(n,e,t){n=Gt(n,kn);const r=Gt(n.firestore,Gn),o=Rb(n.converter,e,t);return Dy(r,[Cb(qp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,er.none())])}function DM(n,e,t,...r){n=Gt(n,kn);const o=Gt(n.firestore,Gn),u=qp(o);let d;return d="string"==typeof(e=(0,Vt.m9)(e))||e instanceof kc?WC(u,"updateDoc",n._key,e,t,r):zC(u,"updateDoc",n._key,e),Dy(o,[d.toMutation(n._key,er.exists(!0))])}function bM(n,...e){var t,r,o;n=(0,Vt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||GC(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(GC(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let v,I,S;if(n instanceof kn)I=Gt(n.firestore,Gn),S=fp(n._key.path),v={next:N=>{e[d]&&e[d](QC(I,n,N))},error:e[d+1],complete:e[d+2]};else{const N=Gt(n,ns);I=Gt(N.firestore,Gn),S=N._query;const L=new Zp(I);v={next:G=>{e[d]&&e[d](new kh(I,L,N,G))},error:e[d+1],complete:e[d+2]},hM(n._query)}return function(N,L,G,J){const _e=new Eb(J),ke=new uC(L,_e,G);return N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return Bp(yield Ey(N),ke)})),()=>{_e.nc(),N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return $p(yield Ey(N),ke)}))}}(Br(I),S,m,v)}function Dy(n,e){return function(t,r){const o=new br;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function SN(n,e,t){return fC.apply(this,arguments)}(yield jC(t),r,o)})),o.promise}(Br(n),e)}function QC(n,e,t){const r=t.docs.get(e._key),o=new Zp(n);return new Fc(n,o,e._key,r,new Wp(t.hasPendingWrites,t.fromCache),e.converter)}class zx extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qp(e)}get(e){const t=Lh(e,this._firestore),r=new Fx(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Xe();const u=o[0];if(u.isFoundDocument())return new jE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new jE(this._firestore,r,t._key,null,t.converter);throw Xe()})}set(e,t,r){const o=Lh(e,this._firestore),u=Rb(o.converter,t,r),d=Cb(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Lh(e,this._firestore);let d;return d="string"==typeof(t=(0,Vt.m9)(t))||t instanceof kc?WC(this._dataReader,"Transaction.update",u._key,t,r,o):zC(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Lh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Lh(e,this._firestore),r=new Zp(this._firestore);return super.get(e).then(o=>new Fc(this._firestore,r,t._key,o._document,new Wp(!1,!1),t.converter))}}function XC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function TM(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function CM(){if(!function yT(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){lh=cc.SDK_VERSION,(0,cc._registerComponent)(new tm.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Gn(o,new ip(t.getProvider("auth-internal")),new Yw(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,cc.registerVersion)(xv,"3.4.4",n),(0,cc.registerVersion)(xv,"3.4.4","esm2017")}();class GE{constructor(e){this._delegate=e}static fromBase64String(e){return CM(),new GE(pl.fromBase64String(e))}static fromUint8Array(e){return TM(),new GE(pl.fromUint8Array(e))}toBase64(){return CM(),this._delegate.toBase64()}toUint8Array(){return TM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eA(n){return function tO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class nO{enableIndexedDbPersistence(e,t){return function lx(n,e){rM(n=Gt(n,Gn));const t=Br(n),r=n._freezeSettings(),o=new PC;return nM(t,o,new VS(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function cx(n){rM(n=Gt(n,Gn));const e=Br(n),t=n._freezeSettings(),r=new PC;return nM(e,r,new GN(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function dx(n){if(n._initialized&&!n._terminated)throw new Me(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Ro.Pt())return Promise.resolve();const o=r+"main";yield Ro.delete(o)}),function(r){return t.apply(this,arguments)})(cy(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class AM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof wy||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&np("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function ix(n,e,t,r={}){var o;const u=(n=Gt(n,UE))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&np("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=ri.MOCK_USER;else{d=(0,Vt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Me(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ri(v)}n._authCredentials=new rp(new Pv(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function fx(n){return function KN(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield $S(n),t=yield HS(n);return e.setNetworkEnabled(!0),function(r){const o=qe(r);return o.Gr.delete(0),Lp(o)}(t)}))}(Br(n=Gt(n,Gn)))}(this._delegate)}disableNetwork(){return function px(n){return function YN(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield $S(n),t=yield HS(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(o){const u=qe(o);u.Gr.add(0),yield Vp(u),u.Jr.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Br(n=Gt(n,Gn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,WS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function hx(n){return function(e){const t=new br;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function xN(n,e){return _C.apply(this,arguments)}(yield jC(e),t)})),t.promise}(Br(n=Gt(n,Gn)))}(this._delegate)}onSnapshotsInSync(e){return function qx(n,e){return function XN(n,e){const t=new Eb(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Ey(n),o=t,qe(r).io.add(o),void o.next();var r,o})),()=>{t.nc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Ey(n),o=t,void qe(r).io.delete(o);var r,o}))}}(Br(n=Gt(n,Gn)),GC(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new by(this,JS(this._delegate,e))}catch(t){throw bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new fa(this,bb(this._delegate,e))}catch(t){throw bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Is(this,function sx(n,e){if(n=Gt(n,UE),HC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ns(n,null,(t=e,new eu(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Wx(n,e){return function ex(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const r=yield(o=n,wb(o).then(u=>u.datastore));var o;new WN(n.asyncQueue,r,e,t).run()})),t.promise}(Br(n=Gt(n,Gn)),t=>e(new zx(n,t)))}(this._delegate,t=>e(new SM(this,t)))}batch(){return Br(this._delegate),new MM(new EM(this._delegate,e=>Dy(this._delegate,e)))}loadBundle(e){return function gx(n,e){const t=Br(n=Gt(n,Gn)),r=new ax;return function tx(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,I){if(v instanceof Uint8Array)return US(v,I);if(v instanceof ArrayBuffer)return US(new Uint8Array(v),I);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new qN(v,d);var v}(t,kp(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function HN(n,e,t){const r=qe(n);var o;(o=(0,ye.Z)(function*(u,d,m){try{const v=yield d.getMetadata();if(yield function(L,G){const J=qe(L),_e=si(G.createTime);return J.persistence.runTransaction("hasNewerBundle","readonly",ke=>J.Ye.getBundleMetadata(ke,G.id)).then(ke=>!!ke&&ke.createTime.compareTo(_e)>=0)}(u.localStore,v))return yield d.close(),void m._completeWith((L=v,{taskState:"Success",documentsLoaded:L.totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}));m._updateProgress(SS(v));const I=new DN(v,u.localStore,d.k);let S=yield d.Ho();for(;S;){const L=yield I.yo(S);L&&m._updateProgress(L),S=yield d.Ho()}const N=yield I.complete();yield Pc(u,N.In,void 0),yield function(L,G){const J=qe(L);return J.persistence.runTransaction("Save bundle","readwrite",_e=>J.Ye.saveBundleMetadata(_e,G))}(u.localStore,v),m._completeWith(N.progress)}catch(v){np("SyncEngine",`Loading bundle failed with ${v}`),m._failWith(v)}var L}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield jC(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function mx(n,e){return function nx(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const o=qe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ye.getNamedQuery(u,r))}(yield BC(n),e)}))}(Br(n=Gt(n,Gn)),e).then(t=>t?new ns(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Is(this,t):null)}}class Nb extends YC{constructor(e){super(),this.firestore=e}convertBytes(e){return new GE(new pl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fa.forKey(t,this.firestore,null)}}class SM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Nb(e)}get(e){const t=Yp(e);return this._delegate.get(t).then(r=>new qE(this._firestore,new Fc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Yp(e);return r?(XC("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Yp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Yp(e);return this._delegate.delete(t),this}}class MM{constructor(e){this._delegate=e}set(e,t,r){const o=Yp(e);return r?(XC("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Yp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Yp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Kp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new $E(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Kp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Kp(e,new Nb(e),t),o.set(t,u)),u}}Kp.INSTANCES=new WeakMap;class fa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Nb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fa(t,new kn(t._delegate,r,new rt(e)))}static forKey(e,t,r){return new fa(t,new kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new by(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new by(this.firestore,JS(this._delegate,e))}catch(t){throw bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Vt.m9)(e))instanceof kn&&XS(this._delegate,e)}set(e,t){t=XC("DocumentReference.set",t);try{return t?wM(this._delegate,e,t):wM(this._delegate,e)}catch(r){throw bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?DM(this._delegate,e):DM(this._delegate,e,t,...r)}catch(o){throw bs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function Hx(n){return Dy(Gt(n.firestore,Gn),[new _p(n._key,er.none())])}(this._delegate)}onSnapshot(...e){const t=RM(e),r=NM(e,o=>new qE(this.firestore,new Fc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return bM(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Vx(n){n=Gt(n,kn);const e=Gt(n.firestore,Gn),t=Br(e),r=new Zp(e);return function QN(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield function(v,I){const S=qe(v);return S.persistence.runTransaction("read document","readonly",N=>S.Wn.Rn(N,I))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Me(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const v=Bt(m,`Failed to get document '${u} from cache`);d.reject(v)}}),function(o,u,d){return r.apply(this,arguments)})(yield BC(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Fc(e,r,n._key,o,new Wp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Ux(n){n=Gt(n,kn);const e=Gt(n.firestore,Gn);return GS(Br(e),n._key,{source:"server"}).then(t=>QC(e,n,t))}(this._delegate):function Lx(n){n=Gt(n,kn);const e=Gt(n.firestore,Gn);return GS(Br(e),n._key).then(t=>QC(e,n,t))}(this._delegate),t.then(r=>new qE(this.firestore,new Fc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new fa(this.firestore,this._delegate.withConverter(e?Kp.getInstance(this.firestore,e):null))}}function bs(n,e,t){return n.message=n.message.replace(e,t),n}function RM(n){for(const e of n)if("object"==typeof e&&!eA(e))return e;return{}}function NM(n,e){var t,r;let o;return o=eA(n[0])?n[0]:eA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class qE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return dM(this._delegate,e._delegate)}}class zE extends qE{data(e){const t=this._delegate.data(e);return function lT(n,e){n||Xe()}(void 0!==t),t}}class Is{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Nb(e)}where(e,t,r){try{return new Is(this.firestore,Fh(this._delegate,function Ax(n,e,t){const r=e,o=Mb("where",n);return new Cx(o,r,t)}(e,t,r)))}catch(o){throw bs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Is(this.firestore,Fh(this._delegate,function Mx(n,e="asc"){const t=e,r=Mb("orderBy",n);return new Sx(r,t)}(e,t)))}catch(r){throw bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Is(this.firestore,Fh(this._delegate,function Rx(n){return YS("limit",n),new fM("limit",n,"F")}(e)))}catch(t){throw bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Is(this.firestore,Fh(this._delegate,function Nx(n){return YS("limitToLast",n),new fM("limitToLast",n,"L")}(e)))}catch(t){throw bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Is(this.firestore,Fh(this._delegate,function xx(...n){return new pM("startAt",n,!0)}(...e)))}catch(t){throw bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Is(this.firestore,Fh(this._delegate,function Ox(...n){return new pM("startAfter",n,!1)}(...e)))}catch(t){throw bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Is(this.firestore,Fh(this._delegate,function Px(...n){return new gM("endBefore",n,!0)}(...e)))}catch(t){throw bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Is(this.firestore,Fh(this._delegate,function kx(...n){return new gM("endAt",n,!1)}(...e)))}catch(t){throw bs(t,"endAt()","Query.endAt()")}}isEqual(e){return eM(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function jx(n){n=Gt(n,ns);const e=Gt(n.firestore,Gn),t=Br(e),r=new Zp(e);return function JN(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield DE(o,u,!0),v=new NS(u,m.zn),I=v.Po(m.documents),S=v.applyChanges(I,!1);d.resolve(S.snapshot)}catch(m){const v=Bt(m,`Failed to execute query '${u} against cache`);d.reject(v)}}),function(o,u,d){return r.apply(this,arguments)})(yield BC(n),e,t);var r})),t.promise}(t,n._query).then(o=>new kh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function $x(n){n=Gt(n,ns);const e=Gt(n.firestore,Gn),t=Br(e),r=new Zp(e);return qS(t,n._query,{source:"server"}).then(o=>new kh(e,r,n,o))}(this._delegate):function Bx(n){n=Gt(n,ns);const e=Gt(n.firestore,Gn),t=Br(e),r=new Zp(e);return hM(n._query),qS(t,n._query).then(o=>new kh(e,r,n,o))}(this._delegate),t.then(r=>new tA(this.firestore,new kh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=RM(e),r=NM(e,o=>new tA(this.firestore,new kh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return bM(this._delegate,t,r)}withConverter(e){return new Is(this.firestore,this._delegate.withConverter(e?Kp.getInstance(this.firestore,e):null))}}class iO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new zE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Is(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new zE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new iO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new zE(this._firestore,r))})}isEqual(e){return dM(this._delegate,e._delegate)}}class by extends Is{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fa(this.firestore,e):null}doc(e){try{return new fa(this.firestore,void 0===e?bb(this._delegate):bb(this._delegate,e))}catch(t){throw bs(t,"doc()","CollectionReference.doc()")}}add(e){return function Gx(n,e){const t=Gt(n.firestore,Gn),r=bb(n),o=Rb(n.converter,e);return Dy(t,[Cb(qp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,er.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new fa(this.firestore,t))}isEqual(e){return XS(this._delegate,e._delegate)}withConverter(e){return new by(this.firestore,this._delegate.withConverter(e?Kp.getInstance(this.firestore,e):null))}}function Yp(n){return Gt(n,kn)}class nA{constructor(...e){this._delegate=new kc(...e)}static documentId(){return new nA(Jn.keyField().canonicalString())}isEqual(e){return(e=(0,Vt.m9)(e))instanceof kc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Qp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Kx(){return new qC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Qp(e)}static delete(){const e=function Zx(){return new BE("deleteField")}();return e._methodName="FieldValue.delete",new Qp(e)}static arrayUnion(...e){const t=function Yx(...n){return new Ex("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Qp(t)}static arrayRemove(...e){const t=function Qx(...n){return new wx("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Qp(t)}static increment(e){const t=function Jx(n){return new Dx("increment",n)}(e);return t._methodName="FieldValue.increment",new Qp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const sO={Firestore:AM,GeoPoint:Ib,Timestamp:ii,Blob:GE,Transaction:SM,WriteBatch:MM,DocumentReference:fa,DocumentSnapshot:qE,Query:Is,QueryDocumentSnapshot:zE,QuerySnapshot:tA,CollectionReference:by,FieldPath:nA,FieldValue:Qp,setLogLevel:function rO(n){!function Zw(n){Xa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function aO(n){(function oO(n,e){n.INTERNAL.registerComponent(new tm.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},sO)))})(n,(e,t)=>new AM(e,t,new nO)),n.registerVersion("@firebase/firestore-compat","0.1.13")}(UI.Z);var uO=P(6451),xb=P(5363),lO=P(6063);class cO extends ln.x{constructor(e=1/0,t=1/0,r=lO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let v=1;v<r.length&&r[v]<=d;v+=2)m=v;m&&r.splice(0,m+1)}}}var dO=P(3099);function xM(n,e,t){var r,o;let u,d=!1;return n&&"object"==typeof n?(u=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(o=n.windowTime)&&void 0!==o?o:1/0,d=!!n.refCount,t=n.scheduler):u=null!=n?n:1/0,(0,dO.B)({connector:()=>new cO(u,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}function OM(n,e){return(0,xl.m)(e)?hn(()=>n,e):hn(()=>n)}var rA=P(9468);P(5867);const kM=new Map,mO={activated:!1,tokenObservers:[]},yO={initialized:!1,enabled:!1};function Ei(n){return kM.get(n)||mO}function iu(n,e){kM.set(n,e)}function Pb(){return yO}class DO{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Vt.BH,yield function bO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Vt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ts=new Vt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function LM(n){if(!Ei(n).activated)throw Ts.create("use-before-activation",{appName:n.name})}function aA(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(N){throw Ts.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw Ts.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(N){throw Ts.create("fetch-parse-error",{originalErrorMessage:N.message})}const v=m.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw Ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const I=1e3*Number(v[1]),S=Date.now();return{token:m.attestationToken,expireTimeMillis:S+I,issuedAtTimeMillis:S}}),uA.apply(this,arguments)}function SO(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const WE="firebase-app-check-store";let Lb=null;function UM(){return Lb||(Lb=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Ts.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(WE,{keyPath:"compositeKey"})}}catch(t){e(Ts.create("storage-open",{originalErrorMessage:t.message}))}}),Lb)}function lA(){return lA=(0,ye.Z)(function*(n,e){const r=(yield UM()).transaction(WE,"readwrite"),u=r.objectStore(WE).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=v=>{d()},r.onerror=v=>{var I;m(Ts.create("storage-set",{originalErrorMessage:null===(I=v.target.error)||void 0===I?void 0:I.message}))}})}),lA.apply(this,arguments)}const ZE=new Wa.Yd("@firebase/app-check");function HM(n,e){return(0,Vt.hl)()?function xO(n,e){return function BM(n,e){return lA.apply(this,arguments)}(function $M(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ZE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function GM(){return Pb().enabled}function qM(){return fA.apply(this,arguments)}function fA(){return fA=(0,ye.Z)(function*(){const n=Pb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),fA.apply(this,arguments)}const VO={error:"UNKNOWN_ERROR"};function UO(n){return Vt.US.encodeString(JSON.stringify(n),!1)}function Vb(n){return pA.apply(this,arguments)}function pA(){return pA=(0,ye.Z)(function*(n,e=!1){const t=n.app;LM(t);const r=Ei(t);let u,o=r.token;if(!o){const v=yield r.cachedTokenPromise;v&&Ub(v)&&(o=v)}if(!e&&o&&Ub(o))return{token:o.token};let m,d=!1;if(GM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=aA(SO(t,yield qM()),n.platformLoggerProvider).then(I=>(r.exchangeTokenPromise=void 0,I)),d=!0);const v=yield r.exchangeTokenPromise;return yield HM(t,v),iu(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),d=!0),o=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?ZE.warn(v.message):ZE.error(v),u=v}return o?(m={token:o.token},iu(t,Object.assign(Object.assign({},r),{token:o})),yield HM(t,o)):m=jO(u),d&&WM(t,m),m}),pA.apply(this,arguments)}function mA(n,e){const t=Ei(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),iu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function zM(n){const{app:e}=n,t=Ei(e);let r=t.tokenRefresher;r||(r=function BO(n){const{app:e}=n;return new DO((0,ye.Z)(function*(){let r;if(r=Ei(e).token?yield Vb(n,!0):yield Vb(n),r.error)throw r.error}),()=>!0,()=>{const t=Ei(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),iu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function WM(n,e){const t=Ei(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Ub(n){return n.expireTimeMillis-Date.now()>0}function jO(n){return{token:UO(VO),error:n}}class $O{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Ei(this.app);for(const t of e)mA(this.app,t.next);return Promise.resolve()}}const tR="app-check-internal";!function nP(){(0,cc._registerComponent)(new tm.wA("app-check",n=>function HO(n,e){return new $O(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(tR).initialize()})),(0,cc._registerComponent)(new tm.wA(tR,n=>function GO(n){return{getToken:e=>Vb(n,e),addTokenListener:e=>function gA(n,e,t,r){const{app:o}=n,u=Ei(o),d={next:t,error:r,type:e};if(iu(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&Ub(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),zM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>zM(n))}(n,"INTERNAL",e),removeTokenListener:e=>mA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,cc.registerVersion)("@firebase/app-check","0.5.3")}();class EA{constructor(){return(0,un.vb)("app-check")}}"undefined"!=typeof window&&window;var aP=P(127);const rR=new f.OlP("angularfire2.auth.use-emulator"),iR=new f.OlP("angularfire2.auth.settings"),sR=new f.OlP("angularfire2.auth.tenant-id"),oR=new f.OlP("angularfire2.auth.langugage-code"),aR=new f.OlP("angularfire2.auth.use-device-language"),uR=new f.OlP("angularfire.auth.persistence"),lR=(n,e,t,r,o,u,d,m)=>(0,zs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,u&&v.useDeviceLanguage(),d)for(const[I,S]of Object.entries(d))v.settings[I]=S;return m&&v.setPersistence(m),v},[t,r,o,u,d,m]);let cR=(()=>{class n{constructor(t,r,o,u,d,m,v,I,S,N,L,G){const J=new ln.x,_e=Qe(void 0).pipe((0,xb.Q)(d.outsideAngular),hn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,389)))),(0,Tt.U)(()=>(0,zs.on)(t,u,r)),(0,Tt.U)(ke=>lR(ke,u,m,I,S,N,v,L)),xM({bufferSize:1,refCount:!1}));if(mr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Qe(null);else{_e.pipe(Ba()).subscribe();const ct=_e.pipe(hn(dt=>dt.getRedirectResult().then(nn=>nn,()=>null)),un.iC,xM({bufferSize:1,refCount:!1})),_t=_e.pipe(hn(dt=>new yr.y(nn=>({unsubscribe:u.runOutsideAngular(()=>dt.onAuthStateChanged(dr=>nn.next(dr),dr=>nn.error(dr),()=>nn.complete()))})))),Ot=_e.pipe(hn(dt=>new yr.y(nn=>({unsubscribe:u.runOutsideAngular(()=>dt.onIdTokenChanged(dr=>nn.next(dr),dr=>nn.error(dr),()=>nn.complete()))}))));this.authState=ct.pipe(OM(_t),(0,rA.R)(d.outsideAngular),(0,xb.Q)(d.insideAngular)),this.user=ct.pipe(OM(Ot),(0,rA.R)(d.outsideAngular),(0,xb.Q)(d.insideAngular)),this.idToken=this.user.pipe(hn(dt=>dt?(0,Cn.D)(dt.getIdToken()):Qe(null))),this.idTokenResult=this.user.pipe(hn(dt=>dt?(0,Cn.D)(dt.getIdTokenResult()):Qe(null))),this.credential=(0,uO.T)(ct,J,this.authState.pipe(sr(dt=>!dt))).pipe((0,Tt.U)(dt=>(null==dt?void 0:dt.user)?dt:null),(0,rA.R)(d.outsideAngular),(0,xb.Q)(d.insideAngular))}return(0,zs.pX)(this,_e,u,{spy:{apply:(ke,ct,_t)=>{(ke.startsWith("signIn")||ke.startsWith("createUser"))&&_t.then(Ot=>J.next(Ot))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(zs.Dh),f.LFG(zs.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(un.HU),f.LFG(rR,8),f.LFG(iR,8),f.LFG(sR,8),f.LFG(oR,8),f.LFG(aR,8),f.LFG(uR,8),f.LFG(EA,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function dR(n,e){return function lP(n,e=LI.z){return new yr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function DA(n,e){return dR(n,e).pipe((0,Tt.U)(t=>({payload:t,type:"query"})))}function jb(n,e){return DA(n,e).pipe(go(void 0),Vf(),(0,Tt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const v=o.find(S=>S.doc.ref.isEqual(d.ref)),I=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(d.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(d.metadata)||!v&&I&&JSON.stringify(I.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function hR(n,e,t){return jb(n,t).pipe(ji((r,o)=>function dP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function hP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return bA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return bA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return bA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function ew(n,e=Ti.y){return n=null!=n?n:tw,(0,Kr.e)((t,r)=>{let o,u=!0;t.subscribe((0,yn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,Tt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function bA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function fR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class pR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=jb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Tt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(go(void 0),Vf(),sr(([r,o])=>o.length>0||!r),(0,Tt.U)(([r,o])=>o),un.iC)}auditTrail(e){return this.stateChanges(e).pipe(ji((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=fR(e);return hR(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return DA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),un.iC)}get(e){return(0,Cn.D)(this.query.get(e)).pipe(un.iC)}add(e){return this.ref.add(e)}doc(e){return new gR(this.ref.doc(e),this.afs)}}class gR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=_R(r,t);return new pR(o,u,this.afs)}snapshotChanges(){return function cP(n,e){return dR(n,e).pipe(go(void 0),Vf(),(0,Tt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Cn.D)(this.ref.get(e)).pipe(un.iC)}}class fP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),sr(t=>t.length>0),un.iC):jb(this.query,this.afs.schedulers.outsideAngular).pipe(un.iC)}auditTrail(e){return this.stateChanges(e).pipe(ji((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=fR(e);return hR(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return DA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),un.iC)}get(e){return(0,Cn.D)(this.query.get(e)).pipe(un.iC)}}const mR=new f.OlP("angularfire2.enableFirestorePersistence"),yR=new f.OlP("angularfire2.firestore.persistenceSettings"),pP=new f.OlP("angularfire2.firestore.settings"),gP=new f.OlP("angularfire2.firestore.use-emulator");function _R(n,e=(t=>t)){return{query:e(n),ref:n}}let vR=(()=>{class n{constructor(t,r,o,u,d,m,v,I,S,N,L,G,J,_e,ke,ct,_t){this.schedulers=v;const Ot=(0,zs.on)(t,m,r),dt=S;N&&lR(Ot,m,L,J,_e,ke,G,ct),[this.firestore,this.persistenceEnabled$]=(0,zs.cc)(`${Ot.name}.firestore`,"AngularFirestore",Ot.name,()=>{const nn=m.runOutsideAngular(()=>Ot.firestore());if(u&&nn.settings(u),dt&&nn.useEmulator(...dt),o&&!mr(d)){const dr=()=>{try{return(0,Cn.D)(nn.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(jr){return"undefined"!=typeof console&&console.warn(jr),Qe(!1)}};return[nn,m.runOutsideAngular(dr)]}return[nn,Qe(!1)]},[u,dt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=_R(o,r),m=this.schedulers.ngZone.run(()=>u);return new pR(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new fP(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new gR(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(zs.Dh),f.LFG(zs.xv,8),f.LFG(mR,8),f.LFG(pP,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(un.HU),f.LFG(yR,8),f.LFG(gP,8),f.LFG(cR,8),f.LFG(rR,8),f.LFG(iR,8),f.LFG(sR,8),f.LFG(oR,8),f.LFG(aR,8),f.LFG(uR,8),f.LFG(EA,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mP=(()=>{class n{constructor(){aP.Z.registerVersion("angularfire",un.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:mR,useValue:!0},{provide:yR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[vR]}),n})(),ER=(()=>{class n{constructor(t){this.firestore=t}agregarcliente(t){return this.firestore.collection("clientes").add(t)}getclientes(){return this.firestore.collection("clientes").snapshotChanges()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vR))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class wR{}const Lc="*";function _P(n,e){return{type:7,name:n,definitions:e,options:{}}}function DR(n,e=null){return{type:4,styles:e,timings:n}}function bR(n,e=null){return{type:2,steps:n,options:e}}function KE(n){return{type:6,styles:n,offset:null}}function IA(n,e,t){return{type:0,name:n,styles:e,options:t}}function IR(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function TR(n){Promise.resolve(null).then(n)}class YE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){TR(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class CR{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,o=0;const u=this.players.length;0==u?TR(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++t==u&&this._onFinish()}),d.onDestroy(()=>{++r==u&&this._onDestroy()}),d.onStart(()=>{++o==u&&this._onStart()})}),this.totalTime=this.players.reduce((d,m)=>Math.max(d,m.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const o=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(o)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const AR=["toast-component",""];function vP(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",5),f.NdJ("click",function(){return f.CHM(t),f.oxw().remove()}),f.TgZ(1,"span",6),f._uU(2,"\xd7"),f.qZA(),f.qZA()}}function EP(n,e){if(1&n&&(f.ynx(0),f._uU(1),f.BQk()),2&n){const t=f.oxw(2);f.xp6(1),f.hij("[",t.duplicatesCount+1,"]")}}function wP(n,e){if(1&n&&(f.TgZ(0,"div"),f._uU(1),f.YNc(2,EP,2,1,"ng-container",4),f.qZA()),2&n){const t=f.oxw();f.Tol(t.options.titleClass),f.uIk("aria-label",t.title),f.xp6(1),f.hij(" ",t.title," "),f.xp6(1),f.Q6J("ngIf",t.duplicatesCount)}}function DP(n,e){if(1&n&&f._UZ(0,"div",7),2&n){const t=f.oxw();f.Tol(t.options.messageClass),f.Q6J("innerHTML",t.message,f.oJD)}}function bP(n,e){if(1&n&&(f.TgZ(0,"div",8),f._uU(1),f.qZA()),2&n){const t=f.oxw();f.Tol(t.options.messageClass),f.uIk("aria-label",t.message),f.xp6(1),f.hij(" ",t.message," ")}}function IP(n,e){if(1&n&&(f.TgZ(0,"div"),f._UZ(1,"div",9),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Udp("width",t.width+"%")}}function TP(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",5),f.NdJ("click",function(){return f.CHM(t),f.oxw().remove()}),f.TgZ(1,"span",6),f._uU(2,"\xd7"),f.qZA(),f.qZA()}}function CP(n,e){if(1&n&&(f.ynx(0),f._uU(1),f.BQk()),2&n){const t=f.oxw(2);f.xp6(1),f.hij("[",t.duplicatesCount+1,"]")}}function AP(n,e){if(1&n&&(f.TgZ(0,"div"),f._uU(1),f.YNc(2,CP,2,1,"ng-container",4),f.qZA()),2&n){const t=f.oxw();f.Tol(t.options.titleClass),f.uIk("aria-label",t.title),f.xp6(1),f.hij(" ",t.title," "),f.xp6(1),f.Q6J("ngIf",t.duplicatesCount)}}function SP(n,e){if(1&n&&f._UZ(0,"div",7),2&n){const t=f.oxw();f.Tol(t.options.messageClass),f.Q6J("innerHTML",t.message,f.oJD)}}function MP(n,e){if(1&n&&(f.TgZ(0,"div",8),f._uU(1),f.qZA()),2&n){const t=f.oxw();f.Tol(t.options.messageClass),f.uIk("aria-label",t.message),f.xp6(1),f.hij(" ",t.message," ")}}function RP(n,e){if(1&n&&(f.TgZ(0,"div"),f._UZ(1,"div",9),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Udp("width",t.width+"%")}}class NP{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class $b{constructor(e,t,r,o,u,d){this.toastId=e,this.config=t,this.message=r,this.title=o,this.toastType=u,this.toastRef=d,this._onTap=new ln.x,this._onAction=new ln.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const SR={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},MR=new f.OlP("ToastConfig");class OP{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new ln.x,this._activate=new ln.x,this._manualClose=new ln.x,this._resetTimeout=new ln.x,this._countDuplicate=new ln.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class PP{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===$b?this._toastPackage:this._parentInjector.get(e,t,r)}}class kP extends class xP{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let o;return o=r.create(e.injector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(o),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(o)),o}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class FP{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let LP=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VP=(()=>{class n{constructor(t,r,o,u){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=o,this._document=u,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const o=this._document.createElement("div");return o.id="toast-container",o.classList.add(t),o.classList.add("toast-container"),r?r.getContainerElement().appendChild(o):this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalHost(t){return new kP(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new FP(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(LP),f.LFG(f._Vd),f.LFG(f.z2F),f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),CA=(()=>{class n{constructor(t,r,o,u,d){this.overlay=r,this._injector=o,this.sanitizer=u,this.ngZone=d,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,r,o={},u=""){return this._preBuildNotification(u,t,r,this.applyConfig(o))}success(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(o))}error(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(o))}info(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(o))}warning(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(o))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const o=this.toasts[this.currentlyActive].toastRef;o.isInactive()||(this.currentlyActive=this.currentlyActive+1,o.activate())}return!0}findDuplicate(t="",r="",o,u){const{includeTitleDuplicates:d}=this.toastrConfig;for(const m of this.toasts){const v=d&&m.title===t;if((!d||v)&&m.message===r)return m.toastRef.onDuplicate(o,u),m}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,o,u){return u.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,o,u)):this._buildNotification(t,r,o,u)}_buildNotification(t,r,o,u){if(!u.toastComponent)throw new Error("toastComponent required");const d=this.findDuplicate(o,r,this.toastrConfig.resetTimeoutOnDuplicate&&u.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&o||r)&&this.toastrConfig.preventDuplicates&&null!==d)return d;this.previousToastMessage=r;let m=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(m=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const v=this.overlay.create(u.positionClass,this.overlayContainer);this.index=this.index+1;let I=r;r&&u.enableHtml&&(I=this.sanitizer.sanitize(f.q3G.HTML,r));const S=new OP(v),N=new $b(this.index,u,I,o,t,S),L=new PP(N,this._injector),G=new NP(u.toastComponent,L),J=v.attach(G,this.toastrConfig.newestOnTop);S.componentInstance=J.instance;const _e={toastId:this.index,title:o||"",message:r||"",toastRef:S,onShown:S.afterActivate(),onHidden:S.afterClosed(),onTap:N.onTap(),onAction:N.onAction(),portal:J};return m||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{_e.toastRef.activate()})),this.toasts.push(_e),_e}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(MR),f.LFG(VP),f.LFG(f.zs3),f.LFG(co),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UP=(()=>{class n{constructor(t,r,o){this.toastrService=t,this.toastPackage=r,this.ngZone=o,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(CA),f.Y36($b),f.Y36(f.R0b))},n.\u0275cmp=f.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(f.d8E("@flyInOut",r.state),f.Tol(r.toastClasses),f.Udp("display",r.displayStyle))},attrs:AR,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(t,r){1&t&&(f.YNc(0,vP,3,0,"button",0),f.YNc(1,wP,3,5,"div",1),f.YNc(2,DP,1,3,"div",2),f.YNc(3,bP,2,4,"div",3),f.YNc(4,IP,2,2,"div",4)),2&t&&(f.Q6J("ngIf",r.options.closeButton),f.xp6(1),f.Q6J("ngIf",r.title),f.xp6(1),f.Q6J("ngIf",r.message&&r.options.enableHtml),f.xp6(1),f.Q6J("ngIf",r.message&&!r.options.enableHtml),f.xp6(1),f.Q6J("ngIf",r.options.progressBar))},directives:[pr],encapsulation:2,data:{animation:[_P("flyInOut",[IA("inactive",KE({opacity:0})),IA("active",KE({opacity:1})),IA("removed",KE({opacity:0})),IR("inactive => active",DR("{{ easeTime }}ms {{ easing }}")),IR("active => removed",DR("{{ easeTime }}ms {{ easing }}"))])]}}),n})();const BP=Object.assign(Object.assign({},SR),{toastComponent:UP});let jP=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:MR,useValue:{default:BP,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Os]]}),n})(),$P=(()=>{class n{constructor(t,r,o){this.toastrService=t,this.toastPackage=r,this.appRef=o,this.width=-1,this.toastClasses="",this.state="inactive",this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(CA),f.Y36($b),f.Y36(f.z2F))},n.\u0275cmp=f.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(f.Tol(r.toastClasses),f.Udp("display",r.displayStyle))},attrs:AR,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(t,r){1&t&&(f.YNc(0,TP,3,0,"button",0),f.YNc(1,AP,3,5,"div",1),f.YNc(2,SP,1,3,"div",2),f.YNc(3,MP,2,4,"div",3),f.YNc(4,RP,2,2,"div",4)),2&t&&(f.Q6J("ngIf",r.options.closeButton),f.xp6(1),f.Q6J("ngIf",r.title),f.xp6(1),f.Q6J("ngIf",r.message&&r.options.enableHtml),f.xp6(1),f.Q6J("ngIf",r.message&&!r.options.enableHtml),f.xp6(1),f.Q6J("ngIf",r.options.progressBar))},directives:[pr],encapsulation:2}),n})();Object.assign(Object.assign({},SR),{toastComponent:$P});let HP=(()=>{class n{constructor(t,r,o,u){this.fb=t,this._clienteService=r,this.router=o,this.toastr=u,this.submitted=!1,this.createcliente=this.fb.group({nombre:["",Lg.required],apellido:["",Lg.required],edad:["",Lg.required],fecha:["",Lg.required]})}ngOnInit(){}agregarcliente(){if(this.submitted=!0,this.createcliente.invalid)return;const t={nombre:this.createcliente.value.nombre,apellido:this.createcliente.value.apellido,edad:this.createcliente.value.edad,fecha:this.createcliente.value.fecha,fechacreacion:new Date,fechamodificar:new Date};this._clienteService.agregarcliente(t).then(()=>{this.toastr.success("El cliente fue registrado con exito","Cliente Registrado",{positionClass:"toast-bottom-right"}),this.router.navigate(["/list-clientes"])}).catch(r=>{console.log(r)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(FI),f.Y36(ER),f.Y36(wr),f.Y36(CA))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-create-clientes"]],decls:25,vars:1,consts:[[1,"container","pt-4"],[1,"row"],[1,"col-lg-6","offset-lg-3"],[1,"card","text-center"],[1,"card-body"],["ngif","submitted && createcliente.invalid",1,"text-red"],[1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","mt-4"],[1,"col"],["type","text","formControlName","nombre","placeholder","Nombre",1,"form-control"],["type","text","formControlName","apellido","placeholder","Apellido",1,"form-control"],[1,"row","mt-3"],["type","text","formControlName","edad","placeholder","Edad",1,"form-control"],["type","date","formControlName","fecha","placeholder","Fecha de nacimiento",1,"form-control"],[1,"mt-3"],["routerLink","/list-clientes",1,"btn","btn-secundary","btn-dark","btn-md","me-2"],["type","submit",1,"btn","btn-secundary","btn-dark","btn-md"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"h3"),f._uU(6,"Agregar cliente"),f.qZA(),f.TgZ(7,"span",5),f._uU(8,"Todos los campos son obligatorios"),f.qZA(),f.TgZ(9,"form",6),f.NdJ("ngSubmit",function(){return r.agregarcliente()}),f.TgZ(10,"div",7),f.TgZ(11,"div",8),f._UZ(12,"input",9),f.qZA(),f.TgZ(13,"div",8),f._UZ(14,"input",10),f.qZA(),f.qZA(),f.TgZ(15,"div",11),f.TgZ(16,"div",8),f._UZ(17,"input",12),f.qZA(),f.TgZ(18,"div",8),f._UZ(19,"input",13),f.qZA(),f.qZA(),f.TgZ(20,"div",14),f.TgZ(21,"button",15),f._uU(22,"Regresar"),f.qZA(),f.TgZ(23,"button",16),f._uU(24,"Agregar"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(9),f.Q6J("formGroup",r.createcliente))},directives:[$0,M0,Yg,bf,S0,N_,sc],styles:[""]}),n})();function GP(n,e){if(1&n&&(f.TgZ(0,"tr"),f.TgZ(1,"td"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA(),f.TgZ(7,"td"),f._uU(8),f.qZA(),f.TgZ(9,"td"),f._UZ(10,"i",7),f._UZ(11,"i",8),f.qZA(),f.qZA()),2&n){const t=e.$implicit;f.xp6(2),f.Oqu(t.nombre),f.xp6(2),f.Oqu(t.apellido),f.xp6(2),f.Oqu(t.edad),f.xp6(2),f.Oqu(t.fecha)}}const qP=[{path:"",redirectTo:"list-clientes",pathMatch:"full"},{path:"list-clientes",component:(()=>{class n{constructor(t){this._clienteServices=t,this.clientes=[]}ngOnInit(){this.getClientes()}getClientes(){this._clienteServices.getclientes().subscribe(t=>{this.clientes=[],t.forEach(r=>{this.clientes.push(Object.assign({id:r.payload.doc.id},r.payload.doc.data()))})})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ER))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-list-clientes"]],decls:22,vars:1,consts:[[1,"container","mt-4"],[1,"card"],[1,"card-body"],[1,"h3"],["routerLink","/create-clientes",1,"btn","btn-dark","float-md-end"],[1,"table","table-striped","mt-5"],[4,"ngFor","ngForOf"],[1,"fas","fa-edit","fa-lg","text-info","me-2"],[1,"fas","fa-trash-alt","fa-lg","text-danger"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"span",3),f._uU(4,"Listado de Clientes"),f.qZA(),f.TgZ(5,"button",4),f._uU(6,"Agregar"),f.qZA(),f.TgZ(7,"table",5),f.TgZ(8,"thead"),f.TgZ(9,"tr"),f.TgZ(10,"th"),f._uU(11,"Nombre"),f.qZA(),f.TgZ(12,"th"),f._uU(13,"Apellido"),f.qZA(),f.TgZ(14,"th"),f._uU(15,"Edad"),f.qZA(),f.TgZ(16,"th"),f._uU(17,"Fecha de nacimiento"),f.qZA(),f.TgZ(18,"th"),f._uU(19,"Acciones"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(20,"tbody"),f.YNc(21,GP,12,4,"tr",6),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(21),f.Q6J("ngForOf",r.clientes))},directives:[sc,Nn],styles:["i[_ngcontent-%COMP%]{cursor:pointer}"]}),n})()},{path:"create-clientes",component:HP},{path:"**",redirectTo:"list-clientes",pathMatch:"full"}];let zP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[h0.forRoot(qP)],h0]}),n})();function WP(){return"undefined"!=typeof window&&void 0!==window.document}function AA(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Vh(n){switch(n.length){case 0:return new YE;case 1:return n[0];default:return new CR(n)}}function RR(n,e,t,r,o={},u={}){const d=[],m=[];let v=-1,I=null;if(r.forEach(S=>{const N=S.offset,L=N==v,G=L&&I||{};Object.keys(S).forEach(J=>{let _e=J,ke=S[J];if("offset"!==J)switch(_e=e.normalizePropertyName(_e,d),ke){case"!":ke=o[J];break;case Lc:ke=u[J];break;default:ke=e.normalizeStyleValue(J,_e,ke,d)}G[_e]=ke}),L||m.push(G),I=G,v=N}),d.length){const S="\n - ";throw new Error(`Unable to animate due to the following errors:${S}${d.join(S)}`)}return m}function SA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&MA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&MA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&MA(t,"destroy",n)))}}function MA(n,e,t){const r=t.totalTime,u=RA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),d=n._data;return null!=d&&(u._data=d),u}function RA(n,e,t,r,o="",u=0,d){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:o,totalTime:u,disabled:!!d}}function No(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function NR(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let NA=(n,e)=>!1,xR=(n,e,t)=>[];(AA()||"undefined"!=typeof Element)&&(NA=WP()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),xR=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Jp=null,OR=!1;function PR(n){Jp||(Jp=function KP(){return"undefined"!=typeof document?document.body:null}()||{},OR=!!Jp.style&&"WebkitAppearance"in Jp.style);let e=!0;return Jp.style&&!function ZP(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Jp.style,!e&&OR&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Jp.style)),e}const kR=NA,FR=xR;let LR=(()=>{class n{validateStyleProperty(t){return PR(t)}matchesElement(t,r){return!1}containsElement(t,r){return kR(t,r)}query(t,r,o){return FR(t,r,o)}computeStyle(t,r,o){return o||""}animate(t,r,o,u,d,m=[],v){return new YE(o,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),xA=(()=>{class n{}return n.NOOP=new LR,n})();const OA="ng-enter",Hb="ng-leave",Gb="ng-trigger",qb=".ng-trigger",UR="ng-animating",PA=".ng-animating";function Xp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:kA(parseFloat(e[1]),e[2])}function kA(n,e){return"s"===e?1e3*n:n}function zb(n,e,t){return n.hasOwnProperty("duration")?n:function JP(n,e,t){let o,u=0,d="";if("string"==typeof n){const m=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===m)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};o=kA(parseFloat(m[1]),m[2]);const v=m[3];null!=v&&(u=kA(parseFloat(v),m[4]));const I=m[5];I&&(d=I)}else o=n;if(!t){let m=!1,v=e.length;o<0&&(e.push("Duration values below 0 are not allowed for this animation step."),m=!0),u<0&&(e.push("Delay values below 0 are not allowed for this animation step."),m=!0),m&&e.splice(v,0,`The provided timing value "${n}" is invalid.`)}return{duration:o,delay:u,easing:d}}(n,e,t)}function Iy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Uh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Iy(n,t);return t}function jR(n,e,t){return t?e+":"+t+";":""}function $R(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=jR(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=jR(0,tk(t),n.style[t]));n.setAttribute("style",e)}function gl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const o=LA(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[o]),n.style[o]=e[r]}),AA()&&$R(n))}function eg(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=LA(t);n.style[r]=""}),AA()&&$R(n))}function QE(n){return Array.isArray(n)?1==n.length?n[0]:bR(n):n}const FA=new RegExp("{{\\s*(.+?)\\s*}}","g");function HR(n){let e=[];if("string"==typeof n){let t;for(;t=FA.exec(n);)e.push(t[1]);FA.lastIndex=0}return e}function Wb(n,e,t){const r=n.toString(),o=r.replace(FA,(u,d)=>{let m=e[d];return e.hasOwnProperty(d)||(t.push(`Please provide a value for the animation param ${d}`),m=""),m.toString()});return o==r?n:o}function Zb(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const ek=/-+([a-z0-9])/g;function LA(n){return n.replace(ek,(...e)=>e[1].toUpperCase())}function tk(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function xo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function GR(n,e){return window.getComputedStyle(n)[e]}function ik(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function sk(n,e,t){if(":"==n[0]){const v=function ok(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof v)return void e.push(v);n=v}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const o=r[1],u=r[2],d=r[3];e.push(qR(o,d));"<"==u[0]&&!("*"==o&&"*"==d)&&e.push(qR(d,o))}(r,t,e)):t.push(n),t}const Yb=new Set(["true","1"]),Qb=new Set(["false","0"]);function qR(n,e){const t=Yb.has(n)||Qb.has(n),r=Yb.has(e)||Qb.has(e);return(o,u)=>{let d="*"==n||n==o,m="*"==e||e==u;return!d&&t&&"boolean"==typeof o&&(d=o?Yb.has(n):Qb.has(n)),!m&&r&&"boolean"==typeof u&&(m=u?Yb.has(e):Qb.has(e)),d&&m}}const ak=new RegExp("s*:selfs*,?","g");function VA(n,e,t){return new uk(n).build(e,t)}class uk{constructor(e){this._driver=e}build(e,t){const r=new dk(t);return this._resetContextStyleTimingState(r),xo(this,QE(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,o=t.depCount=0;const u=[],d=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(m=>{if(this._resetContextStyleTimingState(t),0==m.type){const v=m,I=v.name;I.toString().split(/\s*,\s*/).forEach(S=>{v.name=S,u.push(this.visitState(v,t))}),v.name=I}else if(1==m.type){const v=this.visitTransition(m,t);r+=v.queryCount,o+=v.depCount,d.push(v)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:u,transitions:d,queryCount:r,depCount:o,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),o=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,d=o||{};if(r.styles.forEach(m=>{if(Jb(m)){const v=m;Object.keys(v).forEach(I=>{HR(v[I]).forEach(S=>{d.hasOwnProperty(S)||u.add(S)})})}}),u.size){const m=Zb(u.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${m.join(", ")}`)}}return{type:0,name:e.name,style:r,options:o?{params:o}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=xo(this,QE(e.animation),t);return{type:1,matchers:ik(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:tg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>xo(this,r,t)),options:tg(e.options)}}visitGroup(e,t){const r=t.currentTime;let o=0;const u=e.steps.map(d=>{t.currentTime=r;const m=xo(this,d,t);return o=Math.max(o,t.currentTime),m});return t.currentTime=o,{type:3,steps:u,options:tg(e.options)}}visitAnimate(e,t){const r=function fk(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return UA(zb(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=UA(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||zb(r,e),UA(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let o,u=e.styles?e.styles:KE({});if(5==u.type)o=this.visitKeyframes(u,t);else{let d=e.styles,m=!1;if(!d){m=!0;const I={};r.easing&&(I.easing=r.easing),d=KE(I)}t.currentTime+=r.duration+r.delay;const v=this.visitStyle(d,t);v.isEmptyStep=m,o=v}return t.currentAnimateTimings=null,{type:4,timings:r,style:o,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(d=>{"string"==typeof d?d==Lc?r.push(d):t.errors.push(`The provided style string value ${d} is not allowed.`):r.push(d)}):r.push(e.styles);let o=!1,u=null;return r.forEach(d=>{if(Jb(d)){const m=d,v=m.easing;if(v&&(u=v,delete m.easing),!o)for(let I in m)if(m[I].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let o=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(d=>{"string"!=typeof d&&Object.keys(d).forEach(m=>{if(!this._driver.validateStyleProperty(m))return void t.errors.push(`The provided animation property "${m}" is not a supported CSS property for animations`);const v=t.collectedStyles[t.currentQuerySelector],I=v[m];let S=!0;I&&(u!=o&&u>=I.startTime&&o<=I.endTime&&(t.errors.push(`The CSS property "${m}" that exists between the times of "${I.startTime}ms" and "${I.endTime}ms" is also being animated in a parallel animation between the times of "${u}ms" and "${o}ms"`),S=!1),u=I.startTime),S&&(v[m]={startTime:u,endTime:o}),t.options&&function XP(n,e,t){const r=e.params||{},o=HR(n);o.length&&o.forEach(u=>{r.hasOwnProperty(u)||t.push(`Unable to resolve the local animation param ${u} in the given list of values`)})}(d[m],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let u=0;const d=[];let m=!1,v=!1,I=0;const S=e.steps.map(ct=>{const _t=this._makeStyleAst(ct,t);let Ot=null!=_t.offset?_t.offset:function hk(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Jb(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(Jb(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(_t.styles),dt=0;return null!=Ot&&(u++,dt=_t.offset=Ot),v=v||dt<0||dt>1,m=m||dt<I,I=dt,d.push(dt),_t});v&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),m&&t.errors.push("Please ensure that all keyframe offsets are in order");const N=e.steps.length;let L=0;u>0&&u<N?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==u&&(L=1/(N-1));const G=N-1,J=t.currentTime,_e=t.currentAnimateTimings,ke=_e.duration;return S.forEach((ct,_t)=>{const Ot=L>0?_t==G?1:L*_t:d[_t],dt=Ot*ke;t.currentTime=J+_e.delay+dt,_e.duration=dt,this._validateStyleAst(ct,t),ct.offset=Ot,r.styles.push(ct)}),r}visitReference(e,t){return{type:8,animation:xo(this,QE(e.animation),t),options:tg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:tg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:tg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,o=e.options||{};t.queryCount++,t.currentQuery=e;const[u,d]=function lk(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(ak,"")),n=n.replace(/@\*/g,qb).replace(/@\w+/g,t=>qb+"-"+t.substr(1)).replace(/:animating/g,PA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,No(t.collectedStyles,t.currentQuerySelector,{});const m=xo(this,QE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:o.limit||0,optional:!!o.optional,includeSelf:d,animation:m,originalSelector:e.selector,options:tg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:zb(e.timings,t.errors,!0);return{type:12,animation:xo(this,QE(e.animation),t),timings:r,options:null}}}class dk{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Jb(n){return!Array.isArray(n)&&"object"==typeof n}function tg(n){return n?(n=Iy(n)).params&&(n.params=function ck(n){return n?Iy(n):null}(n.params)):n={},n}function UA(n,e,t){return{duration:n,delay:e,easing:t}}function BA(n,e,t,r,o,u,d=null,m=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:o,delay:u,totalTime:o+u,easing:d,subTimeline:m}}class Xb{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const mk=new RegExp(":enter","g"),_k=new RegExp(":leave","g");function jA(n,e,t,r,o,u={},d={},m,v,I=[]){return(new vk).buildKeyframes(n,e,t,r,o,u,d,m,v,I)}class vk{buildKeyframes(e,t,r,o,u,d,m,v,I,S=[]){I=I||new Xb;const N=new $A(e,t,I,o,u,S,[]);N.options=v,N.currentTimeline.setStyles([d],null,N.errors,v),xo(this,r,N);const L=N.timelines.filter(G=>G.containsAnimation());if(Object.keys(m).length){let G;for(let J=L.length-1;J>=0;J--){const _e=L[J];if(_e.element===t){G=_e;break}}G&&!G.allowOnlyTimelineStyles()&&G.setStyles([m],null,N.errors,v)}return L.length?L.map(G=>G.buildKeyframes()):[BA(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const o=t.createSubContext(e.options),u=t.currentTimeline.currentTime,d=this._visitSubInstructions(r,o,o.options);u!=d&&t.transformIntoNewTimeline(d)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const d=null!=r.duration?Xp(r.duration):null,m=null!=r.delay?Xp(r.delay):null;return 0!==d&&e.forEach(v=>{const I=t.appendInstructionToTimeline(v,d,m);u=Math.max(u,I.duration+I.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),xo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let o=t;const u=e.options;if(u&&(u.params||u.delay)&&(o=t.createSubContext(u),o.transformIntoNewTimeline(),null!=u.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=eI);const d=Xp(u.delay);o.delayNextStep(d)}e.steps.length&&(e.steps.forEach(d=>xo(this,d,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let o=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?Xp(e.options.delay):0;e.steps.forEach(d=>{const m=t.createSubContext(e.options);u&&m.delayNextStep(u),xo(this,d,m),o=Math.max(o,m.currentTimeline.currentTime),r.push(m.currentTimeline)}),r.forEach(d=>t.currentTimeline.mergeTimelineCollectedStyles(d)),t.transformIntoNewTimeline(o),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return zb(t.params?Wb(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),o=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),o.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),o.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,o=t.currentAnimateTimings;!o&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=o&&o.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,o=t.currentTimeline.duration,u=r.duration,m=t.createSubContext().currentTimeline;m.easing=r.easing,e.styles.forEach(v=>{m.forwardTime((v.offset||0)*u),m.setStyles(v.styles,v.easing,t.errors,t.options),m.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(m),t.transformIntoNewTimeline(o+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,o=e.options||{},u=o.delay?Xp(o.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=eI);let d=r;const m=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!o.optional,t.errors);t.currentQueryTotal=m.length;let v=null;m.forEach((I,S)=>{t.currentQueryIndex=S;const N=t.createSubContext(e.options,I);u&&N.delayNextStep(u),I===t.element&&(v=N.currentTimeline),xo(this,e.animation,N),N.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,N.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(d),v&&(t.currentTimeline.mergeTimelineCollectedStyles(v),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,o=t.currentTimeline,u=e.timings,d=Math.abs(u.duration),m=d*(t.currentQueryTotal-1);let v=d*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":v=m-v;break;case"full":v=r.currentStaggerTime}const S=t.currentTimeline;v&&S.delayNextStep(v);const N=S.currentTime;xo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=o.currentTime-N+(o.startTime-r.currentTimeline.startTime)}}const eI={};class $A{constructor(e,t,r,o,u,d,m,v){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=u,this.errors=d,this.timelines=m,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=eI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=v||new tI(this._driver,t,0),m.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let o=this.options;null!=r.duration&&(o.duration=Xp(r.duration)),null!=r.delay&&(o.delay=Xp(r.delay));const u=r.params;if(u){let d=o.params;d||(d=this.options.params={}),Object.keys(u).forEach(m=>{(!t||!d.hasOwnProperty(m))&&(d[m]=Wb(u[m],d,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(o=>{r[o]=t[o]})}}return e}createSubContext(e=null,t,r){const o=t||this.element,u=new $A(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=eI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const o={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new Ek(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,o,e.stretchStartingKeyframe);return this.timelines.push(u),o}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,o,u,d){let m=[];if(o&&m.push(this.element),e.length>0){e=(e=e.replace(mk,"."+this._enterClassName)).replace(_k,"."+this._leaveClassName);let I=this._driver.query(this.element,e,1!=r);0!==r&&(I=r<0?I.slice(I.length+r,I.length):I.slice(0,r)),m.push(...I)}return!u&&0==m.length&&d.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),m}}class tI{constructor(e,t,r,o){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new tI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Lc,this._currentKeyframe[t]=Lc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,o){t&&(this._previousKeyframe.easing=t);const u=o&&o.params||{},d=function wk(n,e){const t={};let r;return n.forEach(o=>{"*"===o?(r=r||Object.keys(e),r.forEach(u=>{t[u]=Lc})):Uh(o,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(d).forEach(m=>{const v=Wb(d[m],u,r);this._pendingStyles[m]=v,this._localTimelineStyles.hasOwnProperty(m)||(this._backFill[m]=this._globalTimelineStyles.hasOwnProperty(m)?this._globalTimelineStyles[m]:Lc),this._updateStyle(m,v)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],o=e._styleSummary[t];(!r||o.time>r.time)&&this._updateStyle(t,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((m,v)=>{const I=Uh(m,!0);Object.keys(I).forEach(S=>{const N=I[S];"!"==N?e.add(S):N==Lc&&t.add(S)}),r||(I.offset=v/this.duration),o.push(I)});const u=e.size?Zb(e.values()):[],d=t.size?Zb(t.values()):[];if(r){const m=o[0],v=Iy(m);m.offset=0,v.offset=1,o=[m,v]}return BA(this.element,o,u,d,this.duration,this.startTime,this.easing,!1)}}class Ek extends tI{constructor(e,t,r,o,u,d,m=!1){super(e,t,d.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=u,this._stretchStartingKeyframe=m,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],d=r+t,m=t/d,v=Uh(e[0],!1);v.offset=0,u.push(v);const I=Uh(e[0],!1);I.offset=ZR(m),u.push(I);const S=e.length-1;for(let N=1;N<=S;N++){let L=Uh(e[N],!1);L.offset=ZR((t+L.offset*r)/d),u.push(L)}r=d,t=0,o="",e=u}return BA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,o,!0)}}function ZR(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class HA{}class Dk extends HA{normalizePropertyName(e,t){return LA(e)}normalizeStyleValue(e,t,r,o){let u="";const d=r.toString().trim();if(bk[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const m=r.match(/^[+-]?[\d\.]+([a-z]*)$/);m&&0==m[1].length&&o.push(`Please provide a CSS unit value for ${e}:${r}`)}return d+u}}const bk=(()=>function Ik(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function KR(n,e,t,r,o,u,d,m,v,I,S,N,L){return{type:0,element:n,triggerName:e,isRemovalTransition:o,fromState:t,fromStyles:u,toState:r,toStyles:d,timelines:m,queriedElements:v,preStyleProps:I,postStyleProps:S,totalTime:N,errors:L}}const GA={};class YR{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,o){return function Tk(n,e,t,r,o){return n.some(u=>u(e,t,r,o))}(this.ast.matchers,e,t,r,o)}buildStyles(e,t,r){const o=this._stateStyles["*"],u=this._stateStyles[e],d=o?o.buildStyles(t,r):{};return u?u.buildStyles(t,r):d}build(e,t,r,o,u,d,m,v,I,S){const N=[],L=this.ast.options&&this.ast.options.params||GA,J=this.buildStyles(r,m&&m.params||GA,N),_e=v&&v.params||GA,ke=this.buildStyles(o,_e,N),ct=new Set,_t=new Map,Ot=new Map,dt="void"===o,nn={params:Object.assign(Object.assign({},L),_e)},dr=S?[]:jA(e,t,this.ast.animation,u,d,J,ke,nn,I,N);let jr=0;if(dr.forEach(Uc=>{jr=Math.max(Uc.duration+Uc.delay,jr)}),N.length)return KR(t,this._triggerName,r,o,dt,J,ke,[],[],_t,Ot,jr,N);dr.forEach(Uc=>{const Bc=Uc.element,fN=No(_t,Bc,{});Uc.preStyleProps.forEach(ng=>fN[ng]=!0);const XE=No(Ot,Bc,{});Uc.postStyleProps.forEach(ng=>XE[ng]=!0),Bc!==t&&ct.add(Bc)});const Vc=Zb(ct.values());return KR(t,this._triggerName,r,o,dt,J,ke,dr,Vc,_t,Ot,jr)}}class Ck{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},o=Iy(this.defaultParams);return Object.keys(e).forEach(u=>{const d=e[u];null!=d&&(o[u]=d)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const d=u;Object.keys(d).forEach(m=>{let v=d[m];v.length>1&&(v=Wb(v,o,t));const I=this.normalizer.normalizePropertyName(m,t);v=this.normalizer.normalizeStyleValue(m,I,v,t),r[I]=v})}}),r}}class Sk{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(o=>{this.states[o.name]=new Ck(o.style,o.options&&o.options.params||{},r)}),QR(this.states,"true","1"),QR(this.states,"false","0"),t.transitions.forEach(o=>{this.transitionFactories.push(new YR(e,o,this.states))}),this.fallbackTransition=function Mk(n,e,t){return new YR(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,m)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,o){return this.transitionFactories.find(d=>d.match(e,t,r,o))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function QR(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const Rk=new Xb;class Nk{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],o=VA(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=o}_buildPlayer(e,t,r){const o=e.element,u=RR(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(o,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const o=[],u=this._animations[e];let d;const m=new Map;if(u?(d=jA(this._driver,t,u,OA,Hb,{},{},r,Rk,o),d.forEach(S=>{const N=No(m,S.element,{});S.postStyleProps.forEach(L=>N[L]=null)})):(o.push("The requested animation doesn't exist or has already been destroyed"),d=[]),o.length)throw new Error(`Unable to create the animation due to the following errors: ${o.join("\n")}`);m.forEach((S,N)=>{Object.keys(S).forEach(L=>{S[L]=this._driver.computeStyle(N,L,Lc)})});const I=Vh(d.map(S=>{const N=m.get(S.element);return this._buildPlayer(S,{},N)}));return this._playersById[e]=I,I.onDestroy(()=>this.destroy(e)),this.players.push(I),I}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,o){const u=RA(t,"","","");return SA(this._getPlayer(e),r,u,o),()=>{}}command(e,t,r,o){if("register"==r)return void this.register(e,o[0]);if("create"==r)return void this.create(e,t,o[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(e)}}}const JR="ng-animate-queued",qA="ng-animate-disabled",Fk=[],XR={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Lk={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},pa="__ng_removed";class zA{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function jk(n){return null!=n?n:null}(r?e.value:e),r){const u=Iy(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(o=>{null==r[o]&&(r[o]=t[o])})}}}const JE="void",WA=new zA(JE);class Vk{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ga(t,this._hostClassName)}listen(e,t,r,o){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function $k(n){return"start"==n||"done"==n}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);const u=No(this._elementListeners,e,[]),d={name:t,phase:r,callback:o};u.push(d);const m=No(this._engine.statesByElement,e,{});return m.hasOwnProperty(t)||(ga(e,Gb),ga(e,Gb+"-"+t),m[t]=WA),()=>{this._engine.afterFlush(()=>{const v=u.indexOf(d);v>=0&&u.splice(v,1),this._triggers[t]||delete m[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,o=!0){const u=this._getTrigger(t),d=new ZA(this.id,t,e);let m=this._engine.statesByElement.get(e);m||(ga(e,Gb),ga(e,Gb+"-"+t),this._engine.statesByElement.set(e,m={}));let v=m[t];const I=new zA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&v&&I.absorbOptions(v.options),m[t]=I,v||(v=WA),I.value!==JE&&v.value===I.value){if(!function qk(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let o=0;o<t.length;o++){const u=t[o];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(v.params,I.params)){const _e=[],ke=u.matchStyles(v.value,v.params,_e),ct=u.matchStyles(I.value,I.params,_e);_e.length?this._engine.reportError(_e):this._engine.afterFlush(()=>{eg(e,ke),gl(e,ct)})}return}const L=No(this._engine.playersByElement,e,[]);L.forEach(_e=>{_e.namespaceId==this.id&&_e.triggerName==t&&_e.queued&&_e.destroy()});let G=u.matchTransition(v.value,I.value,e,I.params),J=!1;if(!G){if(!o)return;G=u.fallbackTransition,J=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:G,fromState:v,toState:I,player:d,isFallbackTransition:J}),J||(ga(e,JR),d.onStart(()=>{Ty(e,JR)})),d.onDone(()=>{let _e=this.players.indexOf(d);_e>=0&&this.players.splice(_e,1);const ke=this._engine.playersByElement.get(e);if(ke){let ct=ke.indexOf(d);ct>=0&&ke.splice(ct,1)}}),this.players.push(d),L.push(d),d}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(o=>o.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,qb,!0);r.forEach(o=>{if(o[pa])return;const u=this._engine.fetchNamespacesByElement(o);u.size?u.forEach(d=>d.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(e,t,r,o){const u=this._engine.statesByElement.get(e),d=new Map;if(u){const m=[];if(Object.keys(u).forEach(v=>{if(d.set(v,u[v].value),this._triggers[v]){const I=this.trigger(e,v,JE,o);I&&m.push(I)}}),m.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,d),r&&Vh(m).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const o=new Set;t.forEach(u=>{const d=u.name;if(o.has(d))return;o.add(d);const v=this._triggers[d].fallbackTransition,I=r[d]||WA,S=new zA(JE),N=new ZA(this.id,d,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:d,transition:v,fromState:I,toState:S,player:N,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let o=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)o=!0;else{let d=e;for(;d=d.parentNode;)if(r.statesByElement.get(d)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(e),o)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[pa];(!u||u===XR)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ga(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const o=r.player;if(o.destroyed)return;const u=r.element,d=this._elementListeners.get(u);d&&d.forEach(m=>{if(m.name==r.triggerName){const v=RA(u,r.triggerName,r.fromState.value,r.toState.value);v._data=e,SA(r.player,m.phase,v,m.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):t.push(r)}),this._queue=[],t.sort((r,o)=>{const u=r.transition.ast.depCount,d=o.transition.ast.depCount;return 0==u||0==d?u-d:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Uk{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Vk(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let o=!1;for(let u=r;u>=0;u--)if(this.driver.containsElement(this._namespaceList[u].hostElement,t)){this._namespaceList.splice(u+1,0,e),o=!0;break}o||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let o=this._namespaceLookup[e];o&&o.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const o=Object.keys(r);for(let u=0;u<o.length;u++){const d=r[o[u]].namespaceId;if(d){const m=this._fetchNamespace(d);m&&t.add(m)}}}return t}trigger(e,t,r,o){if(nI(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,o),!0}return!1}insertNode(e,t,r,o){if(!nI(t))return;const u=t[pa];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const d=this.collectedLeaveElements.indexOf(t);d>=0&&this.collectedLeaveElements.splice(d,1)}if(e){const d=this._fetchNamespace(e);d&&d.insertNode(t,r)}o&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ga(e,qA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ty(e,qA))}removeNode(e,t,r,o){if(nI(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,o):this.markElementAsRemoved(e,t,!1,o),r){const d=this.namespacesByHostElement.get(t);d&&d.id!==e&&d.removeNode(t,o)}}else this._onRemovalComplete(t,o)}markElementAsRemoved(e,t,r,o,u){this.collectedLeaveElements.push(t),t[pa]={namespaceId:e,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,o,u){return nI(t)?this._fetchNamespace(e).listen(t,r,o,u):()=>{}}_buildInstruction(e,t,r,o,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,o,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,qb,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,PA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Vh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[pa];if(r&&r.setForRemoval){if(e[pa]=XR,r.namespaceId){this.destroyInnerAnimations(e);const o=this._fetchNamespace(r.namespaceId);o&&o.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(qA))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(o=>{this.markElementAsDisabled(o,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ga(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Vh(t).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new Xb,o=[],u=new Map,d=[],m=new Map,v=new Map,I=new Map,S=new Set;this.disabledNodes.forEach(tt=>{S.add(tt);const mt=this.driver.query(tt,".ng-animate-queued",!0);for(let Et=0;Et<mt.length;Et++)S.add(mt[Et])});const N=this.bodyNode,L=Array.from(this.statesByElement.keys()),G=nN(L,this.collectedEnterElements),J=new Map;let _e=0;G.forEach((tt,mt)=>{const Et=OA+_e++;J.set(mt,Et),tt.forEach(Xt=>ga(Xt,Et))});const ke=[],ct=new Set,_t=new Set;for(let tt=0;tt<this.collectedLeaveElements.length;tt++){const mt=this.collectedLeaveElements[tt],Et=mt[pa];Et&&Et.setForRemoval&&(ke.push(mt),ct.add(mt),Et.hasAnimation?this.driver.query(mt,".ng-star-inserted",!0).forEach(Xt=>ct.add(Xt)):_t.add(mt))}const Ot=new Map,dt=nN(L,Array.from(ct));dt.forEach((tt,mt)=>{const Et=Hb+_e++;Ot.set(mt,Et),tt.forEach(Xt=>ga(Xt,Et))}),e.push(()=>{G.forEach((tt,mt)=>{const Et=J.get(mt);tt.forEach(Xt=>Ty(Xt,Et))}),dt.forEach((tt,mt)=>{const Et=Ot.get(mt);tt.forEach(Xt=>Ty(Xt,Et))}),ke.forEach(tt=>{this.processLeaveNode(tt)})});const nn=[],dr=[];for(let tt=this._namespaceList.length-1;tt>=0;tt--)this._namespaceList[tt].drainQueuedTransitions(t).forEach(Et=>{const Xt=Et.player,wi=Et.element;if(nn.push(Xt),this.collectedEnterElements.length){const Cs=wi[pa];if(Cs&&Cs.setForMove){if(Cs.previousTriggersValues&&Cs.previousTriggersValues.has(Et.triggerName)){const rg=Cs.previousTriggersValues.get(Et.triggerName),jh=this.statesByElement.get(Et.element);jh&&jh[Et.triggerName]&&(jh[Et.triggerName].value=rg)}return void Xt.destroy()}}const ml=!N||!this.driver.containsElement(N,wi),Oo=Ot.get(wi),Bh=J.get(wi),nr=this._buildInstruction(Et,r,Bh,Oo,ml);if(nr.errors&&nr.errors.length)return void dr.push(nr);if(ml)return Xt.onStart(()=>eg(wi,nr.fromStyles)),Xt.onDestroy(()=>gl(wi,nr.toStyles)),void o.push(Xt);if(Et.isFallbackTransition)return Xt.onStart(()=>eg(wi,nr.fromStyles)),Xt.onDestroy(()=>gl(wi,nr.toStyles)),void o.push(Xt);const mN=[];nr.timelines.forEach(Cs=>{Cs.stretchStartingKeyframe=!0,this.disabledNodes.has(Cs.element)||mN.push(Cs)}),nr.timelines=mN,r.append(wi,nr.timelines),d.push({instruction:nr,player:Xt,element:wi}),nr.queriedElements.forEach(Cs=>No(m,Cs,[]).push(Xt)),nr.preStyleProps.forEach((Cs,rg)=>{const jh=Object.keys(Cs);if(jh.length){let ig=v.get(rg);ig||v.set(rg,ig=new Set),jh.forEach(YA=>ig.add(YA))}}),nr.postStyleProps.forEach((Cs,rg)=>{const jh=Object.keys(Cs);let ig=I.get(rg);ig||I.set(rg,ig=new Set),jh.forEach(YA=>ig.add(YA))})});if(dr.length){const tt=[];dr.forEach(mt=>{tt.push(`@${mt.triggerName} has failed due to:\n`),mt.errors.forEach(Et=>tt.push(`- ${Et}\n`))}),nn.forEach(mt=>mt.destroy()),this.reportError(tt)}const jr=new Map,Vc=new Map;d.forEach(tt=>{const mt=tt.element;r.has(mt)&&(Vc.set(mt,mt),this._beforeAnimationBuild(tt.player.namespaceId,tt.instruction,jr))}),o.forEach(tt=>{const mt=tt.element;this._getPreviousPlayers(mt,!1,tt.namespaceId,tt.triggerName,null).forEach(Xt=>{No(jr,mt,[]).push(Xt),Xt.destroy()})});const Uc=ke.filter(tt=>iN(tt,v,I)),Bc=new Map;tN(Bc,this.driver,_t,I,Lc).forEach(tt=>{iN(tt,v,I)&&Uc.push(tt)});const XE=new Map;G.forEach((tt,mt)=>{tN(XE,this.driver,new Set(tt),v,"!")}),Uc.forEach(tt=>{const mt=Bc.get(tt),Et=XE.get(tt);Bc.set(tt,Object.assign(Object.assign({},mt),Et))});const ng=[],pN=[],gN={};d.forEach(tt=>{const{element:mt,player:Et,instruction:Xt}=tt;if(r.has(mt)){if(S.has(mt))return Et.onDestroy(()=>gl(mt,Xt.toStyles)),Et.disabled=!0,Et.overrideTotalTime(Xt.totalTime),void o.push(Et);let wi=gN;if(Vc.size>1){let Oo=mt;const Bh=[];for(;Oo=Oo.parentNode;){const nr=Vc.get(Oo);if(nr){wi=nr;break}Bh.push(Oo)}Bh.forEach(nr=>Vc.set(nr,wi))}const ml=this._buildAnimation(Et.namespaceId,Xt,jr,u,XE,Bc);if(Et.setRealPlayer(ml),wi===gN)ng.push(Et);else{const Oo=this.playersByElement.get(wi);Oo&&Oo.length&&(Et.parentPlayer=Vh(Oo)),o.push(Et)}}else eg(mt,Xt.fromStyles),Et.onDestroy(()=>gl(mt,Xt.toStyles)),pN.push(Et),S.has(mt)&&o.push(Et)}),pN.forEach(tt=>{const mt=u.get(tt.element);if(mt&&mt.length){const Et=Vh(mt);tt.setRealPlayer(Et)}}),o.forEach(tt=>{tt.parentPlayer?tt.syncPlayerEvents(tt.parentPlayer):tt.destroy()});for(let tt=0;tt<ke.length;tt++){const mt=ke[tt],Et=mt[pa];if(Ty(mt,Hb),Et&&Et.hasAnimation)continue;let Xt=[];if(m.size){let ml=m.get(mt);ml&&ml.length&&Xt.push(...ml);let Oo=this.driver.query(mt,PA,!0);for(let Bh=0;Bh<Oo.length;Bh++){let nr=m.get(Oo[Bh]);nr&&nr.length&&Xt.push(...nr)}}const wi=Xt.filter(ml=>!ml.destroyed);wi.length?Hk(this,mt,wi):this.processLeaveNode(mt)}return ke.length=0,ng.forEach(tt=>{this.players.push(tt),tt.onDone(()=>{tt.destroy();const mt=this.players.indexOf(tt);this.players.splice(mt,1)}),tt.play()}),ng}elementContainsData(e,t){let r=!1;const o=t[pa];return o&&o.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,o,u){let d=[];if(t){const m=this.playersByQueriedElement.get(e);m&&(d=m)}else{const m=this.playersByElement.get(e);if(m){const v=!u||u==JE;m.forEach(I=>{I.queued||!v&&I.triggerName!=o||d.push(I)})}}return(r||o)&&(d=d.filter(m=>!(r&&r!=m.namespaceId||o&&o!=m.triggerName))),d}_beforeAnimationBuild(e,t,r){const u=t.element,d=t.isRemovalTransition?void 0:e,m=t.isRemovalTransition?void 0:t.triggerName;for(const v of t.timelines){const I=v.element,S=I!==u,N=No(r,I,[]);this._getPreviousPlayers(I,S,d,m,t.toState).forEach(G=>{const J=G.getRealPlayer();J.beforeDestroy&&J.beforeDestroy(),G.destroy(),N.push(G)})}eg(u,t.fromStyles)}_buildAnimation(e,t,r,o,u,d){const m=t.triggerName,v=t.element,I=[],S=new Set,N=new Set,L=t.timelines.map(J=>{const _e=J.element;S.add(_e);const ke=_e[pa];if(ke&&ke.removedBeforeQueried)return new YE(J.duration,J.delay);const ct=_e!==v,_t=function Gk(n){const e=[];return rN(n,e),e}((r.get(_e)||Fk).map(jr=>jr.getRealPlayer())).filter(jr=>!!jr.element&&jr.element===_e),Ot=u.get(_e),dt=d.get(_e),nn=RR(0,this._normalizer,0,J.keyframes,Ot,dt),dr=this._buildPlayer(J,nn,_t);if(J.subTimeline&&o&&N.add(_e),ct){const jr=new ZA(e,m,_e);jr.setRealPlayer(dr),I.push(jr)}return dr});I.forEach(J=>{No(this.playersByQueriedElement,J.element,[]).push(J),J.onDone(()=>function Bk(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const o=r.indexOf(t);r.splice(o,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const o=r.indexOf(t);r.splice(o,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,J.element,J))}),S.forEach(J=>ga(J,UR));const G=Vh(L);return G.onDestroy(()=>{S.forEach(J=>Ty(J,UR)),gl(v,t.toStyles)}),N.forEach(J=>{No(o,J,[]).push(G)}),G}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new YE(e.duration,e.delay)}}class ZA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new YE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>SA(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){No(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function nI(n){return n&&1===n.nodeType}function eN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function tN(n,e,t,r,o){const u=[];t.forEach(v=>u.push(eN(v)));const d=[];r.forEach((v,I)=>{const S={};v.forEach(N=>{const L=S[N]=e.computeStyle(I,N,o);(!L||0==L.length)&&(I[pa]=Lk,d.push(I))}),n.set(I,S)});let m=0;return t.forEach(v=>eN(v,u[m++])),d}function nN(n,e){const t=new Map;if(n.forEach(m=>t.set(m,[])),0==e.length)return t;const o=new Set(e),u=new Map;function d(m){if(!m)return 1;let v=u.get(m);if(v)return v;const I=m.parentNode;return v=t.has(I)?I:o.has(I)?1:d(I),u.set(m,v),v}return e.forEach(m=>{const v=d(m);1!==v&&t.get(v).push(m)}),t}function ga(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Ty(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function Hk(n,e,t){Vh(t).onDone(()=>n.processLeaveNode(e))}function rN(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof CR?rN(r.players,e):e.push(r)}}function iN(n,e,t){const r=t.get(n);if(!r)return!1;let o=e.get(n);return o?r.forEach(u=>o.add(u)):e.set(n,r),t.delete(n),!0}class rI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(o,u)=>{},this._transitionEngine=new Uk(e,t,r),this._timelineEngine=new Nk(e,t,r),this._transitionEngine.onRemovalComplete=(o,u)=>this.onRemovalComplete(o,u)}registerTrigger(e,t,r,o,u){const d=e+"-"+o;let m=this._triggerCache[d];if(!m){const v=[],I=VA(this._driver,u,v);if(v.length)throw new Error(`The animation trigger "${o}" has failed to build due to the following errors:\n - ${v.join("\n - ")}`);m=function Ak(n,e,t){return new Sk(n,e,t)}(o,I,this._normalizer),this._triggerCache[d]=m}this._transitionEngine.registerTrigger(t,o,m)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,o){this._transitionEngine.insertNode(e,t,r,o)}onRemove(e,t,r,o){this._transitionEngine.removeNode(e,t,o||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,o){if("@"==r.charAt(0)){const[u,d]=NR(r);this._timelineEngine.command(u,t,d,o)}else this._transitionEngine.trigger(e,t,r,o)}listen(e,t,r,o,u){if("@"==r.charAt(0)){const[d,m]=NR(r);return this._timelineEngine.listen(d,t,m,u)}return this._transitionEngine.listen(e,t,r,o,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Wk=(()=>{class n{constructor(t,r,o){this._element=t,this._startStyles=r,this._endStyles=o,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&gl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gl(this._element,this._initialStyles),this._endStyles&&(gl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(eg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(eg(this._element,this._endStyles),this._endStyles=null),gl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function KA(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const o=t[r];Zk(o)&&(e=e||{},e[o]=n[o])}return e}function Zk(n){return"display"===n||"position"===n}class sN{constructor(e,t,r,o){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:GR(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Kk{validateStyleProperty(e){return PR(e)}matchesElement(e,t){return!1}containsElement(e,t){return kR(e,t)}query(e,t,r){return FR(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,o,u,d=[]){const v={duration:r,delay:o,fill:0==o?"both":"forwards"};u&&(v.easing=u);const I={},S=d.filter(L=>L instanceof sN);(function nk(n,e){return 0===n||0===e})(r,o)&&S.forEach(L=>{let G=L.currentSnapshot;Object.keys(G).forEach(J=>I[J]=G[J])}),t=function rk(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],d=[];if(r.forEach(m=>{u.hasOwnProperty(m)||d.push(m),u[m]=t[m]}),d.length)for(var o=1;o<e.length;o++){let m=e[o];d.forEach(function(v){m[v]=GR(n,v)})}}return e}(e,t=t.map(L=>Uh(L,!1)),I);const N=function zk(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=KA(e[0]),e.length>1&&(r=KA(e[e.length-1]))):e&&(t=KA(e)),t||r?new Wk(n,t,r):null}(e,t);return new sN(e,t,v,N)}}let Yk=(()=>{class n extends wR{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(t)?bR(t):t;return oN(this._renderer,null,r,"register",[o]),new Qk(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Qk extends class yP{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Jk(this._id,e,t||{},this._renderer)}}class Jk{constructor(e,t,r,o){this.id=e,this.element=t,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return oN(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function oN(n,e,t,r,o){return n.setProperty(e,`@@${t}:${r}`,o)}const aN="@.disabled";let Xk=(()=>{class n{constructor(t,r,o){this.delegate=t,this.engine=r,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,d)=>{const m=null==d?void 0:d.parentNode(u);m&&d.removeChild(m,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new uN("",u,this.engine),this._rendererCache.set(u,S)),S}const d=r.id,m=r.id+"-"+this._currentId;this._currentId++,this.engine.register(m,t);const v=S=>{Array.isArray(S)?S.forEach(v):this.engine.registerTrigger(d,m,t,S.name,S)};return r.data.animation.forEach(v),new e1(this,m,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,o){t>=0&&t<this._microtaskId?this._zone.run(()=>r(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[d,m]=u;d(m)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(rI),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class uN{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,o=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,o)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,o){this.delegate.setAttribute(e,t,r,o)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,o){this.delegate.setStyle(e,t,r,o)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==aN?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class e1 extends uN{constructor(e,t,r,o){super(t,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==aN?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const o=function t1(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),d="";return"@"!=u.charAt(0)&&([u,d]=function n1(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,o,u,d,m=>{this.factory.scheduleListenerCallback(m._data||-1,r,m)})}return this.delegate.listen(e,t,r)}}let r1=(()=>{class n extends rI{constructor(t,r,o){super(t.body,r,o)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re),f.LFG(xA),f.LFG(HA))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const lN=new f.OlP("AnimationModuleType"),cN=[{provide:wR,useClass:Yk},{provide:HA,useFactory:function i1(){return new Dk}},{provide:rI,useClass:r1},{provide:f.FYo,useFactory:function s1(n,e,t){return new Xk(n,e,t)},deps:[dn,rI,f.R0b]}],dN=[{provide:xA,useFactory:()=>new Kk},{provide:lN,useValue:"BrowserAnimations"},...cN],o1=[{provide:xA,useClass:LR},{provide:lN,useValue:"NoopAnimations"},...cN];let a1=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?o1:dN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:dN,imports:[pu]}),n})(),u1=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-navbar"]],decls:4,vars:0,consts:[[1,"navbar","navbar-dark","bg-dark"],[1,"container-fluid"],[1,"navbar-brand","mb-0","h1"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0),f.TgZ(1,"div",1),f.TgZ(2,"span",2),f._uU(3,"Website Angular - Clientes Firebase"),f.qZA(),f.qZA(),f.qZA())},styles:[""]}),n})(),l1=(()=>{class n{constructor(){this.title="clientes"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&(f._UZ(0,"app-navbar"),f._UZ(1,"router-outlet"))},directives:[u1,lf],styles:[""]}),n})();const hN_firebase={apiKey:"AIzaSyAyP2yXuv__hm9Oe3C_zFvhz8P96LYh5X0",authDomain:"clientes-94fcb.firebaseapp.com",projectId:"clientes-94fcb",storageBucket:"clientes-94fcb.appspot.com",messagingSenderId:"294421617668",appId:"1:294421617668:web:528e4ba45d9e9c76caa951",measurementId:"G-4015H29WTH"};let c1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[l1]}),n.\u0275inj=f.cJS({providers:[],imports:[[pu,zP,zs.hO.initializeApp(hN_firebase),mP,lc,jP.forRoot(),a1]]}),n})();(0,f.G48)(),id().bootstrapModule(c1).catch(n=>console.error(n))},5867:(nt,Te,P)=>{"use strict";P.d(Te,{Mq:()=>f.getApp,C6:()=>f.getApps});var f=P(9681);(0,f.registerVersion)("firebase","9.6.6","app")},127:(nt,Te,P)=>{"use strict";P.d(Te,{Z:()=>f.Z});var f=P(3942);f.Z.registerVersion("firebase","9.6.6","app-compat")},389:(nt,Te,P)=>{"use strict";P.r(Te);var f=P(5861),X=P(3942),O=P(2090),pe=P(9681),te=P(655),fe=P(1877),re=P(4859);const Ne=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},W=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Re=new fe.Yd("@firebase/auth");function Ie(y,...h){Re.logLevel<=fe.in.ERROR&&Re.error(`Auth (${pe.SDK_VERSION}): ${y}`,...h)}function ee(y,...h){throw je(y,...h)}function Se(y,...h){return je(y,...h)}function ve(y,h,g){const E=Object.assign(Object.assign({},Le()),{[h]:g});return new O.LL("auth","Firebase",E).create(h,{appName:y.name})}function He(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&ee(y,"argument-error"),ve(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const g=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(g,...E)}return W.create(y,...h)}function se(y,h,...g){if(!y)throw je(h,...g)}function Z(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ie(h),new Error(h)}function ie(y,h){y||Z(h)}const ge=new Map;function oe(y){ie(y instanceof Function,"Expected a class definition");let h=ge.get(y);return h?(ie(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ge.set(y,h),h)}function yt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function jt(){return"http:"===Rn()||"https:"===Rn()}function Rn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Fn{constructor(h,g){this.shortDelay=h,this.longDelay=g,ie(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function it(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(jt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Kt(y,h){ie(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class hr{static initialize(h,g,E){this.fetchImpl=h,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Z("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Z("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Z("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ki=new Fn(3e4,6e4);function zt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function xt(y,h,g,E){return rs.apply(this,arguments)}function rs(){return(rs=(0,f.Z)(function*(y,h,g,E,A={}){return rr(y,A,(0,f.Z)(function*(){let x={},q={};E&&("GET"===h?q=E:x={body:JSON.stringify(E)});const le=(0,O.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),hr.fetch()(Ss(y,y.config.apiHost,g,le),Object.assign({method:h,headers:Ve,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function rr(y,h,g){return As.apply(this,arguments)}function As(){return(As=(0,f.Z)(function*(y,h,g){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},qt),h);try{const A=new ai(y),x=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const q=yield x.json();if("needConfirmation"in q)throw Li(y,"account-exists-with-different-credential",q);if(x.ok&&!("errorMessage"in q))return q;{const le=x.ok?q.errorMessage:q.error.message,[Ve,Je]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Li(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Ve)throw Li(y,"email-already-in-use",q);const gt=E[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw ve(y,gt,Je);ee(y,gt)}}catch(A){if(A instanceof O.ZR)throw A;ee(y,"network-request-failed")}})).apply(this,arguments)}function Cr(y,h,g,E){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,f.Z)(function*(y,h,g,E,A={}){const x=yield xt(y,h,g,E,A);return"mfaPendingCredential"in x&&ee(y,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Ss(y,h,g,E){const A=`${h}${g}?${E}`;return y.config.emulator?Kt(y.config,A):`${y.config.apiScheme}://${A}`}class ai{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(Se(this.auth,"network-request-failed")),ki.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Li(y,h,g){const E={appName:y.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const A=Se(y,h,E);return A.customData._tokenResponse=g,A}function $r(){return($r=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Ln(y,h){return In.apply(this,arguments)}function In(){return(In=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function eo(y,h){return pt.apply(this,arguments)}function pt(){return(pt=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Ke(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function fr(){return(fr=(0,f.Z)(function*(y,h=!1){const g=(0,O.m9)(y),E=yield g.getIdToken(h),A=Ye(E);se(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const x="object"==typeof A.firebase?A.firebase:void 0,q=null==x?void 0:x.sign_in_provider;return{claims:A,token:E,authTime:Ke(Rt(A.auth_time)),issuedAtTime:Ke(Rt(A.iat)),expirationTime:Ke(Rt(A.exp)),signInProvider:q||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function Rt(y){return 1e3*Number(y)}function Ye(y){const[h,g,E]=y.split(".");if(void 0===h||void 0===g||void 0===E)return Ie("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(g);return A?JSON.parse(A):(Ie("Failed to decode base64 JWT payload"),null)}catch(A){return Ie("Caught error parsing JWT payload as JSON",A),null}}function Di(y,h){return is.apply(this,arguments)}function is(){return(is=(0,f.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(E){throw E instanceof O.ZR&&Ft(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Ft({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ma{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),E)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&h.schedule(!0))}h.schedule()})()}}class Hr{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ke(this.lastLoginAt),this.creationTime=Ke(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ui(y){return V.apply(this,arguments)}function V(){return(V=(0,f.Z)(function*(y){var h;const g=y.auth,E=yield y.getIdToken(),A=yield Di(y,eo(g,{idToken:E}));se(null==A?void 0:A.users.length,g,"internal-error");const x=A.users[0];y._notifyReloadListener(x);const q=(null===(h=x.providerUserInfo)||void 0===h?void 0:h.length)?ne(x.providerUserInfo):[],le=Ee(y.providerData,q),gt=!!y.isAnonymous&&!(y.email&&x.passwordHash||(null==le?void 0:le.length)),st={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:le,metadata:new Hr(x.createdAt,x.lastLoginAt),isAnonymous:gt};Object.assign(y,st)})).apply(this,arguments)}function H(){return(H=(0,f.Z)(function*(y){const h=(0,O.m9)(y);yield ui(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ee(y,h){return[...y.filter(E=>!h.some(A=>A.providerId===E.providerId)),...h]}function ne(y){return y.map(h=>{var{providerId:g}=h,E=(0,te._T)(h,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ft(){return(ft=(0,f.Z)(function*(y,h){const g=yield rr(y,{},(0,f.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:x}=y.config,q=Ss(y,A,"/v1/token",`key=${x}`),le=yield y._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",hr.fetch()(q,{method:"POST",headers:le,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Yt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){se(h.idToken,"internal-error"),se(void 0!==h.idToken,"internal-error"),se(void 0!==h.refreshToken,"internal-error");const g="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function at(y){const h=Ye(y);return se(h,"internal-error"),se(void 0!==h.exp,"internal-error"),se(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var E=this;return(0,f.Z)(function*(){return se(!E.accessToken||E.refreshToken,h,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var E=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:x,expiresIn:q}=yield function ze(y,h){return ft.apply(this,arguments)}(h,g);E.updateTokensAndExpiration(A,x,Number(q))})()}updateTokensAndExpiration(h,g,E){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,g){const{refreshToken:E,accessToken:A,expirationTime:x}=g,q=new Yt;return E&&(se("string"==typeof E,"internal-error",{appName:h}),q.refreshToken=E),A&&(se("string"==typeof A,"internal-error",{appName:h}),q.accessToken=A),x&&(se("number"==typeof x,"internal-error",{appName:h}),q.expirationTime=x),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Yt,this.toJSON())}_performRefresh(){return Z("not implemented")}}function rn(y,h){se("string"==typeof y||void 0===y,"internal-error",{appName:h})}class on{constructor(h){var{uid:g,auth:E,stsTokenManager:A}=h,x=(0,te._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ma(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new Hr(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const E=yield Di(g,g.stsTokenManager.getToken(g.auth,h));return se(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(h){return function sn(y){return fr.apply(this,arguments)}(this,h)}reload(){return function $(y){return H.apply(this,arguments)}(this)}_assign(h){this!==h&&(se(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new on(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var E=this;return(0,f.Z)(function*(){let A=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),A=!0),g&&(yield ui(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield Di(h,function ht(y,h){return $r.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var E,A,x,q,le,Ve,Je,gt;const st=null!==(E=g.displayName)&&void 0!==E?E:void 0,wn=null!==(A=g.email)&&void 0!==A?A:void 0,Zi=null!==(x=g.phoneNumber)&&void 0!==x?x:void 0,qa=null!==(q=g.photoURL)&&void 0!==q?q:void 0,nc=null!==(le=g.tenantId)&&void 0!==le?le:void 0,rc=null!==(Ve=g._redirectEventId)&&void 0!==Ve?Ve:void 0,vf=null!==(Je=g.createdAt)&&void 0!==Je?Je:void 0,zy=null!==(gt=g.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:ra,emailVerified:ic,isAnonymous:Ef,providerData:wf,stsTokenManager:wr}=g;se(ra&&wr,h,"internal-error");const Wy=Yt.fromJSON(this.name,wr);se("string"==typeof ra,h,"internal-error"),rn(st,h.name),rn(wn,h.name),se("boolean"==typeof ic,h,"internal-error"),se("boolean"==typeof Ef,h,"internal-error"),rn(Zi,h.name),rn(qa,h.name),rn(nc,h.name),rn(rc,h.name),rn(vf,h.name),rn(zy,h.name);const Fu=new on({uid:ra,auth:h,email:wn,emailVerified:ic,displayName:st,isAnonymous:Ef,photoURL:qa,phoneNumber:Zi,tenantId:nc,stsTokenManager:Wy,createdAt:vf,lastLoginAt:zy});return wf&&Array.isArray(wf)&&(Fu.providerData=wf.map(sc=>Object.assign({},sc))),rc&&(Fu._redirectEventId=rc),Fu}static _fromIdTokenResponse(h,g,E=!1){return(0,f.Z)(function*(){const A=new Yt;A.updateFromServerResponse(g);const x=new on({uid:g.localId,auth:h,stsTokenManager:A,isAnonymous:E});return yield ui(x),x})()}}const At=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,E){var A=this;return(0,f.Z)(function*(){A.storage[g]=E})()}_get(g){var E=this;return(0,f.Z)(function*(){const A=E.storage[g];return void 0===A?null:A})()}_remove(g){var E=this;return(0,f.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return y.type="NONE",y})();function Vn(y,h,g){return`firebase:${y}:${h}:${g}`}class Ar{constructor(h,g,E){this.persistence=h,this.auth=g,this.userKey=E;const{config:A,name:x}=this.auth;this.fullUserKey=Vn(this.userKey,A.apiKey,x),this.fullPersistenceKey=Vn("persistence",A.apiKey,x),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?on._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,E="authUser"){return(0,f.Z)(function*(){if(!g.length)return new Ar(oe(At),h,E);const A=(yield Promise.all(g.map(function(){var Je=(0,f.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let x=A[0]||oe(At);const q=Vn(E,h.config.apiKey,h.name);let le=null;for(const Je of g)try{const gt=yield Je._get(q);if(gt){const st=on._fromJSON(h,gt);Je!==x&&(le=st),x=Je;break}}catch(gt){}const Ve=A.filter(Je=>Je._shouldAllowMigration);return x._shouldAllowMigration&&Ve.length?(x=Ve[0],le&&(yield x._set(q,le.toJSON())),yield Promise.all(g.map(function(){var Je=(0,f.Z)(function*(gt){if(gt!==x)try{yield gt._remove(q)}catch(st){}});return function(gt){return Je.apply(this,arguments)}}())),new Ar(x,h,E)):new Ar(x,h,E)})()}}function su(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Un(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ya(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(ss(h))return"Blackberry";if(Bn(h))return"Webos";if(ou(h))return"Safari";if((h.includes("chrome/")||_a(h))&&!h.includes("edge/"))return"Chrome";if(Sr(h))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function ya(y=(0,O.z$)()){return/firefox\//i.test(y)}function ou(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function _a(y=(0,O.z$)()){return/crios\//i.test(y)}function Un(y=(0,O.z$)()){return/iemobile/i.test(y)}function Sr(y=(0,O.z$)()){return/android/i.test(y)}function ss(y=(0,O.z$)()){return/blackberry/i.test(y)}function Bn(y=(0,O.z$)()){return/webos/i.test(y)}function qr(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ms(y=(0,O.z$)()){return qr(y)||Sr(y)||Bn(y)||ss(y)||/windows phone/i.test(y)||Un(y)}function Po(y,h=[]){let g;switch(y){case"Browser":g=su((0,O.z$)());break;case"Worker":g=`${su((0,O.z$)())}-${y}`;break;default:g=y}const E=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${pe.SDK_VERSION}/${E}`}class zr{constructor(h,g){this.app=h,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new It(this),this.idTokenSubscription=new It(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=W,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(h,g){var E=this;return g&&(this._popupRedirectResolver=oe(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A,x;if(!E._deleted&&(E.persistenceManager=yield Ar.create(E,h),!E._deleted)){if(null===(A=E._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(q){}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(x=E.currentUser)||void 0===x?void 0:x.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var E;let A=yield g.assertedPersistence.getCurrentUser();if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const x=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,q=null==A?void 0:A._redirectEventId,le=yield g.tryRedirectSignIn(h);(!x||x===q)&&(null==le?void 0:le.user)&&(A=le.user)}return A?A._redirectEventId?(se(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===A._redirectEventId?g.directlySetCurrentUser(A):g.reloadAndSetCurrentUserOrClear(A)):g.reloadAndSetCurrentUserOrClear(A):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch(A){yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){try{yield ui(h)}catch(E){if("auth/network-request-failed"!==E.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ot(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const E=h?(0,O.m9)(h):null;return E&&se(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){if(!g._deleted)return h&&se(g.tenantId===h.tenantId,g,"tenant-id-mismatch"),g.queue((0,f.Z)(function*(){yield g.directlySetCurrentUser(h),g.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(oe(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,g,E){return this.registerStateListener(this.authStateSubscription,h,g,E)}onIdTokenChanged(h,g,E){return this.registerStateListener(this.idTokenSubscription,h,g,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var E=this;return(0,f.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(g);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const E=h&&oe(h)||g._popupRedirectResolver;se(E,g,"argument-error"),g.redirectPersistenceManager=yield Ar.create(g,[oe(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var E,A;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===h?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,E,A){if(this._deleted)return()=>{};const x="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return se(q,this,"internal-error"),q.then(()=>x(this.currentUser)),"function"==typeof g?h.addObserver(g,E,A):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&(g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh()),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Po(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){const g={"X-Client-Version":h.clientVersion};return h.app.options.appId&&(g["X-Firebase-gmpid"]=h.app.options.appId),g})()}}function Oe(y){return(0,O.m9)(y)}class It{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Mr(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Tn(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class $t{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return Z("not implemented")}_getIdTokenResponse(h){return Z("not implemented")}_linkToIdToken(h,g){return Z("not implemented")}_getReauthenticationResolver(h){return Z("not implemented")}}function no(y,h){return pn.apply(this,arguments)}function pn(){return(pn=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:resetPassword",zt(y,h))})).apply(this,arguments)}function wt(y,h){return ko.apply(this,arguments)}function ko(){return(ko=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Fo(y,h){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:update",zt(y,h))})).apply(this,arguments)}function Nn(){return(Nn=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signInWithPassword",zt(y,h))})).apply(this,arguments)}function Rs(y,h){return ro.apply(this,arguments)}function ro(){return(ro=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:sendOobCode",zt(y,h))})).apply(this,arguments)}function pr(y,h){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,f.Z)(function*(y,h){return Rs(y,h)})).apply(this,arguments)}function $c(y,h){return io.apply(this,arguments)}function io(){return(io=(0,f.Z)(function*(y,h){return Rs(y,h)})).apply(this,arguments)}function bi(y,h){return li.apply(this,arguments)}function li(){return(li=(0,f.Z)(function*(y,h){return Rs(y,h)})).apply(this,arguments)}function Hc(y,h){return au.apply(this,arguments)}function au(){return(au=(0,f.Z)(function*(y,h){return Rs(y,h)})).apply(this,arguments)}function ci(){return(ci=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signInWithEmailLink",zt(y,h))})).apply(this,arguments)}function Gc(){return(Gc=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signInWithEmailLink",zt(y,h))})).apply(this,arguments)}class uu extends $t{constructor(h,g,E,A=null){super("password",E),this._email=h,this._password=g,this._tenantId=A}static _fromEmailAndPassword(h,g){return new uu(h,g,"password")}static _fromEmailAndCode(h,g,E=null){return new uu(h,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function Vo(y,h){return Nn.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ns(y,h){return ci.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:ee(h,"internal-error")}})()}_linkToIdToken(h,g){var E=this;return(0,f.Z)(function*(){switch(E.signInMethod){case"password":return wt(h,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function $h(y,h){return Gc.apply(this,arguments)}(h,{idToken:g,email:E._email,oobCode:E._password});default:ee(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function xn(y,h){return qc.apply(this,arguments)}function qc(){return(qc=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signInWithIdp",zt(y,h))})).apply(this,arguments)}class us extends $t{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new us(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):ee("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:A}=g,x=(0,te._T)(g,["providerId","signInMethod"]);if(!E||!A)return null;const q=new us(E,A);return q.idToken=x.idToken||void 0,q.accessToken=x.accessToken||void 0,q.secret=x.secret,q.nonce=x.nonce,q.pendingToken=x.pendingToken||null,q}_getIdTokenResponse(h){return xn(h,this.buildRequest())}_linkToIdToken(h,g){const E=this.buildRequest();return E.idToken=g,xn(h,E)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,xn(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,O.xO)(g)}return h}}function og(y,h){return zc.apply(this,arguments)}function zc(){return(zc=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:sendVerificationCode",zt(y,h))})).apply(this,arguments)}function Ea(){return(Ea=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,h))})).apply(this,arguments)}function Wc(){return(Wc=(0,f.Z)(function*(y,h){const g=yield Cr(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,h));if(g.temporaryProof)throw Li(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const ug={USER_NOT_FOUND:"user-not-found"};function Zc(){return(Zc=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),ug)})).apply(this,arguments)}class Bo extends $t{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Bo({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Bo({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function ag(y,h){return Ea.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function Uo(y,h){return Wc.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function lg(y,h){return Zc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:E,verificationCode:A}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:E,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:E,phoneNumber:A,temporaryProof:x}=h;return E||g||A||x?new Bo({verificationId:g,verificationCode:E,phoneNumber:A,temporaryProof:x}):null}}class ls{constructor(h){var g,E,A,x,q,le;const Ve=(0,O.zd)((0,O.pd)(h)),Je=null!==(g=Ve.apiKey)&&void 0!==g?g:null,gt=null!==(E=Ve.oobCode)&&void 0!==E?E:null,st=function cg(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ve.mode)&&void 0!==A?A:null);se(Je&&gt&&st,"argument-error"),this.apiKey=Je,this.operation=st,this.code=gt,this.continueUrl=null!==(x=Ve.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(q=Ve.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(le=Ve.tenantId)&&void 0!==le?le:null}static parseLink(h){const g=function Hh(y){const h=(0,O.zd)((0,O.pd)(y)).link,g=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||g||h||y}(h);try{return new ls(g)}catch(E){return null}}}let wa=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,E){return uu._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const A=ls.parseLink(E);return se(A,"argument-error"),uu._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class xs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class di extends xs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class so extends di{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return se("providerId"in g&&"signInMethod"in g,"argument-error"),us._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return se(h.idToken||h.accessToken,"argument-error"),us._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return so.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return so.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:x,nonce:q,providerId:le}=h;if(!E&&!A&&!g&&!x||!le)return null;try{return new so(le)._credential({idToken:g,accessToken:E,nonce:q,pendingToken:x})}catch(Ve){return null}}}let jo=(()=>{class y extends di{constructor(){super("facebook.com")}static credential(g){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),$o=(()=>{class y extends di{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:A}=g;if(!E&&!A)return null;try{return y.credential(E,A)}catch(x){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Kc=(()=>{class y extends di{constructor(){super("github.com")}static credential(g){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Os extends $t{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return xn(h,this.buildRequest())}_linkToIdToken(h,g){const E=this.buildRequest();return E.idToken=g,xn(h,E)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,xn(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:A,pendingToken:x}=g;return E&&A&&x&&E===A?new Os(E,x):null}static _create(h,g){return new Os(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class cs extends xs{constructor(h){se(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return cs.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return cs.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Os.fromJSON(h);return se(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:E}=h;if(!g||!E)return null;try{return Os._create(E,g)}catch(A){return null}}}let hi=(()=>{class y extends di{constructor(){super("twitter.com")}static credential(g,E){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=g;if(!E||!A)return null;try{return y.credential(E,A)}catch(x){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Qc(y,h){return gr.apply(this,arguments)}function gr(){return(gr=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signUp",zt(y,h))})).apply(this,arguments)}class mr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,E,A=!1){return(0,f.Z)(function*(){const x=yield on._fromIdTokenResponse(h,E,A),q=Jc(E);return new mr({user:x,providerId:q,_tokenResponse:E,operationType:g})})()}static _forOperation(h,g,E){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const A=Jc(E);return new mr({user:h,providerId:A,_tokenResponse:E,operationType:g})})()}}function Jc(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function lu(){return(lu=(0,f.Z)(function*(y){var h;const g=Oe(y);if(yield g._initializationPromise,null===(h=g.currentUser)||void 0===h?void 0:h.isAnonymous)return new mr({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield Qc(g,{returnSecureToken:!0}),A=yield mr._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class cu extends O.ZR{constructor(h,g,E,A){var x;super(g.code,g.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,cu.prototype),this.customData={appName:h.name,tenantId:null!==(x=h.tenantId)&&void 0!==x?x:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,g,E,A){return new cu(h,g,E,A)}}function du(y,h,g,E){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?cu._fromErrorAndOperation(y,x,h,E):x})}function yl(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function _l(){return(_l=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y);yield Ps(!0,g,h);const{providerUserInfo:E}=yield Ln(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),A=yl(E||[]);return g.providerData=g.providerData.filter(x=>A.has(x.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function tn(y,h){return Da.apply(this,arguments)}function Da(){return(Da=(0,f.Z)(function*(y,h,g=!1){const E=yield Di(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return mr._forOperation(y,"link",E)})).apply(this,arguments)}function Ps(y,h,g){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,f.Z)(function*(y,h,g){yield ui(h);const A=!1===y?"provider-already-linked":"no-such-provider";se(yl(h.providerData).has(g)===y,h.auth,A)})).apply(this,arguments)}function hu(y,h){return ba.apply(this,arguments)}function ba(){return(ba=(0,f.Z)(function*(y,h,g=!1){const{auth:E}=y,A="reauthenticate";try{const x=yield Di(y,du(E,A,h,y),g);se(x.idToken,E,"internal-error");const q=Ye(x.idToken);se(q,E,"internal-error");const{sub:le}=q;return se(y.uid===le,E,"user-mismatch"),mr._forOperation(y,A,x)}catch(x){throw"auth/user-not-found"===(null==x?void 0:x.code)&&ee(E,"user-mismatch"),x}})).apply(this,arguments)}function oo(y,h){return qn.apply(this,arguments)}function qn(){return(qn=(0,f.Z)(function*(y,h,g=!1){const E="signIn",A=yield du(y,E,h),x=yield mr._fromIdTokenResponse(y,E,A);return g||(yield y._updateCurrentUser(x.user)),x})).apply(this,arguments)}function fu(y,h){return gn.apply(this,arguments)}function gn(){return(gn=(0,f.Z)(function*(y,h){return oo(Oe(y),h)})).apply(this,arguments)}function hs(y,h){return zn.apply(this,arguments)}function zn(){return(zn=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y);return yield Ps(!1,g,h.providerId),tn(g,h)})).apply(this,arguments)}function Ho(y,h){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,f.Z)(function*(y,h){return hu((0,O.m9)(y),h)})).apply(this,arguments)}function vl(y,h){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,f.Z)(function*(y,h){return Cr(y,"POST","/v1/accounts:signInWithCustomToken",zt(y,h))})).apply(this,arguments)}function Fs(){return(Fs=(0,f.Z)(function*(y,h){const g=Oe(y),E=yield vl(g,{token:h,returnSecureToken:!0}),A=yield mr._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class ut{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?Ia._fromServerResponse(h,g):ee(h,"internal-error")}}class Ia extends ut{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new Ia(g)}}function Ta(y,h,g){var E;se((null===(E=g.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),se(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(se(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(se(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function Ca(){return(Ca=(0,f.Z)(function*(y,h,g){const E=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:h};g&&Ta(E,A,g),yield $c(E,A)})).apply(this,arguments)}function Aa(){return(Aa=(0,f.Z)(function*(y,h,g){yield no((0,O.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function De(){return(De=(0,f.Z)(function*(y,h){yield Fo((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Nt(y,h){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y),E=yield no(g,{oobCode:h}),A=E.requestType;switch(se(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":se(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":se(E.mfaInfo,g,"internal-error");default:se(E.email,g,"internal-error")}let x=null;return E.mfaInfo&&(x=ut._fromServerResponse(Oe(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:x},operation:A}})).apply(this,arguments)}function Ls(){return(Ls=(0,f.Z)(function*(y,h){const{data:g}=yield Nt((0,O.m9)(y),h);return g.email})).apply(this,arguments)}function Rr(){return(Rr=(0,f.Z)(function*(y,h,g){const E=Oe(y),A=yield Qc(E,{returnSecureToken:!0,email:h,password:g}),x=yield mr._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(x.user),x})).apply(this,arguments)}function td(){return(td=(0,f.Z)(function*(y,h,g){const E=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};se(g.handleCodeInApp,E,"argument-error"),g&&Ta(E,A,g),yield bi(E,A)})).apply(this,arguments)}function Go(){return(Go=(0,f.Z)(function*(y,h,g){const E=(0,O.m9)(y),A=wa.credentialWithLink(h,g||yt());return se(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),fu(E,A)})).apply(this,arguments)}function jn(y,h){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:createAuthUri",zt(y,h))})).apply(this,arguments)}function Ui(){return(Ui=(0,f.Z)(function*(y,h){const E={identifier:h,continueUri:jt()?yt():"http://localhost"},{signinMethods:A}=yield jn((0,O.m9)(y),E);return A||[]})).apply(this,arguments)}function Na(){return(Na=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Ta(g.auth,A,h);const{email:x}=yield pr(g.auth,A);x!==y.email&&(yield y.reload())})).apply(this,arguments)}function xa(){return(xa=(0,f.Z)(function*(y,h,g){const E=(0,O.m9)(y),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&Ta(E.auth,x,g);const{email:q}=yield Hc(E.auth,x);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function id(y,h){return ao.apply(this,arguments)}function ao(){return(ao=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Oa(){return(Oa=(0,f.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const E=(0,O.m9)(y),x={idToken:yield E.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},q=yield Di(E,id(E.auth,x));E.displayName=q.displayName||null,E.photoURL=q.photoUrl||null;const le=E.providerData.find(({providerId:Ve})=>"password"===Ve);le&&(le.displayName=E.displayName,le.photoURL=E.photoURL),yield E._updateTokensIfNecessary(q)})).apply(this,arguments)}function gu(y,h,g){return uo.apply(this,arguments)}function uo(){return(uo=(0,f.Z)(function*(y,h,g){const{auth:E}=y,x={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(x.email=h),g&&(x.password=g);const q=yield Di(y,wt(E,x));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class lo{constructor(h,g,E={}){this.isNewUser=h,this.providerId=g,this.profile=E}}class sd extends lo{constructor(h,g,E,A){super(h,g,E),this.username=A}}class qh extends lo{constructor(h,g){super(h,"facebook.com",g)}}class qo extends sd{constructor(h,g){super(h,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Bi extends lo{constructor(h,g){super(h,"google.com",g)}}class zh extends sd{constructor(h,g,E){super(h,"twitter.com",g,E)}}function Wn(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Tl(y){var h,g;if(!y)return null;const{providerId:E}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},x=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const q=null===(g=null===(h=Ye(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new lo(x,"anonymous"!==q&&"custom"!==q?q:null)}if(!E)return null;switch(E){case"facebook.com":return new qh(x,A);case"github.com":return new qo(x,A);case"google.com":return new Bi(x,A);case"twitter.com":return new zh(x,A,y.screenName||null);case"custom":case"anonymous":return new lo(x,null);default:return new lo(x,E,A)}}(g)}class gs{constructor(h,g){this.type=h,this.credential=g}static _fromIdtoken(h){return new gs("enroll",h)}static _fromMfaPendingCredential(h){return new gs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,E;if(null==h?void 0:h.multiFactorSession){if(null===(g=h.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return gs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return gs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Pa{constructor(h,g,E){this.session=h,this.hints=g,this.signInResolver=E}static _fromError(h,g){const E=Oe(h),A=g.customData._serverResponse,x=(A.mfaInfo||[]).map(le=>ut._fromServerResponse(E,le));se(A.mfaPendingCredential,E,"internal-error");const q=gs._fromMfaPendingCredential(A.mfaPendingCredential);return new Pa(q,x,function(){var le=(0,f.Z)(function*(Ve){const Je=yield Ve._process(E,q);delete A.mfaInfo,delete A.mfaPendingCredential;const gt=Object.assign(Object.assign({},A),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(g.operationType){case"signIn":const st=yield mr._fromIdTokenResponse(E,g.operationType,gt);return yield E._updateCurrentUser(st.user),st;case"reauthenticate":return se(g.user,E,"internal-error"),mr._forOperation(g.user,g.operationType,gt);default:ee(E,"internal-error")}});return function(Ve){return le.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}function mu(y,h){return xt(y,"POST","/v2/accounts/mfaEnrollment:start",zt(y,h))}class ms{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>ut._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new ms(h)}getSession(){var h=this;return(0,f.Z)(function*(){return gs._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,g){var E=this;return(0,f.Z)(function*(){const A=h,x=yield E.getSession(),q=yield Di(E.user,A._process(E.user.auth,x,g));return yield E.user._updateTokensIfNecessary(q),E.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){const E="string"==typeof h?h:h.uid,A=yield g.user.getIdToken(),x=yield Di(g.user,function Zh(y,h){return xt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(y,h))}(g.user.auth,{idToken:A,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:q})=>q!==E),yield g.user._updateTokensIfNecessary(x);try{yield g.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const zo=new WeakMap,ka="__sak";class co{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ka,"1"),this.storage.removeItem(ka),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vs=(()=>{class y extends co{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Fa(){const y=(0,O.z$)();return ou(y)||qr(y)}()&&function ir(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ms(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),x=this.localCache[E];A!==x&&g(E,x,A)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((le,Ve,Je)=>{this.notifyListeners(le,Je)});const A=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(A);if(g.newValue!==le)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!E)return}const x=()=>{const le=this.storage.getItem(A);!E&&this.localCache[A]===le||this.notifyListeners(A,le)},q=this.storage.getItem(A);!function va(){return(0,O.w1)()&&10===document.documentMode}()||q===g.newValue||g.newValue===g.oldValue?x():setTimeout(x,10)}notifyListeners(g,E){this.localCache[g]=E;const A=this.listeners[g];if(A)for(const x of Array.from(A))x(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var A=()=>super._set,x=this;return(0,f.Z)(function*(){yield A().call(x,g,E),x.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,A=this;return(0,f.Z)(function*(){const x=yield E().call(A,g);return A.localCache[g]=JSON.stringify(x),x})()}_remove(g){var E=()=>super._remove,A=this;return(0,f.Z)(function*(){yield E().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),ln=(()=>{class y extends co{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return y.type="SESSION",y})();let yr=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(x=>x.isListeningto(g));if(E)return E;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,f.Z)(function*(){const A=g,{eventId:x,eventType:q,data:le}=A.data,Ve=E.handlersMap[q];if(!(null==Ve?void 0:Ve.size))return;A.ports[0].postMessage({status:"ack",eventId:x,eventType:q});const Je=Array.from(Ve).map(function(){var st=(0,f.Z)(function*(wn){return wn(A.origin,le)});return function(wn){return st.apply(this,arguments)}}()),gt=yield function Zr(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return h.apply(this,arguments)}}()))}(Je);A.ports[0].postMessage({status:"done",eventId:x,eventType:q,response:gt})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ho(y="",h=10){let g="";for(let E=0;E<h;E++)g+=Math.floor(10*Math.random());return y+g}class ud{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,E=50){var A=this;return(0,f.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let q,le;return new Promise((Ve,Je)=>{const gt=ho("",20);x.port1.start();const st=setTimeout(()=>{Je(new Error("unsupported_event"))},E);le={messageChannel:x,onMessage(wn){const Zi=wn;if(Zi.data.eventId===gt)switch(Zi.data.status){case"ack":clearTimeout(st),q=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Ve(Zi.data.response);break;default:clearTimeout(st),clearTimeout(q),Je(new Error("invalid_response"))}}},A.handlers.add(le),x.port1.addEventListener("message",le.onMessage),A.target.postMessage({eventType:h,eventId:gt,data:g},[x.port2])}).finally(()=>{le&&A.removeMessageHandler(le)})})()}}function an(){return window}function ys(){return void 0!==an().WorkerGlobalScope&&"function"==typeof an().importScripts}function Ti(){return(Ti=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Ml="firebaseLocalStorageDb",Va="firebaseLocalStorage",yn="fbase_key";class fo{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Us(y,h){return y.transaction([Va],h?"readwrite":"readonly").objectStore(Va)}function _r(){const y=indexedDB.open(Ml,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(Va,{keyPath:yn})}catch(A){g(A)}}),y.addEventListener("success",(0,f.Z)(function*(){const E=y.result;E.objectStoreNames.contains(Va)?h(E):(E.close(),yield function yu(){const y=indexedDB.deleteDatabase(Ml);return new fo(y).toPromise()}(),h(yield _r()))}))})}function Rl(y,h,g){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,f.Z)(function*(y,h,g){const E=Us(y,!0).put({[yn]:h,value:g});return new fo(E).toPromise()})).apply(this,arguments)}function Ua(){return(Ua=(0,f.Z)(function*(y,h){const g=Us(y,!1).get(h),E=yield new fo(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Wo(y,h){const g=Us(y,!0).delete(h);return new fo(g).toPromise()}const Ci=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield _r()),g.db})()}_withRetries(g){var E=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const x=yield E._openDb();return yield g(x)}catch(x){if(A++>3)throw x;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return ys()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=yr._getInstance(function ld(){return ys()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,f.Z)(function*(A,x){return{keyProcessed:(yield g._poll()).includes(x.key)}});return function(A,x){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,f.Z)(function*(A,x){return["keyChanged"]});return function(A,x){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var E,A;if(g.activeServiceWorker=yield function La(){return Ti.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new ud(g.activeServiceWorker);const x=yield g.sender._send("ping",{},800);!x||(null===(E=x[0])||void 0===E?void 0:E.fulfilled)&&(null===(A=x[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,f.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Tt(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield _r();return yield Rl(g,ka,"1"),yield Wo(g,ka),!0}catch(g){}return!1})()}_withPendingWrite(g){var E=this;return(0,f.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(x=>Rl(x,g,E)),A.localCache[g]=E,A.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,f.Z)(function*(){const A=yield E._withRetries(x=>function js(y,h){return Ua.apply(this,arguments)}(x,g));return E.localCache[g]=A,A})()}_remove(g){var E=this;return(0,f.Z)(function*(){return E._withPendingWrite((0,f.Z)(function*(){return yield E._withRetries(A=>Wo(A,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const E=yield g._withRetries(q=>{const le=Us(q,!1).getAll();return new fo(le).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const A=[],x=new Set;for(const{fbase_key:q,value:le}of E)x.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(le)&&(g.notifyListeners(q,le),A.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!x.has(q)&&(g.notifyListeners(q,null),A.push(q));return A})()}notifyListeners(g,E){this.localCache[g]=E;const A=this.listeners[g];if(A)for(const x of Array.from(A))x(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Kr(y,h){return xt(y,"POST","/v2/accounts/mfaSignIn:start",zt(y,h))}function hn(){return(hn=(0,f.Z)(function*(y){return(yield xt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function go(y){return new Promise((h,g)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=h,E.onerror=A=>{const x=Se("internal-error");x.customData=A,g(x)},E.type="text/javascript",E.charset="UTF-8",function Zo(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(E)})}function Ko(y){return`__${y}${Math.floor(1e6*Math.random())}`}const or=1e12;class On{constructor(h){this.auth=h,this.counter=or,this._widgets=new Map}render(h,g){const E=this.counter;return this._widgets.set(E,new xl(h,this.auth.name,g||{})),this.counter++,E}reset(h){var g;const E=h||or;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(h){var g;return(null===(g=this._widgets.get(h||or))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var E;return null===(E=g._widgets.get(h||or))||void 0===E||E.execute(),""})()}}class xl{constructor(h,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;se(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function $i(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Eu=Ko("rcb"),wu=new Fn(3e4,6e4);class Kh{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!an().grecaptcha}load(h,g=""){return se(function Sy(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(an().grecaptcha):new Promise((E,A)=>{const x=an().setTimeout(()=>{A(Se(h,"network-request-failed"))},wu.get());an()[Eu]=()=>{an().clearTimeout(x),delete an()[Eu];const le=an().grecaptcha;if(!le)return void A(Se(h,"internal-error"));const Ve=le.render;le.render=(Je,gt)=>{const st=Ve(Je,gt);return this.counter++,st},this.hostLanguage=g,E(le)},go(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Eu,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(x),A(Se(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!an().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ba{load(h){return(0,f.Z)(function*(){return new On(h)})()}clearedOneInstance(){}}const Yr="recaptcha",Yh={theme:"light",type:"image"};class _s{constructor(h,g=Object.assign({},Yh),E){this.parameters=g,this.type=Yr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Oe(E),this.isInvisible="invisible"===this.parameters.size,se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;se(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ba:new Kh,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(g)||new Promise(x=>{const q=le=>{!le||(h.tokenChangeListeners.delete(q),x(le))};h.tokenChangeListeners.add(q),h.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){se(!this.parameters.sitekey,this.auth,"argument-error"),se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof h)h(g);else if("string"==typeof h){const E=an()[h];"function"==typeof E&&E(g)}}}assertNotDestroyed(){se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){se(jt()&&!ys(),h.auth,"internal-error"),yield function dd(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function vu(y){return hn.apply(this,arguments)}(h.auth);se(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ai{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Bo._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function vn(){return(vn=(0,f.Z)(function*(y,h,g){const E=Oe(y),A=yield vr(E,h,(0,O.m9)(g));return new Ai(A,x=>fu(E,x))})).apply(this,arguments)}function mo(){return(mo=(0,f.Z)(function*(y,h,g){const E=(0,O.m9)(y);yield Ps(!1,E,"phone");const A=yield vr(E.auth,h,(0,O.m9)(g));return new Ai(A,x=>hs(E,x))})).apply(this,arguments)}function Pl(){return(Pl=(0,f.Z)(function*(y,h,g){const E=(0,O.m9)(y),A=yield vr(E.auth,h,(0,O.m9)(g));return new Ai(A,x=>Ho(E,x))})).apply(this,arguments)}function vr(y,h,g){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,f.Z)(function*(y,h,g){var E;const A=yield g.verify();try{let x;if(se("string"==typeof A,y,"argument-error"),se(g.type===Yr,y,"argument-error"),x="string"==typeof h?{phoneNumber:h}:h,"session"in x){const q=x.session;if("phoneNumber"in x)return se("enroll"===q.type,y,"internal-error"),(yield mu(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{se("signin"===q.type,y,"internal-error");const le=(null===(E=x.multiFactorHint)||void 0===E?void 0:E.uid)||x.multiFactorUid;return se(le,y,"missing-multi-factor-info"),(yield Kr(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield og(y,{phoneNumber:x.phoneNumber,recaptchaToken:A});return q}}finally{g._reset()}})).apply(this,arguments)}function Yo(){return(Yo=(0,f.Z)(function*(y,h){yield tn((0,O.m9)(y),h)})).apply(this,arguments)}let Hi=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Oe(g)}verifyPhoneNumber(g,E){return vr(this.auth,g,(0,O.m9)(E))}static credential(g,E){return Bo._fromVerification(g,E)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:A}=g;return E&&A?Bo._fromTokenResponse(E,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Gi(y,h){return h?oe(h):(se(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Du extends $t{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return xn(h,this._buildIdpRequest())}_linkToIdToken(h,g){return xn(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return xn(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function bu(y){return oo(y.auth,new Du(y),y.bypassAuthState)}function St(y){const{auth:h,user:g}=y;return se(g,h,"internal-error"),hu(g,new Du(y),y.bypassAuthState)}function hd(y){return Si.apply(this,arguments)}function Si(){return(Si=(0,f.Z)(function*(y){const{auth:h,user:g}=y;return se(g,h,"internal-error"),tn(g,new Du(y),y.bypassAuthState)})).apply(this,arguments)}class Nr{constructor(h,g,E,A,x=!1){this.auth=h,this.resolver=E,this.user=A,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(E,A){h.pendingPromise={resolve:E,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(x){h.reject(x)}});return function(E,A){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:x,tenantId:q,error:le,type:Ve}=h;if(le)return void g.reject(le);const Je={auth:g.auth,requestUri:E,sessionId:A,tenantId:q||void 0,postBody:x||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ve)(Je))}catch(gt){g.reject(gt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return bu;case"linkViaPopup":case"linkViaRedirect":return hd;case"reauthViaPopup":case"reauthViaRedirect":return St;default:ee(this.auth,"internal-error")}}resolve(h){ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Iu=new Fn(2e3,1e4);function fd(){return(fd=(0,f.Z)(function*(y,h,g){const E=Oe(y);He(y,h,xs);const A=Gi(E,g);return new Cu(E,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function Kn(){return(Kn=(0,f.Z)(function*(y,h,g){const E=(0,O.m9)(y);He(E.auth,h,xs);const A=Gi(E.auth,g);return new Cu(E.auth,"reauthViaPopup",h,A,E).executeNotNull()})).apply(this,arguments)}function Tu(){return(Tu=(0,f.Z)(function*(y,h,g){const E=(0,O.m9)(y);He(E.auth,h,xs);const A=Gi(E.auth,g);return new Cu(E.auth,"linkViaPopup",h,A,E).executeNotNull()})).apply(this,arguments)}let Cu=(()=>{class y extends Nr{constructor(g,E,A,x,q){super(g,E,x,q),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const E=yield g.execute();return se(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,f.Z)(function*(){ie(1===g.filter.length,"Popup operations only handle one event");const E=ho();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(Se(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,A;this.pollId=(null===(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Se(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Iu.get())};g()}}return y.currentPopupAction=null,y})();const En=new Map;class $n extends Nr{constructor(h,g,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let E=En.get(g.auth._key());if(!E){try{const x=(yield function Ll(y,h){return Jh.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;E=()=>Promise.resolve(x)}catch(A){E=()=>Promise.reject(A)}En.set(g.auth._key(),E)}return g.bypassAuthState||En.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,E=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(E,h);if("unknown"!==h.type){if(h.eventId){const A=yield E.auth._redirectUserForId(h.eventId);if(A)return E.user=A,g().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Jh(){return(Jh=(0,f.Z)(function*(y,h){const g=b(h),E=gd(y);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(g));return yield E._remove(g),A})).apply(this,arguments)}function vs(y,h){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,f.Z)(function*(y,h){return gd(y)._set(b(h),"true")})).apply(this,arguments)}function gd(y){return oe(y._redirectPersistence)}function b(y){return Vn("pendingRedirect",y.config.apiKey,y.name)}function F(){return(F=(0,f.Z)(function*(y,h,g){const E=Oe(y);He(y,h,xs);const A=Gi(E,g);return yield vs(A,E),A._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function Ce(){return(Ce=(0,f.Z)(function*(y,h,g){const E=(0,O.m9)(y);He(E.auth,h,xs);const A=Gi(E.auth,g);yield vs(A,E.auth);const x=yield Es(E);return A._openRedirect(E.auth,h,"reauthViaRedirect",x)})).apply(this,arguments)}function Lt(){return(Lt=(0,f.Z)(function*(y,h,g){const E=(0,O.m9)(y);He(E.auth,h,xs);const A=Gi(E.auth,g);yield Ps(!1,E,h.providerId),yield vs(A,E.auth);const x=yield Es(E);return A._openRedirect(E.auth,h,"linkViaRedirect",x)})).apply(this,arguments)}function An(){return(An=(0,f.Z)(function*(y,h){return yield Oe(y)._initializationPromise,Er(y,h,!1)})).apply(this,arguments)}function Er(y,h){return fn.apply(this,arguments)}function fn(){return(fn=(0,f.Z)(function*(y,h,g=!1){const E=Oe(y),A=Gi(E,h),q=yield new $n(E,A,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield E._persistUserIfCurrent(q.user),yield E._setRedirectUser(null,h)),q})).apply(this,arguments)}function Es(y){return qi.apply(this,arguments)}function qi(){return(qi=(0,f.Z)(function*(y){const h=ho(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class ws{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(g=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Xh(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xo(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var E;if(h.error&&!Xo(h)){const A=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(Se(this.auth,A))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const E=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Or(h))}saveEventToCache(h){this.cachedEventUids.add(Or(h)),this.lastProcessedEventTime=Date.now()}}function Or(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Xo({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Vl(y){return Su.apply(this,arguments)}function Su(){return(Su=(0,f.Z)(function*(y,h={}){return xt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const gg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ry=/^https?/;function ea(){return(ea=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Vl(y);for(const g of h)try{if(Ul(g))return}catch(E){}ee(y,"unauthorized-domain")})).apply(this,arguments)}function Ul(y){const h=yt(),{protocol:g,hostname:E}=new URL(h);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===E?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===E}if(!Ry.test(g))return!1;if(gg.test(y))return E===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const Ny=new Fn(3e4,6e4);function xy(){const y=an().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Bl=null;function yg(y){return Bl=Bl||function mg(y){return new Promise((h,g)=>{var E,A,x;function q(){xy(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{xy(),g(Se(y,"network-request-failed"))},timeout:Ny.get()})}if(null===(A=null===(E=an().gapi)||void 0===E?void 0:E.iframes)||void 0===A?void 0:A.Iframe)h(gapi.iframes.getContext());else{if(!(null===(x=an().gapi)||void 0===x?void 0:x.load)){const le=Ko("iframefcb");return an()[le]=()=>{gapi.load?q():g(Se(y,"network-request-failed"))},go(`https://apis.google.com/js/api.js?onload=${le}`).catch(Ve=>g(Ve))}q()}}).catch(h=>{throw Bl=null,h})}(y),Bl}const ef=new Fn(5e3,15e3),jl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ru(y){const h=y.config;se(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?Kt(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:y.name,v:pe.SDK_VERSION},A=yd.get(y.config.apiHost);A&&(E.eid=A);const x=y._getFrameworks();return x.length&&(E.fw=x.join(",")),`${g}?${(0,O.xO)(E).slice(1)}`}function _d(){return _d=(0,f.Z)(function*(y){const h=yield yg(y),g=an().gapi;return se(g,y,"internal-error"),h.open({where:document.body,url:Ru(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jl,dontclear:!0},E=>new Promise(function(){var A=(0,f.Z)(function*(x,q){yield E.restyle({setHideOnLeave:!1});const le=Se(y,"network-request-failed"),Ve=an().setTimeout(()=>{q(le)},ef.get());function Je(){an().clearTimeout(Ve),x(E)}E.ping(Je).then(Je,()=>{q(le)})});return function(x,q){return A.apply(this,arguments)}}()))}),_d.apply(this,arguments)}const n0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class $l{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function nf(y,h,g,E,A,x){se(y.config.authDomain,y,"auth-domain-config-required"),se(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:E,v:pe.SDK_VERSION,eventId:A};if(h instanceof xs){h.setDefaultLanguage(y.languageCode),q.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(q.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ve,Je]of Object.entries(x||{}))q[Ve]=Je}if(h instanceof di){const Ve=h.getScopes().filter(Je=>""!==Je);Ve.length>0&&(q.scopes=Ve.join(","))}y.tenantId&&(q.tid=y.tenantId);const le=q;for(const Ve of Object.keys(le))void 0===le[Ve]&&delete le[Ve];return`${function ky({config:y}){return y.emulator?Kt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(le).slice(1)}`}const fi="webStorageSupport";class wd extends class _g{constructor(h){this.factorId=h}_process(h,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,E);case"signin":return this._finalizeSignIn(h,g.credential);default:return Z("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new wd(h)}_finalizeEnroll(h,g,E){return function Zn(y,h){return xt(y,"POST","/v2/accounts/mfaEnrollment:finalize",zt(y,h))}(h,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Nl(y,h){return xt(y,"POST","/v2/accounts/mfaSignIn:finalize",zt(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fy=(()=>{class y{constructor(){}static assertion(g){return wd._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Dd="@firebase/auth";class Eg{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(E=>{var A;h((null===(A=E)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ha(){return window}function ta(){return(ta=(0,f.Z)(function*(y,h,g){var E;const{BuildInfo:A}=Ha();ie(h.sessionId,"AuthEvent did not contain a session ID");const x=yield r0(h.sessionId),q={};return qr()?q.ibi=A.packageName:Sr()?q.apn=A.packageName:ee(y,"operation-not-supported-in-this-environment"),A.displayName&&(q.appDisplayName=A.displayName),q.sessionId=x,nf(y,g,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,q)})).apply(this,arguments)}function zi(){return(zi=(0,f.Z)(function*(y){const{BuildInfo:h}=Ha(),g={};qr()?g.iosBundleId=h.packageName:Sr()?g.androidPackageName=h.packageName:ee(y,"operation-not-supported-in-this-environment"),yield Vl(y,g)})).apply(this,arguments)}function xu(){return(xu=(0,f.Z)(function*(y,h,g){const{cordova:E}=Ha();let A=()=>{};try{yield new Promise((x,q)=>{let le=null;function Ve(){var st;x();const wn=null===(st=E.plugins.browsertab)||void 0===st?void 0:st.close;"function"==typeof wn&&wn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Je(){le||(le=window.setTimeout(()=>{q(Se(y,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===(null==document?void 0:document.visibilityState)&&Je()}h.addPassiveListener(Ve),document.addEventListener("resume",Je,!1),Sr()&&document.addEventListener("visibilitychange",gt,!1),A=()=>{h.removePassiveListener(Ve),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",gt,!1),le&&window.clearTimeout(le)}})}finally{A()}})).apply(this,arguments)}function r0(y){return na.apply(this,arguments)}function na(){return(na=(0,f.Z)(function*(y){const h=s0(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function s0(y){if(ie(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let E=0;E<y.length;E++)g[E]=y.charCodeAt(E);return g}!function wg(y){(0,pe._registerComponent)(new re.wA("auth",(h,{options:g})=>{const E=h.getProvider("app").getImmediate(),{apiKey:A,authDomain:x}=E.options;return(q=>{se(A&&!A.includes(":"),"invalid-api-key",{appName:q.name}),se(!(null==x?void 0:x.includes(":")),"argument-error",{appName:q.name});const le={apiKey:A,authDomain:x,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Po(y)},Ve=new zr(q,le);return function he(y,h){const g=(null==h?void 0:h.persistence)||[],E=(Array.isArray(g)?g:[g]).map(oe);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(Ve,g),Ve})(E)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,E)=>{h.getProvider("auth-internal").initialize()})),(0,pe._registerComponent)(new re.wA("auth-internal",h=>{const g=Oe(h.getProvider("auth").getImmediate());return new Eg(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,pe.registerVersion)(Dd,"0.19.8",function Ly(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,pe.registerVersion)(Dd,"0.19.8","esm2017")}("Browser");class af extends ws{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function zl(y){return Id.apply(this,arguments)}function Id(){return(Id=(0,f.Z)(function*(y){const h=yield cf()._get(Td(y));return h&&(yield cf()._remove(Td(y))),h})).apply(this,arguments)}function lf(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const E=Math.floor(Math.random()*h.length);y.push(h.charAt(E))}return y.join("")}function cf(){return oe(Vs)}function Td(y){return Vn("authEvent",y.config.apiKey,y.name)}function Zl(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function Ad(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Se("no-auth-event")}}function Md(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Yl(y=(0,O.z$)()){return!("file:"!==Md()&&"ionic:"!==Md()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yn(){try{const y=self.localStorage,h=ho();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Pu(y=(0,O.z$)()){return function jy(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Rd(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return ku()&&(0,O.hl)()}return!1}function ku(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Nd(){return(function By(){return"http:"===Md()||"https:"===Md()}()||(0,O.ru)()||Yl())&&!function Tg(){return(0,O.b$)()||(0,O.UG)()}()&&Yn()&&!ku()}function hf(){return Yl()&&"undefined"!=typeof document}function Ga(){return(Ga=(0,f.Z)(function*(){return!!hf()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Jr={LOCAL:"local",NONE:"none",SESSION:"session"},Ql=se,xd="persistence";function Pd(y){return pf.apply(this,arguments)}function pf(){return(pf=(0,f.Z)(function*(y){yield y._initializationPromise;const h=Cg(),g=Vn(xd,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function Cg(){var y;try{return(null===(y=function ff(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const Xl=se;class Gs{constructor(){this.browserResolver=oe(class Hs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ln,this._completeRedirectFn=Er}_openPopup(h,g,E,A){var x=this;return(0,f.Z)(function*(){var q;ie(null===(q=x.eventManagers[h._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const le=nf(h,g,E,yt(),A);return function _o(y,h,g,E=500,A=600){const x=Math.max((window.screen.availHeight-A)/2,0).toString(),q=Math.max((window.screen.availWidth-E)/2,0).toString();let le="";const Ve=Object.assign(Object.assign({},n0),{width:E.toString(),height:A.toString(),top:x,left:q}),Je=(0,O.z$)().toLowerCase();g&&(le=_a(Je)?"_blank":g),ya(Je)&&(h=h||"http://localhost",Ve.scrollbars="yes");const gt=Object.entries(Ve).reduce((wn,[Zi,qa])=>`${wn}${Zi}=${qa},`,"");if(function to(y=(0,O.z$)()){var h;return qr(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Je)&&"_self"!==le)return function Oy(y,h){const g=document.createElement("a");g.href=y,g.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(h||"",le),new $l(null);const st=window.open(h||"",le,gt);se(st,y,"popup-blocked");try{st.focus()}catch(wn){}return new $l(st)}(h,le,ho())})()}_openRedirect(h,g,E,A){var x=this;return(0,f.Z)(function*(){return yield x._originValidation(h),function Sl(y){an().location.href=y}(nf(h,g,E,yt(),A)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:A,promise:x}=this.eventManagers[g];return A?Promise.resolve(A):(ie(x,"If manager is not set, promise should be"),x)}const E=this.initAndGetManager(h);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const E=yield function Nu(y){return _d.apply(this,arguments)}(h),A=new ws(h);return E.register("authEvent",x=>(se(null==x?void 0:x.authEvent,h,"invalid-auth-event"),{status:A.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:A},g.iframes[h._key()]=E,A})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(fi,{type:fi},A=>{var x;const q=null===(x=null==A?void 0:A[0])||void 0===x?void 0:x[fi];void 0!==q&&g(!!q),ee(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function md(y){return ea.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ms()||ou()||qr()}}),this.cordovaResolver=oe(class Wi{constructor(){this._redirectPersistence=ln,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Er}_initialize(h){var g=this;return(0,f.Z)(function*(){const E=h._key();let A=g.eventManagers.get(E);return A||(A=new af(h),g.eventManagers.set(E,A),g.attachCallbackListeners(h,A)),A})()}_openPopup(h){ee(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,E,A){var x=this;return(0,f.Z)(function*(){!function vo(y){var h,g,E,A,x,q,le,Ve,Je,gt;const st=Ha();se("function"==typeof(null===(h=null==st?void 0:st.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),se(void 0!==(null===(g=null==st?void 0:st.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),se("function"==typeof(null===(x=null===(A=null===(E=null==st?void 0:st.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===x?void 0:x.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),se("function"==typeof(null===(Ve=null===(le=null===(q=null==st?void 0:st.cordova)||void 0===q?void 0:q.plugins)||void 0===le?void 0:le.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),se("function"==typeof(null===(gt=null===(Je=null==st?void 0:st.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===gt?void 0:gt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const q=yield x._initialize(h);yield q.initialized(),q.resetRedirect(),function Au(){En.clear()}(),yield x._originValidation(h);const le=function uf(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:lf(),postBody:null,tenantId:y.tenantId,error:Se(y,"no-auth-event")}}(h,E,A);yield function bd(y,h){return cf()._set(Td(y),h)}(h,le);const Ve=yield function Vy(y,h,g){return ta.apply(this,arguments)}(h,le,g),Je=yield function ql(y){const{cordova:h}=Ha();return new Promise(g=>{h.plugins.browsertab.isAvailable(E=>{let A=null;E?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function jc(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Ve);return function bg(y,h,g){return xu.apply(this,arguments)}(h,q,Je)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function sf(y){return zi.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:E,handleOpenURL:A,BuildInfo:x}=Ha(),q=setTimeout((0,f.Z)(function*(){yield zl(h),g.onEvent(Ad())}),500),le=function(){var gt=(0,f.Z)(function*(st){clearTimeout(q);const wn=yield zl(h);let Zi=null;wn&&(null==st?void 0:st.url)&&(Zi=function Wl(y,h){var g,E;const A=function Cd(y){const h=Zl(y),g=h.link?decodeURIComponent(h.link):void 0,E=Zl(g).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Zl(A).link||A||E||g||y}(h);if(A.includes("/__/auth/callback")){const x=Zl(A),q=x.firebaseError?function df(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(x.firebaseError)):null,le=null===(E=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],Ve=le?Se(le):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(wn,st.url)),g.onEvent(Zi||Ad())});return function(wn){return gt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,le);const Ve=A,Je=`${x.packageName.toLowerCase()}://`;Ha().handleOpenURL=function(){var gt=(0,f.Z)(function*(st){if(st.toLowerCase().startsWith(Je)&&le({url:st}),"function"==typeof Ve)try{Ve(st)}catch(wn){console.error(wn)}});return function(st){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ln,this._completeRedirectFn=Er}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,E,A){var x=this;return(0,f.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(h,g,E,A)})()}_openRedirect(h,g,E,A){var x=this;return(0,f.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(h,g,E,A)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return hf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function Pr(){return Ga.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function Ag(y){return y.unwrap()}function gf(y){return Sg(y)}function Sg(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Hi.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let E;switch(g){case"google.com":E=$o;break;case"facebook.com":E=jo;break;case"github.com":E=Kc;break;case"twitter.com":E=hi;break;default:const{oauthIdToken:A,oauthAccessToken:x,oauthTokenSecret:q,pendingToken:le,nonce:Ve}=h;return x||q||A||le?le?g.startsWith("saml.")?Os._create(g,le):us._fromParams({providerId:g,signInMethod:g,pendingToken:le,idToken:A,accessToken:x}):new so(g).credential({idToken:A,accessToken:x,rawNonce:Ve}):null}return y instanceof O.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function ar(y,h){return h.catch(g=>{throw g instanceof O.ZR&&function $y(y,h){var g;const E=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new Hy(y,function Al(y,h){var g;const E=(0,O.m9)(y),A=h;return se(h.customData.operationType,E,"argument-error"),se(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),Pa._fromError(E,A)}(y,h));else if(E){const A=Sg(h),x=h;A&&(x.credential=A,x.tenantId=E.tenantId||void 0,x.email=E.email||void 0,x.phoneNumber=E.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:gf(g),additionalUserInfo:Wn(g),user:Eo.getOrCreate(A)}})}function mf(y,h){return yf.apply(this,arguments)}function yf(){return(yf=(0,f.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:E=>ar(y,g.confirm(E))}})).apply(this,arguments)}class Hy{constructor(h,g){this.resolver=g,this.auth=function ec(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ar(Ag(this.auth),this.resolver.resolveSignIn(h))}}class Eo{constructor(h){this._delegate=h,this.multiFactor=function fg(y){const h=(0,O.m9)(y);return zo.has(h)||zo.set(h,ms._fromUser(h)),zo.get(h)}(h)}static getOrCreate(h){return Eo.USER_MAP.has(h)||Eo.USER_MAP.set(h,new Eo(h)),Eo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return ar(g.auth,hs(g._delegate,h))})()}linkWithPhoneNumber(h,g){var E=this;return(0,f.Z)(function*(){return mf(E.auth,function Ol(y,h,g){return mo.apply(this,arguments)}(E._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return ar(g.auth,function Fl(y,h,g){return Tu.apply(this,arguments)}(g._delegate,h,Gs))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Pd(Oe(g.auth)),function Ue(y,h,g){return function Ge(y,h,g){return Lt.apply(this,arguments)}(y,h,g)}(g._delegate,h,Gs)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return ar(g.auth,Ho(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return mf(this.auth,function My(y,h,g){return Pl.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return ar(this.auth,function pd(y,h,g){return Kn.apply(this,arguments)}(this._delegate,h,Gs))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Pd(Oe(g.auth)),function z(y,h,g){return function Y(y,h,g){return Ce.apply(this,arguments)}(y,h,g)}(g._delegate,h,Gs)})()}sendEmailVerification(h){return function fs(y,h){return Na.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function ds(y,h){return _l.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function Il(y,h){return gu((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function hg(y,h){return gu((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function kl(y,h){return Yo.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function pu(y,h){return Oa.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function rd(y,h,g){return xa.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Eo.USER_MAP=new WeakMap;const tc=se;let kd=(()=>{class y{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;tc(A,"invalid-api-key",{appName:g.name}),tc(A,"invalid-api-key",{appName:g.name});const x="undefined"!=typeof window?Gs:void 0;this._delegate=E.initialize({options:{persistence:Gy(A,g.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Eo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function en(y,h,g){const E=Oe(y);se(E._canInitEmulator,E,"emulator-config-failed"),se(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),x=Mr(h),{host:q,port:le}=function os(y){const h=Mr(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const x=A[1];return{host:x,port:Tn(E.substr(x.length+1))}}{const[x,q]=E.split(":");return{host:x,port:Tn(q)}}}(h);E.config.emulator={url:`${x}//${q}${null===le?"":`:${le}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:q,port:le,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function as(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,E)}applyActionCode(g){return function Gh(y,h){return De.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Nt(this._delegate,g)}confirmPasswordReset(g,E){return function El(y,h,g){return Aa.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var A=this;return(0,f.Z)(function*(){return ar(A._delegate,function Ma(y,h,g){return Rr.apply(this,arguments)}(A._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function bl(y,h){return Ui.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function nd(y,h){const g=ls.parseLink(h);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){tc(Nd(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function Ht(y,h){return An.apply(this,arguments)}(g._delegate,Gs);return E?ar(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Sd(y,h){Oe(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,E,A){const{next:x,error:q,complete:le}=Mg(g,E,A);return this._delegate.onAuthStateChanged(x,q,le)}onIdTokenChanged(g,E,A){const{next:x,error:q,complete:le}=Mg(g,E,A);return this._delegate.onIdTokenChanged(x,q,le)}sendSignInLinkToEmail(g,E){return function Dl(y,h,g){return td.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function ed(y,h,g){return Ca.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,f.Z)(function*(){let A;switch(function Od(y,h){Ql(Object.values(Jr).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Ql(h!==Jr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Ql(h===Jr.NONE,y,"unsupported-persistence-type"):ku()?Ql(h===Jr.NONE||h===Jr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Ql(h===Jr.NONE||Yn(),y,"unsupported-persistence-type")}(E._delegate,g),g){case Jr.SESSION:A=ln;break;case Jr.LOCAL:A=(yield oe(Ci)._isAvailable())?Ci:Vs;break;case Jr.NONE:A=At;break;default:return ee("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ar(this._delegate,function Xc(y){return lu.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ar(this._delegate,fu(this._delegate,g))}signInWithCustomToken(g){return ar(this._delegate,function ks(y,h){return Fs.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return ar(this._delegate,function wl(y,h,g){return fu((0,O.m9)(y),wa.credential(h,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return ar(this._delegate,function Ra(y,h,g){return Go.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return mf(this._delegate,function Qh(y,h,g){return vn.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,f.Z)(function*(){return tc(Nd(),E._delegate,"operation-not-supported-in-this-environment"),ar(E._delegate,function ja(y,h,g){return fd.apply(this,arguments)}(E._delegate,g,Gs))})()}signInWithRedirect(g){var E=this;return(0,f.Z)(function*(){return tc(Nd(),E._delegate,"operation-not-supported-in-this-environment"),yield Pd(E._delegate),function T(y,h,g){return function R(y,h,g){return F.apply(this,arguments)}(y,h,g)}(E._delegate,g,Gs)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function dn(y,h){return Ls.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Jr,y})();function Mg(y,h,g){let E=y;"function"!=typeof y&&({next:E,error:h,complete:g}=y);const A=E;return{next:q=>A(q&&Eo.getOrCreate(q)),error:h,complete:g}}function Gy(y,h){const g=function Jl(y,h){const g=Cg();if(!g)return[];const E=Vn(xd,y,h);switch(g.getItem(E)){case Jr.NONE:return[At];case Jr.LOCAL:return[Ci,ln];case Jr.SESSION:return[ln];default:return[]}}(y,h);if("undefined"!=typeof self&&!g.includes(Ci)&&g.push(Ci),"undefined"!=typeof window)for(const E of[Vs,ln])g.includes(E)||g.push(E);return g.includes(At)||g.push(At),g}class _f{constructor(){this.providerId="phone",this._delegate=new Hi(Ag(X.Z.auth()))}static credential(h,g){return Hi.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}_f.PHONE_SIGN_IN_METHOD=Hi.PHONE_SIGN_IN_METHOD,_f.PROVIDER_ID=Hi.PROVIDER_ID;const qy=se;class Rg{constructor(h,g,E=X.Z.app()){var A;qy(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new _s(h,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function o0(y){y.INTERNAL.registerComponent(new re.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new kd(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:wa,FacebookAuthProvider:jo,GithubAuthProvider:Kc,GoogleAuthProvider:$o,OAuthProvider:so,SAMLAuthProvider:cs,PhoneAuthProvider:_f,PhoneMultiFactorGenerator:Fy,RecaptchaVerifier:Rg,TwitterAuthProvider:hi,Auth:kd,AuthCredential:$t,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.8")}(X.Z)},2940:function(nt,Te){!function(P){"use strict";function f(W){return Array.prototype.slice.call(W)}function X(W){return new Promise(function(ae,Re){W.onsuccess=function(){ae(W.result)},W.onerror=function(){Re(W.error)}})}function O(W,ae,Re){var Ie,ee=new Promise(function(Se,ve){X(Ie=W[ae].apply(W,Re)).then(Se,ve)});return ee.request=Ie,ee}function pe(W,ae,Re){var Ie=O(W,ae,Re);return Ie.then(function(ee){if(ee)return new j(ee,Ie.request)})}function te(W,ae,Re){Re.forEach(function(Ie){Object.defineProperty(W.prototype,Ie,{get:function(){return this[ae][Ie]},set:function(ee){this[ae][Ie]=ee}})})}function fe(W,ae,Re,Ie){Ie.forEach(function(ee){ee in Re.prototype&&(W.prototype[ee]=function(){return O(this[ae],ee,arguments)})})}function re(W,ae,Re,Ie){Ie.forEach(function(ee){ee in Re.prototype&&(W.prototype[ee]=function(){return this[ae][ee].apply(this[ae],arguments)})})}function ce(W,ae,Re,Ie){Ie.forEach(function(ee){ee in Re.prototype&&(W.prototype[ee]=function(){return pe(this[ae],ee,arguments)})})}function de(W){this._index=W}function j(W,ae){this._cursor=W,this._request=ae}function U(W){this._store=W}function Q(W){this._tx=W,this.complete=new Promise(function(ae,Re){W.oncomplete=function(){ae()},W.onerror=function(){Re(W.error)},W.onabort=function(){Re(W.error)}})}function Be(W,ae,Re){this._db=W,this.oldVersion=ae,this.transaction=new Q(Re)}function be(W){this._db=W}te(de,"_index",["name","keyPath","multiEntry","unique"]),fe(de,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ce(de,"_index",IDBIndex,["openCursor","openKeyCursor"]),te(j,"_cursor",["direction","key","primaryKey","value"]),fe(j,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(W){W in IDBCursor.prototype&&(j.prototype[W]=function(){var ae=this,Re=arguments;return Promise.resolve().then(function(){return ae._cursor[W].apply(ae._cursor,Re),X(ae._request).then(function(Ie){if(Ie)return new j(Ie,ae._request)})})})}),U.prototype.createIndex=function(){return new de(this._store.createIndex.apply(this._store,arguments))},U.prototype.index=function(){return new de(this._store.index.apply(this._store,arguments))},te(U,"_store",["name","keyPath","indexNames","autoIncrement"]),fe(U,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ce(U,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),re(U,"_store",IDBObjectStore,["deleteIndex"]),Q.prototype.objectStore=function(){return new U(this._tx.objectStore.apply(this._tx,arguments))},te(Q,"_tx",["objectStoreNames","mode"]),re(Q,"_tx",IDBTransaction,["abort"]),Be.prototype.createObjectStore=function(){return new U(this._db.createObjectStore.apply(this._db,arguments))},te(Be,"_db",["name","version","objectStoreNames"]),re(Be,"_db",IDBDatabase,["deleteObjectStore","close"]),be.prototype.transaction=function(){return new Q(this._db.transaction.apply(this._db,arguments))},te(be,"_db",["name","version","objectStoreNames"]),re(be,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(W){[U,de].forEach(function(ae){W in ae.prototype&&(ae.prototype[W.replace("open","iterate")]=function(){var Re=f(arguments),Ie=Re[Re.length-1],ee=this._store||this._index,Se=ee[W].apply(ee,Re.slice(0,-1));Se.onsuccess=function(){Ie(Se.result)}})})}),[de,U].forEach(function(W){W.prototype.getAll||(W.prototype.getAll=function(ae,Re){var Ie=this,ee=[];return new Promise(function(Se){Ie.iterateCursor(ae,function(ve){ve?(ee.push(ve.value),void 0===Re||ee.length!=Re?ve.continue():Se(ee)):Se(ee)})})})}),P.openDb=function Ne(W,ae,Re){var Ie=O(indexedDB,"open",[W,ae]),ee=Ie.request;return ee&&(ee.onupgradeneeded=function(Se){Re&&Re(new Be(ee.result,Se.oldVersion,ee.transaction))}),Ie.then(function(Se){return new be(Se)})},P.deleteDb=function Le(W){return O(indexedDB,"deleteDatabase",[W])},Object.defineProperty(P,"__esModule",{value:!0})}(Te)},8306:(nt,Te,P)=>{"use strict";P.d(Te,{y:()=>j});var f=P(2961),X=P(727),O=P(8822),pe=P(4671);var re=P(2416),ce=P(576),de=P(2806);let j=(()=>{class be{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const W=new be;return W.source=this,W.operator=Le,W}subscribe(Le,W,ae){const Re=function Be(be){return be&&be instanceof f.Lv||function Q(be){return be&&(0,ce.m)(be.next)&&(0,ce.m)(be.error)&&(0,ce.m)(be.complete)}(be)&&(0,X.Nn)(be)}(Le)?Le:new f.Hp(Le,W,ae);return(0,de.x)(()=>{const{operator:Ie,source:ee}=this;Re.add(Ie?Ie.call(Re,ee):ee?this._subscribe(Re):this._trySubscribe(Re))}),Re}_trySubscribe(Le){try{return this._subscribe(Le)}catch(W){Le.error(W)}}forEach(Le,W){return new(W=U(W))((ae,Re)=>{const Ie=new f.Hp({next:ee=>{try{Le(ee)}catch(Se){Re(Se),Ie.unsubscribe()}},error:Re,complete:ae});this.subscribe(Ie)})}_subscribe(Le){var W;return null===(W=this.source)||void 0===W?void 0:W.subscribe(Le)}[O.L](){return this}pipe(...Le){return function fe(be){return 0===be.length?pe.y:1===be.length?be[0]:function(Le){return be.reduce((W,ae)=>ae(W),Le)}}(Le)(this)}toPromise(Le){return new(Le=U(Le))((W,ae)=>{let Re;this.subscribe(Ie=>Re=Ie,Ie=>ae(Ie),()=>W(Re))})}}return be.create=Ne=>new be(Ne),be})();function U(be){var Ne;return null!==(Ne=null!=be?be:re.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(nt,Te,P)=>{"use strict";P.d(Te,{x:()=>re});var f=P(8306),X=P(727);const pe=(0,P(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=P(8737),fe=P(2806);let re=(()=>{class de extends f.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const Q=new ce(this,this);return Q.operator=U,Q}_throwIfClosed(){if(this.closed)throw new pe}next(U){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Q=this.observers.slice();for(const Be of Q)Be.next(U)}})}error(U){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:Q}=this;for(;Q.length;)Q.shift().error(U)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:Q,isStopped:Be,observers:be}=this;return Q||Be?X.Lc:(be.push(U),new X.w0(()=>(0,te.P)(be,U)))}_checkFinalizedStatuses(U){const{hasError:Q,thrownError:Be,isStopped:be}=this;Q?U.error(Be):be&&U.complete()}asObservable(){const U=new f.y;return U.source=this,U}}return de.create=(j,U)=>new ce(j,U),de})();class ce extends re{constructor(j,U){super(),this.destination=j,this.source=U}next(j){var U,Q;null===(Q=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===Q||Q.call(U,j)}error(j){var U,Q;null===(Q=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===Q||Q.call(U,j)}complete(){var j,U;null===(U=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===U||U.call(j)}_subscribe(j){var U,Q;return null!==(Q=null===(U=this.source)||void 0===U?void 0:U.subscribe(j))&&void 0!==Q?Q:X.Lc}}},2961:(nt,Te,P)=>{"use strict";P.d(Te,{Hp:()=>Ne,Lv:()=>Q});var f=P(576),X=P(727),O=P(2416),pe=P(7849);function te(){}const fe=de("C",void 0,void 0);function de(Ie,ee,Se){return{kind:Ie,value:ee,error:Se}}var j=P(3410),U=P(2806);class Q extends X.w0{constructor(ee){super(),this.isStopped=!1,ee?(this.destination=ee,(0,X.Nn)(ee)&&ee.add(this)):this.destination=Re}static create(ee,Se,ve){return new Ne(ee,Se,ve)}next(ee){this.isStopped?ae(function ce(Ie){return de("N",Ie,void 0)}(ee),this):this._next(ee)}error(ee){this.isStopped?ae(function re(Ie){return de("E",void 0,Ie)}(ee),this):(this.isStopped=!0,this._error(ee))}complete(){this.isStopped?ae(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ee){this.destination.next(ee)}_error(ee){try{this.destination.error(ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function be(Ie,ee){return Be.call(Ie,ee)}class Ne extends Q{constructor(ee,Se,ve){let He;if(super(),(0,f.m)(ee))He=ee;else if(ee){let je;({next:He,error:Se,complete:ve}=ee),this&&O.v.useDeprecatedNextContext?(je=Object.create(ee),je.unsubscribe=()=>this.unsubscribe()):je=ee,He=He&&be(He,je),Se=Se&&be(Se,je),ve=ve&&be(ve,je)}this.destination={next:He?Le(He):te,error:Le(null!=Se?Se:W),complete:ve?Le(ve):te}}}function Le(Ie,ee){return(...Se)=>{try{Ie(...Se)}catch(ve){O.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(ve):(0,pe.h)(ve)}}}function W(Ie){throw Ie}function ae(Ie,ee){const{onStoppedNotification:Se}=O.v;Se&&j.z.setTimeout(()=>Se(Ie,ee))}const Re={closed:!0,next:te,error:W,complete:te}},727:(nt,Te,P)=>{"use strict";P.d(Te,{Lc:()=>fe,w0:()=>te,Nn:()=>re});var f=P(576);const O=(0,P(3888).d)(de=>function(U){de(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((Q,Be)=>`${Be+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var pe=P(8737);class te{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const be of U)be.remove(this);else U.remove(this);const{initialTeardown:Q}=this;if((0,f.m)(Q))try{Q()}catch(be){j=be instanceof O?be.errors:[be]}const{_teardowns:Be}=this;if(Be){this._teardowns=null;for(const be of Be)try{ce(be)}catch(Ne){j=null!=j?j:[],Ne instanceof O?j=[...j,...Ne.errors]:j.push(Ne)}}if(j)throw new O(j)}}add(j){var U;if(j&&j!==this)if(this.closed)ce(j);else{if(j instanceof te){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._teardowns=null!==(U=this._teardowns)&&void 0!==U?U:[]).push(j)}}_hasParent(j){const{_parentage:U}=this;return U===j||Array.isArray(U)&&U.includes(j)}_addParent(j){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push(j),U):U?[U,j]:j}_removeParent(j){const{_parentage:U}=this;U===j?this._parentage=null:Array.isArray(U)&&(0,pe.P)(U,j)}remove(j){const{_teardowns:U}=this;U&&(0,pe.P)(U,j),j instanceof te&&j._removeParent(this)}}te.EMPTY=(()=>{const de=new te;return de.closed=!0,de})();const fe=te.EMPTY;function re(de){return de instanceof te||de&&"closed"in de&&(0,f.m)(de.remove)&&(0,f.m)(de.add)&&(0,f.m)(de.unsubscribe)}function ce(de){(0,f.m)(de)?de():de.unsubscribe()}},2416:(nt,Te,P)=>{"use strict";P.d(Te,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(nt,Te,P)=>{"use strict";P.d(Te,{E:()=>X});const X=new(P(8306).y)(te=>te.complete())},8996:(nt,Te,P)=>{"use strict";P.d(Te,{D:()=>Se});var f=P(8421),X=P(5363),O=P(9468),fe=P(8306),ce=P(2202),de=P(576),j=P(9672);function Q(ve,He){if(!ve)throw new Error("Iterable cannot be null");return new fe.y(je=>{(0,j.f)(je,He,()=>{const se=ve[Symbol.asyncIterator]();(0,j.f)(je,He,()=>{se.next().then(Z=>{Z.done?je.complete():je.next(Z.value)})},0,!0)})})}var Be=P(3670),be=P(8239),Ne=P(1144),Le=P(6495),W=P(2206),ae=P(4532),Re=P(3260);function Se(ve,He){return He?function ee(ve,He){if(null!=ve){if((0,Be.c)(ve))return function pe(ve,He){return(0,f.Xf)(ve).pipe((0,O.R)(He),(0,X.Q)(He))}(ve,He);if((0,Ne.z)(ve))return function re(ve,He){return new fe.y(je=>{let se=0;return He.schedule(function(){se===ve.length?je.complete():(je.next(ve[se++]),je.closed||this.schedule())})})}(ve,He);if((0,be.t)(ve))return function te(ve,He){return(0,f.Xf)(ve).pipe((0,O.R)(He),(0,X.Q)(He))}(ve,He);if((0,W.D)(ve))return Q(ve,He);if((0,Le.T)(ve))return function U(ve,He){return new fe.y(je=>{let se;return(0,j.f)(je,He,()=>{se=ve[ce.h](),(0,j.f)(je,He,()=>{let Z,ie;try{({value:Z,done:ie}=se.next())}catch(ge){return void je.error(ge)}ie?je.complete():je.next(Z)},0,!0)}),()=>(0,de.m)(null==se?void 0:se.return)&&se.return()})}(ve,He);if((0,Re.L)(ve))return function Ie(ve,He){return Q((0,Re.Q)(ve),He)}(ve,He)}throw(0,ae.z)(ve)}(ve,He):(0,f.Xf)(ve)}},8421:(nt,Te,P)=>{"use strict";P.d(Te,{Xf:()=>Be});var f=P(655),X=P(1144),O=P(8239),pe=P(8306),te=P(3670),fe=P(2206),re=P(4532),ce=P(6495),de=P(3260),j=P(576),U=P(7849),Q=P(8822);function Be(ee){if(ee instanceof pe.y)return ee;if(null!=ee){if((0,te.c)(ee))return function be(ee){return new pe.y(Se=>{const ve=ee[Q.L]();if((0,j.m)(ve.subscribe))return ve.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ee);if((0,X.z)(ee))return function Ne(ee){return new pe.y(Se=>{for(let ve=0;ve<ee.length&&!Se.closed;ve++)Se.next(ee[ve]);Se.complete()})}(ee);if((0,O.t)(ee))return function Le(ee){return new pe.y(Se=>{ee.then(ve=>{Se.closed||(Se.next(ve),Se.complete())},ve=>Se.error(ve)).then(null,U.h)})}(ee);if((0,fe.D)(ee))return ae(ee);if((0,ce.T)(ee))return function W(ee){return new pe.y(Se=>{for(const ve of ee)if(Se.next(ve),Se.closed)return;Se.complete()})}(ee);if((0,de.L)(ee))return function Re(ee){return ae((0,de.Q)(ee))}(ee)}throw(0,re.z)(ee)}function ae(ee){return new pe.y(Se=>{(function Ie(ee,Se){var ve,He,je,se;return(0,f.mG)(this,void 0,void 0,function*(){try{for(ve=(0,f.KL)(ee);!(He=yield ve.next()).done;)if(Se.next(He.value),Se.closed)return}catch(Z){je={error:Z}}finally{try{He&&!He.done&&(se=ve.return)&&(yield se.call(ve))}finally{if(je)throw je.error}}Se.complete()})})(ee,Se).catch(ve=>Se.error(ve))})}},6451:(nt,Te,P)=>{"use strict";P.d(Te,{T:()=>fe});var f=P(8189),X=P(8421),O=P(515),pe=P(7669),te=P(8996);function fe(...re){const ce=(0,pe.yG)(re),de=(0,pe._6)(re,1/0),j=re;return j.length?1===j.length?(0,X.Xf)(j[0]):(0,f.J)(de)((0,te.D)(j,ce)):O.E}},5403:(nt,Te,P)=>{"use strict";P.d(Te,{x:()=>X});var f=P(2961);function X(pe,te,fe,re,ce){return new O(pe,te,fe,re,ce)}class O extends f.Lv{constructor(te,fe,re,ce,de,j){super(te),this.onFinalize=de,this.shouldUnsubscribe=j,this._next=fe?function(U){try{fe(U)}catch(Q){te.error(Q)}}:super._next,this._error=ce?function(U){try{ce(U)}catch(Q){te.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(U){te.error(U)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},4004:(nt,Te,P)=>{"use strict";P.d(Te,{U:()=>O});var f=P(4482),X=P(5403);function O(pe,te){return(0,f.e)((fe,re)=>{let ce=0;fe.subscribe((0,X.x)(re,de=>{re.next(pe.call(te,de,ce++))}))})}},8189:(nt,Te,P)=>{"use strict";P.d(Te,{J:()=>O});var f=P(5577),X=P(4671);function O(pe=1/0){return(0,f.z)(X.y,pe)}},5577:(nt,Te,P)=>{"use strict";P.d(Te,{z:()=>ce});var f=P(4004),X=P(8421),O=P(4482),pe=P(9672),te=P(5403),re=P(576);function ce(de,j,U=1/0){return(0,re.m)(j)?ce((Q,Be)=>(0,f.U)((be,Ne)=>j(Q,be,Be,Ne))((0,X.Xf)(de(Q,Be))),U):("number"==typeof j&&(U=j),(0,O.e)((Q,Be)=>function fe(de,j,U,Q,Be,be,Ne,Le){const W=[];let ae=0,Re=0,Ie=!1;const ee=()=>{Ie&&!W.length&&!ae&&j.complete()},Se=He=>ae<Q?ve(He):W.push(He),ve=He=>{be&&j.next(He),ae++;let je=!1;(0,X.Xf)(U(He,Re++)).subscribe((0,te.x)(j,se=>{null==Be||Be(se),be?Se(se):j.next(se)},()=>{je=!0},void 0,()=>{if(je)try{for(ae--;W.length&&ae<Q;){const se=W.shift();Ne?(0,pe.f)(j,Ne,()=>ve(se)):ve(se)}ee()}catch(se){j.error(se)}}))};return de.subscribe((0,te.x)(j,Se,()=>{Ie=!0,ee()})),()=>{null==Le||Le()}}(Q,Be,de,U)))}},5363:(nt,Te,P)=>{"use strict";P.d(Te,{Q:()=>pe});var f=P(9672),X=P(4482),O=P(5403);function pe(te,fe=0){return(0,X.e)((re,ce)=>{re.subscribe((0,O.x)(ce,de=>(0,f.f)(ce,te,()=>ce.next(de),fe),()=>(0,f.f)(ce,te,()=>ce.complete(),fe),de=>(0,f.f)(ce,te,()=>ce.error(de),fe)))})}},3099:(nt,Te,P)=>{"use strict";P.d(Te,{B:()=>fe});var f=P(8996),X=P(5698),O=P(7579),pe=P(2961),te=P(4482);function fe(ce={}){const{connector:de=(()=>new O.x),resetOnError:j=!0,resetOnComplete:U=!0,resetOnRefCountZero:Q=!0}=ce;return Be=>{let be=null,Ne=null,Le=null,W=0,ae=!1,Re=!1;const Ie=()=>{null==Ne||Ne.unsubscribe(),Ne=null},ee=()=>{Ie(),be=Le=null,ae=Re=!1},Se=()=>{const ve=be;ee(),null==ve||ve.unsubscribe()};return(0,te.e)((ve,He)=>{W++,!Re&&!ae&&Ie();const je=Le=null!=Le?Le:de();He.add(()=>{W--,0===W&&!Re&&!ae&&(Ne=re(Se,Q))}),je.subscribe(He),be||(be=new pe.Hp({next:se=>je.next(se),error:se=>{Re=!0,Ie(),Ne=re(ee,j,se),je.error(se)},complete:()=>{ae=!0,Ie(),Ne=re(ee,U),je.complete()}}),(0,f.D)(ve).subscribe(be))})(Be)}}function re(ce,de,...j){return!0===de?(ce(),null):!1===de?null:de(...j).pipe((0,X.q)(1)).subscribe(()=>ce())}},9468:(nt,Te,P)=>{"use strict";P.d(Te,{R:()=>X});var f=P(4482);function X(O,pe=0){return(0,f.e)((te,fe)=>{fe.add(O.schedule(()=>te.subscribe(fe),pe))})}},5698:(nt,Te,P)=>{"use strict";P.d(Te,{q:()=>pe});var f=P(515),X=P(4482),O=P(5403);function pe(te){return te<=0?()=>f.E:(0,X.e)((fe,re)=>{let ce=0;fe.subscribe((0,O.x)(re,de=>{++ce<=te&&(re.next(de),te<=ce&&re.complete())}))})}},8505:(nt,Te,P)=>{"use strict";P.d(Te,{b:()=>te});var f=P(576),X=P(4482),O=P(5403),pe=P(4671);function te(fe,re,ce){const de=(0,f.m)(fe)||re||ce?{next:fe,error:re,complete:ce}:fe;return de?(0,X.e)((j,U)=>{var Q;null===(Q=de.subscribe)||void 0===Q||Q.call(de);let Be=!0;j.subscribe((0,O.x)(U,be=>{var Ne;null===(Ne=de.next)||void 0===Ne||Ne.call(de,be),U.next(be)},()=>{var be;Be=!1,null===(be=de.complete)||void 0===be||be.call(de),U.complete()},be=>{var Ne;Be=!1,null===(Ne=de.error)||void 0===Ne||Ne.call(de,be),U.error(be)},()=>{var be,Ne;Be&&(null===(be=de.unsubscribe)||void 0===be||be.call(de)),null===(Ne=de.finalize)||void 0===Ne||Ne.call(de)}))}):pe.y}},4408:(nt,Te,P)=>{"use strict";P.d(Te,{o:()=>te});var f=P(727);class X extends f.w0{constructor(re,ce){super()}schedule(re,ce=0){return this}}const O={setInterval(...fe){const{delegate:re}=O;return((null==re?void 0:re.setInterval)||setInterval)(...fe)},clearInterval(fe){const{delegate:re}=O;return((null==re?void 0:re.clearInterval)||clearInterval)(fe)},delegate:void 0};var pe=P(8737);class te extends X{constructor(re,ce){super(re,ce),this.scheduler=re,this.work=ce,this.pending=!1}schedule(re,ce=0){if(this.closed)return this;this.state=re;const de=this.id,j=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId(j,de,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(j,this.id,ce),this}requestAsyncId(re,ce,de=0){return O.setInterval(re.flush.bind(re,this),de)}recycleAsyncId(re,ce,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return ce;O.clearInterval(ce)}execute(re,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(re,ce);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,ce){let j,de=!1;try{this.work(re)}catch(U){de=!0,j=U||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:re,scheduler:ce}=this,{actions:de}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,pe.P)(de,this),null!=re&&(this.id=this.recycleAsyncId(ce,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,Te,P)=>{"use strict";P.d(Te,{v:()=>O});var f=P(6063);class X{constructor(te,fe=X.now){this.schedulerActionCtor=te,this.now=fe}schedule(te,fe=0,re){return new this.schedulerActionCtor(this,te).schedule(re,fe)}}X.now=f.l.now;class O extends X{constructor(te,fe=X.now){super(te,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(te){const{actions:fe}=this;if(this._active)return void fe.push(te);let re;this._active=!0;do{if(re=te.execute(te.state,te.delay))break}while(te=fe.shift());if(this._active=!1,re){for(;te=fe.shift();)te.unsubscribe();throw re}}}},4986:(nt,Te,P)=>{"use strict";P.d(Te,{z:()=>O});var f=P(4408);const O=new(P(7565).v)(f.o)},6063:(nt,Te,P)=>{"use strict";P.d(Te,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(nt,Te,P)=>{"use strict";P.d(Te,{z:()=>f});const f={setTimeout(...X){const{delegate:O}=f;return((null==O?void 0:O.setTimeout)||setTimeout)(...X)},clearTimeout(X){const{delegate:O}=f;return((null==O?void 0:O.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(nt,Te,P)=>{"use strict";P.d(Te,{h:()=>X});const X=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(nt,Te,P)=>{"use strict";P.d(Te,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(nt,Te,P)=>{"use strict";P.d(Te,{_6:()=>fe,jO:()=>pe,yG:()=>te});var f=P(576);function O(re){return re[re.length-1]}function pe(re){return(0,f.m)(O(re))?re.pop():void 0}function te(re){return function X(re){return re&&(0,f.m)(re.schedule)}(O(re))?re.pop():void 0}function fe(re,ce){return"number"==typeof O(re)?re.pop():ce}},8737:(nt,Te,P)=>{"use strict";function f(X,O){if(X){const pe=X.indexOf(O);0<=pe&&X.splice(pe,1)}}P.d(Te,{P:()=>f})},3888:(nt,Te,P)=>{"use strict";function f(X){const pe=X(te=>{Error.call(te),te.stack=(new Error).stack});return pe.prototype=Object.create(Error.prototype),pe.prototype.constructor=pe,pe}P.d(Te,{d:()=>f})},2806:(nt,Te,P)=>{"use strict";P.d(Te,{x:()=>O,O:()=>pe});var f=P(2416);let X=null;function O(te){if(f.v.useDeprecatedSynchronousErrorHandling){const fe=!X;if(fe&&(X={errorThrown:!1,error:null}),te(),fe){const{errorThrown:re,error:ce}=X;if(X=null,re)throw ce}}else te()}function pe(te){f.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=te)}},9672:(nt,Te,P)=>{"use strict";function f(X,O,pe,te=0,fe=!1){const re=O.schedule(function(){pe(),fe?X.add(this.schedule(null,te)):this.unsubscribe()},te);if(X.add(re),!fe)return re}P.d(Te,{f:()=>f})},4671:(nt,Te,P)=>{"use strict";function f(X){return X}P.d(Te,{y:()=>f})},1144:(nt,Te,P)=>{"use strict";P.d(Te,{z:()=>f});const f=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(nt,Te,P)=>{"use strict";P.d(Te,{D:()=>X});var f=P(576);function X(O){return Symbol.asyncIterator&&(0,f.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(nt,Te,P)=>{"use strict";function f(X){return"function"==typeof X}P.d(Te,{m:()=>f})},3670:(nt,Te,P)=>{"use strict";P.d(Te,{c:()=>O});var f=P(8822),X=P(576);function O(pe){return(0,X.m)(pe[f.L])}},6495:(nt,Te,P)=>{"use strict";P.d(Te,{T:()=>O});var f=P(2202),X=P(576);function O(pe){return(0,X.m)(null==pe?void 0:pe[f.h])}},8239:(nt,Te,P)=>{"use strict";P.d(Te,{t:()=>X});var f=P(576);function X(O){return(0,f.m)(null==O?void 0:O.then)}},3260:(nt,Te,P)=>{"use strict";P.d(Te,{Q:()=>O,L:()=>pe});var f=P(655),X=P(576);function O(te){return(0,f.FC)(this,arguments,function*(){const re=te.getReader();try{for(;;){const{value:ce,done:de}=yield(0,f.qq)(re.read());if(de)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ce)}}finally{re.releaseLock()}})}function pe(te){return(0,X.m)(null==te?void 0:te.getReader)}},4482:(nt,Te,P)=>{"use strict";P.d(Te,{A:()=>X,e:()=>O});var f=P(576);function X(pe){return(0,f.m)(null==pe?void 0:pe.lift)}function O(pe){return te=>{if(X(te))return te.lift(function(fe){try{return pe(fe,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(nt,Te,P)=>{"use strict";P.d(Te,{h:()=>O});var f=P(2416),X=P(3410);function O(pe){X.z.setTimeout(()=>{const{onUnhandledError:te}=f.v;if(!te)throw pe;te(pe)})}},4532:(nt,Te,P)=>{"use strict";function f(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Te,{z:()=>f})},655:(nt,Te,P)=>{"use strict";function pe(Z,ie){var ge={};for(var oe in Z)Object.prototype.hasOwnProperty.call(Z,oe)&&ie.indexOf(oe)<0&&(ge[oe]=Z[oe]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(oe=Object.getOwnPropertySymbols(Z);xe<oe.length;xe++)ie.indexOf(oe[xe])<0&&Object.prototype.propertyIsEnumerable.call(Z,oe[xe])&&(ge[oe[xe]]=Z[oe[xe]])}return ge}function ce(Z,ie,ge,oe){return new(ge||(ge=Promise))(function(he,yt){function jt(ot){try{it(oe.next(ot))}catch(Fn){yt(Fn)}}function Rn(ot){try{it(oe.throw(ot))}catch(Fn){yt(Fn)}}function it(ot){ot.done?he(ot.value):function xe(he){return he instanceof ge?he:new ge(function(yt){yt(he)})}(ot.value).then(jt,Rn)}it((oe=oe.apply(Z,ie||[])).next())})}function W(Z){return this instanceof W?(this.v=Z,this):new W(Z)}function ae(Z,ie,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,oe=ge.apply(Z,ie||[]),he=[];return xe={},yt("next"),yt("throw"),yt("return"),xe[Symbol.asyncIterator]=function(){return this},xe;function yt(Kt){oe[Kt]&&(xe[Kt]=function(hr){return new Promise(function(qt,ki){he.push([Kt,hr,qt,ki])>1||jt(Kt,hr)})})}function jt(Kt,hr){try{!function Rn(Kt){Kt.value instanceof W?Promise.resolve(Kt.value.v).then(it,ot):Fn(he[0][2],Kt)}(oe[Kt](hr))}catch(qt){Fn(he[0][3],qt)}}function it(Kt){jt("next",Kt)}function ot(Kt){jt("throw",Kt)}function Fn(Kt,hr){Kt(hr),he.shift(),he.length&&jt(he[0][0],he[0][1])}}function Ie(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,ie=Z[Symbol.asyncIterator];return ie?ie.call(Z):(Z=function Q(Z){var ie="function"==typeof Symbol&&Symbol.iterator,ge=ie&&Z[ie],oe=0;if(ge)return ge.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&oe>=Z.length&&(Z=void 0),{value:Z&&Z[oe++],done:!Z}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ge={},oe("next"),oe("throw"),oe("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function oe(he){ge[he]=Z[he]&&function(yt){return new Promise(function(jt,Rn){!function xe(he,yt,jt,Rn){Promise.resolve(Rn).then(function(it){he({value:it,done:jt})},yt)}(jt,Rn,(yt=Z[he](yt)).done,yt.value)})}}}P.d(Te,{_T:()=>pe,mG:()=>ce,qq:()=>W,FC:()=>ae,KL:()=>Ie})},5e3:(nt,Te,P)=>{"use strict";P.d(Te,{deG:()=>Kh,tb:()=>hE,AFp:()=>qD,ip1:()=>ry,CZH:()=>ul,hGG:()=>cl,z2F:()=>Nc,sBO:()=>nb,Sil:()=>sy,_Vd:()=>rl,EJc:()=>Rp,SBq:()=>Dc,qLn:()=>ar,vpe:()=>da,tBr:()=>qi,XFs:()=>ht,OlP:()=>_n,zs3:()=>un,ZZ4:()=>Fp,aQg:()=>yy,soG:()=>Mp,YKP:()=>Eh,h0i:()=>Tc,PXZ:()=>xp,R0b:()=>Tr,FiY:()=>xr,Lbi:()=>ZD,g9A:()=>iy,Qsj:()=>pp,FYo:()=>Wv,JOm:()=>le,q3G:()=>Sn,tp0:()=>Or,Rgc:()=>tu,dDg:()=>gE,q4F:()=>aD,GfV:()=>Kv,s_b:()=>Qm,ifc:()=>Rt,eFA:()=>cy,G48:()=>Ph,Gpc:()=>U,X6Q:()=>Oh,_c5:()=>RE,VLi:()=>JD,c2e:()=>Pi,zSh:()=>F_,wAp:()=>lt,vHH:()=>Ne,EiD:()=>Zl,mCW:()=>ta,qzn:()=>Hs,JVY:()=>_g,pB0:()=>vg,eBb:()=>Fy,L6k:()=>wd,LAX:()=>Dd,cg1:()=>Om,kL8:()=>Qi,yhl:()=>Gl,dqk:()=>Ft,sIi:()=>hc,CqO:()=>pm,QGY:()=>fm,F4k:()=>Jd,RDi:()=>yl,AaK:()=>ce,z3N:()=>fi,qOj:()=>nm,TTD:()=>jo,_Bn:()=>iD,xp6:()=>r_,uIk:()=>sm,Tol:()=>ih,ekj:()=>mv,Suo:()=>iE,Xpm:()=>rn,lG2:()=>ou,Yz7:()=>qt,cJS:()=>zt,oAB:()=>Ar,Yjl:()=>_a,Y36:()=>qf,_UZ:()=>yi,BQk:()=>hm,ynx:()=>Qd,qZA:()=>dm,TgZ:()=>pc,EpF:()=>av,n5z:()=>Zo,LFG:()=>Ue,$8M:()=>Ko,$Z:()=>Zu,NdJ:()=>Wf,CRH:()=>ND,oxw:()=>ym,Q6J:()=>cm,iGM:()=>RD,CHM:()=>Sa,oJD:()=>Ad,LSH:()=>Ou,Udp:()=>gv,d8E:()=>xm,YNc:()=>$f,_uU:()=>Qf,Oqu:()=>mc,hij:()=>yc});var f=P(7579),X=P(727),O=P(8306),pe=P(6451),te=P(3099);function fe(i){for(let s in i)if(i[s]===fe)return s;throw Error("Could not find renamed property on target object.")}function re(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function de(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=fe({__forward_ref__:fe});function U(i){return i.__forward_ref__=U,i.toString=function(){return ce(this())},i}function Q(i){return Be(i)?i():i}function Be(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===U}class Ne extends Error{constructor(s,a){super(function Le(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function W(i){return"string"==typeof i?i:null==i?"":String(i)}function ae(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():W(i)}function Se(i,s){const a=s?` in ${s}`:"";throw new Ne(-201,`No provider for ${ae(i)} found${a}`)}function it(i,s){null==i&&function ot(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function zt(i){return{providers:i.providers||[],imports:i.imports||[]}}function xt(i){return rs(i,Fi)||rs(i,ai)}function rs(i,s){return i.hasOwnProperty(s)?i[s]:null}function Cr(i){return i&&(i.hasOwnProperty(Ss)||i.hasOwnProperty(Li))?i[Ss]:null}const Fi=fe({\u0275prov:fe}),Ss=fe({\u0275inj:fe}),ai=fe({ngInjectableDef:fe}),Li=fe({ngInjectorDef:fe});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let $r;function In(i){const s=$r;return $r=i,s}function eo(i,s,a){const l=xt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ht.Optional?null:void 0!==s?s:void Se(ce(i),"Injector")}function Ke(i){return{toString:i}.toString()}var Mt=(()=>((Mt=Mt||{})[Mt.OnPush=0]="OnPush",Mt[Mt.Default=1]="Default",Mt))(),Rt=(()=>{return(i=Rt||(Rt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Rt;var i})();const Ye="undefined"!=typeof globalThis&&globalThis,at="undefined"!=typeof window&&window,Di="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ft=Ye||"undefined"!=typeof global&&global||at||Di,ui={},V=[],$=fe({\u0275cmp:fe}),H=fe({\u0275dir:fe}),Ee=fe({\u0275pipe:fe}),ne=fe({\u0275mod:fe}),ze=fe({\u0275fac:fe}),ft=fe({__NG_ELEMENT_ID__:fe});let Yt=0;function rn(i){return Ke(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Mt.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||V,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Rt.Emulated,id:"c",styles:i.styles||V,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,_=i.pipes;return l.id+=Yt++,l.inputs=ya(i.inputs,a),l.outputs=ya(i.outputs),p&&p.forEach(w=>w(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(Gr):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(At):null,l})}function Gr(i){return Un(i)||function Sr(i){return i[H]||null}(i)}function At(i){return function ss(i){return i[Ee]||null}(i)}const Vn={};function Ar(i){return Ke(()=>{const s={type:i.type,bootstrap:i.bootstrap||V,declarations:i.declarations||V,imports:i.imports||V,exports:i.exports||V,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Vn[i.id]=i.type),s})}function ya(i,s){if(null==i)return ui;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const ou=rn;function _a(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Un(i){return i[$]||null}function Bn(i,s){const a=i[ne]||null;if(!a&&!0===s)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function bi(i){return Array.isArray(i)&&"object"==typeof i[1]}function li(i){return Array.isArray(i)&&!0===i[1]}function Hc(i){return 0!=(8&i.flags)}function au(i){return 2==(2&i.flags)}function Ns(i){return 1==(1&i.flags)}function ci(i){return null!==i.template}function $h(i){return 0!=(512&i[2])}function di(i,s){return i.hasOwnProperty(ze)?i[ze]:null}class so{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function jo(){return $o}function $o(i){return i.type.prototype.ngOnChanges&&(i.setInput=dg),Kc}function Kc(){const i=Yc(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===ui)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function dg(i,s,a,l){const c=Yc(i)||function cs(i,s){return i[Os]=s}(i,{previous:ui,current:null}),p=c.current||(c.current={}),_=c.previous,w=this.declaredInputs[a],D=_[w];p[w]=new so(D&&D.currentValue,s,_===ui),i[l]=s}jo.ngInherit=!0;const Os="__ngSimpleChanges__";function Yc(i){return i[Os]||null}let du;function yl(i){du=i}function ds(){return void 0!==du?du:"undefined"!=typeof document?document:void 0}function tn(i){return!!i.listen}const Da={createRenderer:(i,s)=>ds()};function Zt(i){for(;Array.isArray(i);)i=i[0];return i}function oo(i,s){return Zt(s[i])}function qn(i,s){return Zt(s[i.index])}function gn(i,s){return i.data[s]}function zn(i,s){const a=s[i];return bi(a)?a:a[0]}function Ho(i){return 4==(4&i[2])}function Vi(i){return 128==(128&i[2])}function Wr(i,s){return null==s?null:i[s]}function ks(i){i[18]=0}function Fs(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const ut={lFrame:lo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function El(){return ut.bindingsEnabled}function De(){return ut.lFrame.lView}function Nt(){return ut.lFrame.tView}function Sa(i){return ut.lFrame.contextLView=i,i[8]}function dn(){let i=Ls();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ls(){return ut.lFrame.currentTNode}function Rr(i,s){const a=ut.lFrame;a.currentTNode=i,a.isParent=s}function wl(){return ut.lFrame.isParent}function Dl(){ut.lFrame.isParent=!1}function Ra(){return ut.isInCheckNoChangesMode}function Go(i){ut.isInCheckNoChangesMode=i}function Ui(){return ut.lFrame.bindingIndex++}function fs(i){const s=ut.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function xa(i,s){const a=ut.lFrame;a.bindingIndex=a.bindingRootIndex=i,ao(s)}function ao(i){ut.lFrame.currentDirectiveIndex=i}function pu(i){const s=ut.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}function Oa(){return ut.lFrame.currentQueryIndex}function Il(i){ut.lFrame.currentQueryIndex=i}function hg(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function gu(i,s,a){if(a&ht.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&ht.Host||(c=hg(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=ut.lFrame=Tl();return l.currentTNode=s,l.lView=i,!0}function uo(i){const s=Tl(),a=i[1];ut.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Tl(){const i=ut.lFrame,s=null===i?null:i.child;return null===s?lo(i):s}function lo(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function sd(){const i=ut.lFrame;return ut.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const qh=sd;function qo(){const i=sd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Wn(){return ut.lFrame.selectedIndex}function ps(i){ut.lFrame.selectedIndex=i}function mn(){const i=ut.lFrame;return gn(i.tView,i.selectedIndex)}function gs(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:C,ngOnDestroy:M}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),D&&(i.viewHooks||(i.viewHooks=[])).push(-a,D),C&&((i.viewHooks||(i.viewHooks=[])).push(a,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,C)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Pa(i,s,a){Zn(i,s,3,a)}function Al(i,s,a,l){(3&i[2])===a&&Zn(i,s,a,l)}function mu(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Zn(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let w=0;for(let D=void 0!==l?65535&i[18]:0;D<_;D++)if("number"==typeof s[D+1]){if(w=s[D],null!=l&&w>=l)break}else s[D]<0&&(i[18]+=65536),(w<p||-1==p)&&(Zh(i,a,s,D),i[18]=(4294901760&i[18])+D+2),D++}function Zh(i,s,a,l){const c=a[l]<0,p=a[l+1],w=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class zo{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Qe(i,s,a){const l=tn(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const _=a[c++],w=a[c++],D=a[c++];l?i.setAttribute(s,w,D,_):s.setAttributeNS(_,w,D)}else{const _=p,w=a[++c];Zr(_)?l&&i.setProperty(s,_,w):l?i.setAttribute(s,_,w):s.setAttribute(_,w),c++}}return c}function ln(i){return 3===i||4===i||6===i}function Zr(i){return 64===i.charCodeAt(0)}function yr(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||ho(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function ho(i,s,a,l,c){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function ud(i){return-1!==i}function an(i){return 32767&i}function ys(i,s){let a=function Sl(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let La=!0;function Ti(i){const s=La;return La=i,s}let cd=0;function yn(i,s){const a=Us(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,fo(l.data,i),fo(s,null),fo(l.blueprint,null));const c=yu(i,s),p=i.injectorIndex;if(ud(c)){const _=an(c),w=ys(c,s),D=w[1].data;for(let C=0;C<8;C++)s[p+C]=w[_+C]|D[_+C]}return s[p+8]=c,p}function fo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Us(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function yu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const p=c[1],_=p.type;if(l=2===_?p.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function _r(i,s,a){!function Va(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ft)&&(l=a[ft]),null==l&&(l=a[ft]=cd++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Bs(i,s,a){if(a&ht.Optional)return i;Se(s,"NodeInjector")}function js(i,s,a,l){if(a&ht.Optional&&void 0===l&&(l=null),0==(a&(ht.Self|ht.Host))){const c=i[9],p=In(void 0);try{return c?c.get(s,l,a&ht.Optional):eo(s,l,a&ht.Optional)}finally{In(p)}}return Bs(l,s,a)}function Ua(i,s,a,l=ht.Default,c){if(null!==i){const p=function Kr(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ft)?i[ft]:void 0;return"number"==typeof s?s>=0?255&s:$s:s}(a);if("function"==typeof p){if(!gu(s,i,l))return l&ht.Host?Bs(c,a,l):js(s,a,l,c);try{const _=p(l);if(null!=_||l&ht.Optional)return _;Se(a)}finally{qh()}}else if("number"==typeof p){let _=null,w=Us(i,s),D=-1,C=l&ht.Host?s[16][6]:null;for((-1===w||l&ht.SkipSelf)&&(D=-1===w?yu(i,s):s[w+8],-1!==D&&vu(l,!1)?(_=s[1],w=an(D),s=ys(D,s)):w=-1);-1!==w;){const M=s[1];if(Nl(p,w,M.data)){const k=_u(w,s,a,_,l,C);if(k!==Wo)return k}D=s[w+8],-1!==D&&vu(l,s[1].data[w+8]===C)&&Nl(p,w,s)?(_=M,w=an(D),s=ys(D,s)):w=-1}}}return js(s,a,l,c)}const Wo={};function $s(){return new hn(dn(),De())}function _u(i,s,a,l,c,p){const _=s[1],w=_.data[i+8],M=po(w,_,a,null==l?au(w)&&La:l!=_&&0!=(3&w.type),c&ht.Host&&p===w);return null!==M?Ci(s,_,M,w):Wo}function po(i,s,a,l,c){const p=i.providerIndexes,_=s.data,w=1048575&p,D=i.directiveStart,M=p>>20,B=c?w+M:i.directiveEnd;for(let K=l?w:w+M;K<B;K++){const me=_[K];if(K<D&&a===me||K>=D&&me.type===a)return K}if(c){const K=_[D];if(K&&ci(K)&&K.type===a)return D}return null}function Ci(i,s,a,l){let c=i[a];const p=s.data;if(function fg(i){return i instanceof zo}(c)){const _=c;_.resolving&&function Re(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${i}${a}`)}(ae(p[a]));const w=Ti(_.canSeeViewProviders);_.resolving=!0;const D=_.injectImpl?In(_.injectImpl):null;gu(i,l,ht.Default);try{c=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Cl(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const _=$o(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==D&&In(D),Ti(w),_.resolving=!1,qh()}}return c}function Nl(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function vu(i,s){return!(i&ht.Self||i&ht.Host&&s)}class hn{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Ua(this._tNode,this._lView,s,l,a)}}function Zo(i){return Ke(()=>{const s=i.prototype.constructor,a=s[ze]||go(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[ze]||go(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function go(i){return Be(i)?()=>{const s=go(Q(i));return s&&s()}:di(i)}function Ko(i){return function Rl(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(ln(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(dn(),i)}const sr="__parameters__";function $i(i,s,a){return Ke(()=>{const l=function xl(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const _=new c(...p);return w.annotation=_,w;function w(D,C,M){const k=D.hasOwnProperty(sr)?D[sr]:Object.defineProperty(D,sr,{value:[]})[sr];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(_),D}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class _n{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Kh=new _n("AnalyzeForEntryComponents");function vr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),vr(l,s)):s!==i&&s.push(l)}return s}function Qr(i,s){i.forEach(a=>Array.isArray(a)?Qr(a,s):s(a))}function kl(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Yo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Nr(i,s,a){let l=ja(i,s);return l>=0?i[1|l]=a:(l=~l,function bu(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Iu(i,s){const a=ja(i,s);if(a>=0)return i[1|a]}function ja(i,s){return function pd(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const vs={},Jo="__NG_DI_FLAG__",Au="ngTempTokenPath",b=/\n/gm,R="__source",F=fe({provide:String,useValue:fe});let z;function Y(i){const s=z;return z=i,s}function Ce(i,s=ht.Default){if(void 0===z)throw new Ne(203,"");return null===z?eo(i,void 0,s):z.get(i,s&ht.Optional?null:void 0,s)}function Ue(i,s=ht.Default){return(function Ln(){return $r}()||Ce)(Q(i),s)}function Ht(i){const s=[];for(let a=0;a<i.length;a++){const l=Q(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Ne(900,"");let c,p=ht.Default;for(let _=0;_<l.length;_++){const w=l[_],D=Er(w);"number"==typeof D?-1===D?c=w.token:p|=D:c=w}s.push(Ue(c,p))}else s.push(Ue(l))}return s}function An(i,s){return i[Jo]=s,i.prototype[Jo]=s,i}function Er(i){return i[Jo]}const qi=An($i("Inject",i=>({token:i})),-1),xr=An($i("Optional"),8),Or=An($i("SkipSelf"),4);let jl,$a;function Ru(i){var s;return(null===(s=function yd(){if(void 0===jl&&(jl=null,Ft.trustedTypes))try{jl=Ft.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return jl}())||void 0===s?void 0:s.createHTML(i))||i}function Ed(i){var s;return(null===(s=function vd(){if(void 0===$a&&($a=null,Ft.trustedTypes))try{$a=Ft.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return $a}())||void 0===s?void 0:s.createHTML(i))||i}class _o{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Oy extends _o{getTypeName(){return"HTML"}}class Hl extends _o{getTypeName(){return"Style"}}class Py extends _o{getTypeName(){return"Script"}}class nf extends _o{getTypeName(){return"URL"}}class ky extends _o{getTypeName(){return"ResourceURL"}}function fi(i){return i instanceof _o?i.changingThisBreaksApplicationSecurity:i}function Hs(i,s){const a=Gl(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function Gl(i){return i instanceof _o&&i.getTypeName()||null}function _g(i){return new Oy(i)}function wd(i){return new Hl(i)}function Fy(i){return new Py(i)}function Dd(i){return new nf(i)}function vg(i){return new ky(i)}class Ly{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(Ru(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class wg{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Ru(s),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Ru(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(s){const a=s.attributes;for(let c=a.length-1;0<c;c--){const _=a.item(c).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&s.removeAttribute(_)}let l=s.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const Ha=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Vy=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ta(i){return(i=String(i)).match(Ha)||i.match(Vy)?i:"unsafe:"+i}function zi(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function ql(...i){const s={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(s[l]=!0);return s}const bg=zi("area,br,col,hr,img,wbr"),xu=zi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),vo=zi("rp,rt"),of=ql(bg,ql(xu,zi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ql(vo,zi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ql(vo,xu)),af=zi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),uf=zi("srcset"),Id=ql(af,uf,zi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Wl=zi("script,style,template");class lf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let c=this.checkClobberedElement(a,a.nextSibling);if(c){a=c;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!of.hasOwnProperty(a))return this.sanitizedSomething=!0,!Wl.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=s.attributes;for(let c=0;c<l.length;c++){const p=l.item(c),_=p.name,w=_.toLowerCase();if(!Id.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let D=p.value;af[w]&&(D=ta(D)),uf[w]&&(i=D,D=(i=String(i)).split(",").map(s=>ta(s.trim())).join(", ")),this.buf.push(" ",_,'="',df(D),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();of.hasOwnProperty(a)&&!bg.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(df(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const cf=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Td=/([^\#-~ |!])/g;function df(i){return i.replace(/&/g,"&amp;").replace(cf,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(Td,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Cd;function Zl(i,s){let a=null;try{Cd=Cd||function Eg(i){const s=new wg(i);return function rf(){try{return!!(new window.DOMParser).parseFromString(Ru(""),"text/html")}catch(i){return!1}}()?new Ly(s):s}(i);let l=s?String(s):"";a=Cd.getInertBodyElement(l);let c=5,p=l;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,l=p,p=a.innerHTML,a=Cd.getInertBodyElement(l)}while(l!==p);return Ru((new lf).sanitizeChildren(Kl(a)||a))}finally{if(a){const l=Kl(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Kl(i){return"content"in i&&function Wi(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Sn=(()=>((Sn=Sn||{})[Sn.NONE=0]="NONE",Sn[Sn.HTML=1]="HTML",Sn[Sn.STYLE=2]="STYLE",Sn[Sn.SCRIPT=3]="SCRIPT",Sn[Sn.URL=4]="URL",Sn[Sn.RESOURCE_URL=5]="RESOURCE_URL",Sn))();function Ad(i){const s=Pu();return s?Ed(s.sanitize(Sn.HTML,i)||""):Hs(i,"HTML")?Ed(fi(i)):Zl(ds(),W(i))}function Ou(i){const s=Pu();return s?s.sanitize(Sn.URL,i)||"":Hs(i,"URL")?fi(i):ta(W(i))}function Pu(){const i=De();return i&&i[12]}const hf="__ngContext__";function Pr(i,s){i[hf]=s}function ff(i){const s=function Ga(i){return i[hf]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function gf(i){return i.ngOriginalError}function Sg(i,...s){i.error(...s)}class ar{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function $y(i){return i&&i.ngErrorLogger||Sg}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&gf(s);for(;a&&gf(a);)a=gf(a);return a||null}}const Rg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ft))();function g(i){return i instanceof Function?i():i}var le=(()=>((le=le||{})[le.Important=1]="Important",le[le.DashCase=2]="DashCase",le))();function Je(i,s){return undefined(i,s)}function wn(i){const s=i[3];return li(s)?s[3]:s}function nc(i){return vf(i[13])}function rc(i){return vf(i[4])}function vf(i){for(;null!==i&&!li(i);)i=i[4];return i}function ra(i,s,a,l,c){if(null!=l){let p,_=!1;li(l)?p=l:bi(l)&&(_=!0,l=l[0]);const w=Zt(l);0===i&&null!==a?null==c?c0(s,a,w):Vu(s,a,w,c||null,!0):1===i&&null!==a?Vu(s,a,w,c||null,!0):2===i?function y0(i,s,a){const l=Pg(i,s);l&&function h0(i,s,a,l){tn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=p&&function ia(i,s,a,l,c){const p=a[7];p!==Zt(a)&&ra(s,i,l,p,c);for(let w=10;w<a.length;w++){const D=a[w];Df(D[1],D,i,s,l,p)}}(s,i,p,a,c)}}function wr(i,s,a){if(tn(i))return i.createElement(s,a);{const l=null!==a?function cu(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function a0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Fs(c,-1)),a.splice(l,1)}function xg(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&a0(c,l),s>0&&(i[a-1][4]=l[4]);const p=Yo(i,10+s);!function Wy(i,s){Df(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function u0(i,s){if(!(256&s[2])){const a=s[11];tn(a)&&a.destroyNode&&Df(i,s,a,3,null,null),function Zy(i){let s=i[13];if(!s)return Og(i[1],i);for(;s;){let a=null;if(bi(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)bi(s)&&Og(s[1],s),s=s[3];null===s&&(s=i),bi(s)&&Og(s[1],s),a=s&&s[4]}s=a}}(s)}}function Og(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function Ky(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof zo)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const w=c[p[_]],D=p[_+1];try{D.call(w)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function l0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],w="function"==typeof _?_(s):Zt(s[_]),D=l[c=a[p+2]],C=a[p+3];"boolean"==typeof C?w.removeEventListener(a[p],D,C):C>=0?l[c=C]():l[c=-C].unsubscribe(),p+=2}else{const _=l[c=a[p+1]];a[p].call(_)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&tn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&li(s[3])){a!==s[3]&&a0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function oI(i,s,a){return function Lu(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Rt.None||c===Rt.Emulated)return null}return qn(l,a)}(i,s.parent,a)}function Vu(i,s,a,l,c){tn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function c0(i,s,a){tn(i)?i.appendChild(s,a):s.appendChild(a)}function d0(i,s,a,l,c){null!==l?Vu(i,s,a,l,c):c0(i,s,a)}function Pg(i,s){return tn(i)?i.parentNode(s):s.parentNode}let p0=function Yy(i,s,a){return 40&i.type?qn(i,a):null};function Ld(i,s,a,l){const c=oI(i,l,s),p=s[11],w=function f0(i,s,a){return p0(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let D=0;D<a.length;D++)d0(p,c,a[D],w,!1);else d0(p,c,a,w,!1)}function kg(i,s){if(null!==s){const a=s.type;if(3&a)return qn(s,i);if(4&a)return Fg(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return kg(i,l);{const c=i[s.index];return li(c)?Fg(-1,c):Zt(c)}}if(32&a)return Je(s,i)()||Zt(i[s.index]);{const l=m0(i,s);return null!==l?Array.isArray(l)?l[0]:kg(wn(i[16]),l):kg(i,s.next)}}return null}function m0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Fg(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return kg(l,c)}return s[7]}function _0(i,s,a,l,c,p,_){for(;null!=a;){const w=l[a.index],D=a.type;if(_&&0===s&&(w&&Pr(Zt(w),l),a.flags|=4),64!=(64&a.flags))if(8&D)_0(i,s,a.child,l,c,p,!1),ra(s,i,c,w,p);else if(32&D){const C=Je(a,l);let M;for(;M=C();)ra(s,i,c,M,p);ra(s,i,c,w,p)}else 16&D?Uu(i,s,l,a,c,p):ra(s,i,c,w,p);a=_?a.projectionNext:a.next}}function Df(i,s,a,l,c,p){_0(a,l,i.firstChild,s,c,p,!1)}function Uu(i,s,a,l,c,p){const _=a[16],D=_[6].projection[l.projection];if(Array.isArray(D))for(let C=0;C<D.length;C++)ra(s,i,c,D[C],p);else _0(i,s,D,_[3],c,p,!0)}function Jy(i,s,a){tn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Xy(i,s,a){tn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function E0(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const bf="ng-template";function Bu(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==E0(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function e_(i){return 4===i.type&&i.value!==bf}function pi(i,s,a){return s===(4!==i.type||a?i.value:bf)}function ju(i,s,a){let l=4;const c=i.attrs||[],p=function D0(i){for(let s=0;s<i.length;s++)if(ln(i[s]))return s;return i.length}(c);let _=!1;for(let w=0;w<s.length;w++){const D=s[w];if("number"!=typeof D){if(!_)if(4&l){if(l=2|1&l,""!==D&&!pi(i,D,a)||""===D&&1===s.length){if(wo(l))return!1;_=!0}}else{const C=8&l?D:s[++w];if(8&l&&null!==i.attrs){if(!Bu(i.attrs,C,a)){if(wo(l))return!1;_=!0}continue}const k=Lg(8&l?"class":D,c,e_(i),a);if(-1===k){if(wo(l))return!1;_=!0;continue}if(""!==C){let B;B=k>p?"":c[k+1].toLowerCase();const K=8&l?B:null;if(K&&-1!==E0(K,C,0)||2&l&&C!==B){if(wo(l))return!1;_=!0}}}}else{if(!_&&!wo(l)&&!wo(D))return!1;if(_&&wo(D))continue;_=!1,l=D|1&l}}return wo(l)||_}function wo(i){return 0==(1&i)}function Lg(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)p=!0;else{if(1===_||2===_){let w=s[++c];for(;"string"==typeof w;)w=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=p?1:2}return-1}return function b0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function t_(i,s,a=!1){for(let l=0;l<s.length;l++)if(ju(i,s[l],a))return!0;return!1}function n_(i,s){return i?":not("+s.trim()+")":s}function T0(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];c+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!wo(_)&&(s+=n_(p,c),c=""),l=_,p=p||!wo(l);a++}return""!==c&&(s+=n_(p,c)),s}const Dt={};function r_(i){i_(Nt(),De(),Wn()+i,Ra())}function i_(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&Pa(s,p,a)}else{const p=i.preOrderHooks;null!==p&&Al(s,p,0,a)}ps(a)}function Ug(i,s){return i<<17|s<<2}function qs(i){return i>>17&32767}function Bg(i){return 2|i}function Do(i){return(131068&i)>>2}function jg(i,s){return-131069&i|s<<2}function $g(i){return 1|i}function O0(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];Il(c),_.contentQueries(2,s[p],p)}}}function oc(i,s,a,l,c,p,_,w,D,C){const M=s.blueprint.slice();return M[0]=c,M[2]=140|l,ks(M),M[3]=M[15]=i,M[8]=a,M[10]=_||i&&i[10],M[11]=w||i&&i[11],M[12]=D||i&&i[12]||null,M[9]=C||i&&i[9]||null,M[6]=p,M[16]=2==s.type?i[16]:M,M}function Mf(i,s,a,l,c){let p=i.data[s];if(null===p)p=function Rf(i,s,a,l,c){const p=Ls(),_=wl(),D=i.data[s]=function F0(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=D),null!==p&&(_?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D)),D}(i,s,a,l,c),function Na(){return ut.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const _=function Ma(){const i=ut.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Rr(p,!0),p}function oa(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function $u(i,s,a){uo(s);try{const l=i.viewQuery;null!==l&&P_(1,l,a);const c=i.template;null!==c&&k0(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&O0(i,s),i.staticViewQueries&&P_(2,i.viewQuery,a);const p=i.components;null!==p&&function __(i,s){for(let a=0;a<s.length;a++)II(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,qo()}}function Io(i,s,a,l){const c=s[2];if(256==(256&c))return;uo(s);const p=Ra();try{ks(s),function bl(i){return ut.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&k0(i,s,a,2,l);const _=3==(3&c);if(!p)if(_){const C=i.preOrderCheckHooks;null!==C&&Pa(s,C,null)}else{const C=i.preOrderHooks;null!==C&&Al(s,C,0,null),mu(s,0)}if(function Yg(i){for(let s=nc(i);null!==s;s=rc(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(1024&c[2])&&Fs(p,1),c[2]|=1024}}}(s),function DI(i){for(let s=nc(i);null!==s;s=rc(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];Vi(l)&&Io(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&O0(i,s),!p)if(_){const C=i.contentCheckHooks;null!==C&&Pa(s,C)}else{const C=i.contentHooks;null!==C&&Al(s,C,1),mu(s,1)}!function y_(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)ps(~c);else{const p=c,_=a[++l],w=a[++l];xa(_,p),w(2,s[p])}}}finally{ps(-1)}}(i,s);const w=i.components;null!==w&&function P0(i,s){for(let a=0;a<s.length;a++)bI(i,s[a])}(s,w);const D=i.viewQuery;if(null!==D&&P_(2,D,l),!p)if(_){const C=i.viewCheckHooks;null!==C&&Pa(s,C)}else{const C=i.viewHooks;null!==C&&Al(s,C,2),mu(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Fs(s[3],-1))}finally{qo()}}function Nf(i,s,a,l){const c=s[10],p=!Ra(),_=Ho(s);try{p&&!_&&c.begin&&c.begin(),_&&$u(i,s,l),Io(i,s,a,l)}finally{p&&!_&&c.end&&c.end()}}function k0(i,s,a,l,c){const p=Wn(),_=2&l;try{ps(-1),_&&s.length>20&&i_(i,s,20,Ra()),a(l,c)}finally{ps(p)}}function zg(i,s,a){if(Hc(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function Wg(i,s,a){!El()||(function _I(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||yn(a,s),Pr(l,s);const _=a.initialInputs;for(let w=c;w<p;w++){const D=i.data[w],C=ci(D);C&&wI(s,a,D);const M=Ci(s,i,w,a);Pr(M,s),null!==_&&q0(0,w-c,M,D,0,_),C&&(zn(a.index,s)[8]=M)}}(i,s,a,qn(a,s)),128==(128&a.flags)&&function j0(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,w=function id(){return ut.lFrame.currentDirectiveIndex}();try{ps(_);for(let D=l;D<c;D++){const C=i.data[D],M=s[D];ao(D),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&I_(C,M)}}finally{ps(-1),ao(w)}}(i,s,a))}function xf(i,s,a=qn){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],w=-1===_?a(s,i):i[_];i[c++]=w}}}function v_(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=ac(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function ac(i,s,a,l,c,p,_,w,D,C){const M=20+l,k=M+c,B=function E_(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Dt);return a}(M,k),K="function"==typeof C?C():C;return B[1]={type:i,blueprint:B,template:a,queries:null,viewQuery:w,declTNode:s,data:B.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:D,consts:K,incompleteFirstPass:!1}}function D_(i,s,a,l){const c=SI(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&Jg(i).push(l,c.length-1))}function Zg(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function Ki(i,s,a,l,c,p,_,w){const D=qn(s,a);let M,C=s.inputs;!w&&null!=C&&(M=C[l])?(Z0(i,a,M,l,c),au(s)&&function gI(i,s){const a=zn(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Kg(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,tn(p)?p.setProperty(D,l,c):Zr(l)||(D.setProperty?D.setProperty(l,c):D[l]=c))}function V0(i,s,a,l){let c=!1;if(El()){const p=function $0(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];t_(a,_.selectors,!1)&&(c||(c=[]),_r(yn(a,s),i,_.type),ci(_)?(H0(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==p){c=!0,EI(a,i.data.length,p.length);for(let M=0;M<p.length;M++){const k=p[M];k.providersResolver&&k.providersResolver(k)}let w=!1,D=!1,C=oa(i,s,p.length,null);for(let M=0;M<p.length;M++){const k=p[M];a.mergedAttrs=yr(a.mergedAttrs,k.hostAttrs),T_(i,a,s,C,k),vI(C,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const B=k.type.prototype;!w&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!D&&(B.ngOnChanges||B.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),D=!0),C++}!function b_(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,_=[];let w=null,D=null;for(let C=s.directiveStart;C<l;C++){const M=c[C],k=M.inputs,B=null===p||e_(s)?null:A_(k,p);_.push(B),w=Zg(k,C,w),D=Zg(M.outputs,C,D)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=D}(i,a)}_&&function G0(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new Ne(-301,!1);l.push(s[c],p)}}}(a,l,_)}return a.mergedAttrs=yr(a.mergedAttrs,a.attrs),c}function U0(i,s,a,l,c,p){const _=p.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const D=~s.index;(function B0(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=D&&w.push(D),w.push(l,c,_)}}function I_(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function H0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function vI(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;ci(s)&&(a[""]=i)}}function EI(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function T_(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=di(c.type)),_=new zo(p,ci(c),null);i.blueprint[l]=_,a[l]=_,U0(i,s,0,l,oa(i,a,c.hostVars,Dt),c)}function wI(i,s,a){const l=qn(s,i),c=v_(a),p=i[10],_=Ff(i,oc(i,c,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function To(i,s,a,l,c,p){const _=qn(i,s);!function C_(i,s,a,l,c,p,_){if(null==p)tn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const w=null==_?W(p):_(p,l||"",c);tn(i)?i.setAttribute(s,c,w,a):a?s.setAttributeNS(a,c,w):s.setAttribute(c,w)}}(s[11],_,p,i.value,a,l,c)}function q0(i,s,a,l,c,p){const _=p[s];if(null!==_){const w=l.setInput;for(let D=0;D<_.length;){const C=_[D++],M=_[D++],k=_[D++];null!==w?l.setInput(a,k,C,M):a[M]=k}}}function A_(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function S_(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function bI(i,s){const a=zn(s,i);if(Vi(a)){const l=a[1];80&a[2]?Io(l,a,l.template,a[8]):a[5]>0&&kf(a)}}function kf(i){for(let l=nc(i);null!==l;l=rc(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const _=p[1];Io(_,p,_.template,p[8])}else p[5]>0&&kf(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=zn(a[l],i);Vi(c)&&c[5]>0&&kf(c)}}function II(i,s){const a=zn(s,i),l=a[1];(function M_(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),$u(l,a,a[8])}function Ff(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function R_(i){for(;i;){i[2]|=64;const s=wn(i);if($h(i)&&!s)return i;i=s}return null}function Qg(i,s,a){const l=s[10];l.begin&&l.begin();try{Io(i,s,i.template,a)}catch(c){throw k_(s,c),c}finally{l.end&&l.end()}}function z0(i){!function x_(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=ff(a),c=l[1];Nf(c,l,c.template,a)}}(i[8])}function P_(i,s,a){Il(0),s(i,a)}const AI=(()=>Promise.resolve(null))();function SI(i){return i[7]||(i[7]=[])}function Jg(i){return i.cleanup||(i.cleanup=[])}function k_(i,s){const a=i[9],l=a?a.get(ar,null):null;l&&l.handleError(s)}function Z0(i,s,a,l,c){for(let p=0;p<a.length;){const _=a[p++],w=a[p++],D=s[_],C=i.data[_];null!==C.setInput?C.setInput(D,c,l,w):D[w]=c}}function aa(i,s,a){const l=oo(s,i);!function Ef(i,s,a){tn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function ua(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?p=w:1==p?c=de(c,w):2==p&&(l=de(l,w+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Xg=new _n("INJECTOR",-1);class Y0{get(s,a=vs){if(a===vs){const l=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw l.name="NullInjectorError",l}return a}}const F_=new _n("Set Injector scope."),uc={},Q0={};let L_;function V_(){return void 0===L_&&(L_=new Y0),L_}function J0(i,s=null,a=null,l){const c=U_(i,s,a,l);return c._resolveInjectorDefTypes(),c}function U_(i,s=null,a=null,l){return new RI(i,a,s||V_(),l)}class RI{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Qr(a,w=>this.processProvider(w,s,a)),Qr([s],w=>this.processInjectorType(w,[],p)),this.records.set(Xg,Lf(void 0,this));const _=this.records.get(F_);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:ce(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=vs,l=ht.Default){this.assertNotDestroyed();const c=Y(this),p=In(void 0);try{if(!(l&ht.SkipSelf)){let w=this.records.get(s);if(void 0===w){const D=function LI(i){return"function"==typeof i||"object"==typeof i&&i instanceof _n}(s)&&xt(s);w=D&&this.injectableDefInScope(D)?Lf(em(s),uc):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&ht.Self?V_():this.parent).get(s,a=l&ht.Optional&&a===vs?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Au]=_[Au]||[]).unshift(ce(s)),c)throw _;return function fn(i,s,a,l){const c=i[Au];throw s[R]&&c.unshift(s[R]),i.message=function Es(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ce(s);if(Array.isArray(s))c=s.map(ce).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];p.push(_+":"+("string"==typeof w?JSON.stringify(w):ce(w)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(b,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[Au]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{In(p),Y(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(ce(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processInjectorType(s,a,l){if(!(s=Q(s)))return!1;let c=Cr(s);const p=null==c&&s.ngModule||void 0,_=void 0===p?s:p,w=-1!==l.indexOf(_);if(void 0!==p&&(c=Cr(p)),null==c)return!1;if(null!=c.imports&&!w){let M;l.push(_);try{Qr(c.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===M&&(M=[]),M.push(k))})}finally{}if(void 0!==M)for(let k=0;k<M.length;k++){const{ngModule:B,providers:K}=M[k];Qr(K,me=>this.processProvider(me,B,K||V))}}this.injectorDefTypes.add(_);const D=di(_)||(()=>new _);this.records.set(_,Lf(D,uc));const C=c.providers;if(null!=C&&!w){const M=s;Qr(C,k=>this.processProvider(k,M,C))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let c=lc(s=Q(s))?s:Q(s&&s.provide);const p=function X0(i,s,a){return OI(i)?Lf(void 0,i.useValue):Lf(xI(i),uc)}(s);if(lc(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=Lf(void 0,uc,!0),_.factory=()=>Ht(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===uc&&(a.value=Q0,a.value=a.factory()),"object"==typeof a.value&&a.value&&function dS(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function em(i){const s=xt(i),a=null!==s?s.factory:di(i);if(null!==a)return a;if(i instanceof _n)throw new Ne(204,!1);if(i instanceof Function)return function NI(i){const s=i.length;if(s>0)throw function Hi(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Ne(204,!1);const a=function rr(i){const s=i&&(i[Fi]||i[ai]);if(s){const a=function As(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ne(204,!1)}function xI(i,s,a){let l;if(lc(i)){const c=Q(i);return di(c)||em(c)}if(OI(i))l=()=>Q(i.useValue);else if(function cS(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Ht(i.deps||[]));else if(function PI(i){return!(!i||!i.useExisting)}(i))l=()=>Ue(Q(i.useExisting));else{const c=Q(i&&(i.useClass||i.provide));if(!function FI(i){return!!i.deps}(i))return di(c)||em(c);l=()=>new c(...Ht(i.deps))}return l}function Lf(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function OI(i){return null!==i&&"object"==typeof i&&F in i}function lc(i){return"function"==typeof i}let un=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return J0({name:""},l,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return J0({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=vs,i.NULL=new Y0,i.\u0275prov=qt({token:i,providedIn:"any",factory:()=>Ue(Xg)}),i.__NG_ELEMENT_ID__=-1,i})();function Hu(i,s){gs(ff(i)[1],dn())}function nm(i){let s=function ow(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(ci(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Ne(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=j_(i.inputs),_.declaredInputs=j_(i.declaredInputs),_.outputs=j_(i.outputs);const w=c.hostBindings;w&&rm(i,w);const D=c.viewQuery,C=c.contentQueries;if(D&&uw(i,D),C&&$_(i,C),re(i.inputs,c.inputs),re(i.declaredInputs,c.declaredInputs),re(i.outputs,c.outputs),ci(c)&&c.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let _=0;_<p.length;_++){const w=p[_];w&&w.ngInherit&&w(i),w===nm&&(a=!1)}}s=Object.getPrototypeOf(s)}!function aw(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=yr(c.hostAttrs,a=yr(a,c.hostAttrs))}}(l)}function j_(i){return i===ui?{}:i===V?[]:i}function uw(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function $_(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function rm(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Lr=null;function dc(){if(!Lr){const i=Ft.Symbol;if(i&&i.iterator)Lr=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Lr=l)}}}return Lr}function hc(i){return!!im(i)&&(Array.isArray(i)||!(i instanceof Map)&&dc()in i)}function im(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function gi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function sm(i,s,a,l){const c=De();return gi(c,Ui(),s)&&(Nt(),To(mn(),c,i,s,a,l)),sm}function $f(i,s,a,l,c,p,_,w){const D=De(),C=Nt(),M=i+20,k=C.firstCreatePass?function om(i,s,a,l,c,p,_,w,D){const C=s.consts,M=Mf(s,i,4,_||null,Wr(C,w));V0(s,a,M,Wr(C,D)),gs(s,M);const k=M.tViews=ac(2,M,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,M),k.queries=s.queries.embeddedTView(M)),M}(M,C,D,s,a,l,c,p,_):C.data[M];Rr(k,!1);const B=D[11].createComment("");Ld(C,D,B,k),Pr(B,D),Ff(D,D[M]=S_(B,D,B,k)),Ns(k)&&Wg(C,D,k),null!=_&&xf(D,k,w)}function qf(i,s=ht.Default){const a=De();return null===a?Ue(i,s):Ua(dn(),a,Q(i),s)}function Zu(){throw new Error("invalid")}function cm(i,s,a){const l=De();return gi(l,Ui(),s)&&Ki(Nt(),mn(),l,i,s,l[11],a,!1),cm}function Yd(i,s,a,l,c){const _=c?"class":"style";Z0(i,a,s.inputs[_],_,l)}function pc(i,s,a,l){const c=De(),p=Nt(),_=20+i,w=c[11],D=c[_]=wr(w,s,function od(){return ut.lFrame.currentNamespace}()),C=p.firstCreatePass?function Aw(i,s,a,l,c,p,_){const w=s.consts,C=Mf(s,i,2,c,Wr(w,p));return V0(s,a,C,Wr(w,_)),null!==C.attrs&&ua(C,C.attrs,!1),null!==C.mergedAttrs&&ua(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(_,p,c,0,s,a,l):p.data[_];Rr(C,!0);const M=C.mergedAttrs;null!==M&&Qe(w,D,M);const k=C.classes;null!==k&&Xy(w,D,k);const B=C.styles;null!==B&&Jy(w,D,B),64!=(64&C.flags)&&Ld(p,c,D,C),0===function Ta(){return ut.lFrame.elementDepthCount}()&&Pr(D,c),function ed(){ut.lFrame.elementDepthCount++}(),Ns(C)&&(Wg(p,c,C),zg(p,C,c)),null!==l&&xf(c,C)}function dm(){let i=dn();wl()?Dl():(i=i.parent,Rr(i,!1));const s=i;!function Ca(){ut.lFrame.elementDepthCount--}();const a=Nt();a.firstCreatePass&&(gs(a,i),Hc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function ad(i){return 0!=(16&i.flags)}(s)&&Yd(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function pg(i){return 0!=(32&i.flags)}(s)&&Yd(a,s,De(),s.stylesWithoutHost,!1)}function yi(i,s,a,l){pc(i,s,a,l),dm()}function Qd(i,s,a){const l=De(),c=Nt(),p=i+20,_=c.firstCreatePass?function zf(i,s,a,l,c){const p=s.consts,_=Wr(p,l),w=Mf(s,i,8,"ng-container",_);return null!==_&&ua(w,_,!0),V0(s,a,w,Wr(p,c)),null!==s.queries&&s.queries.elementStart(s,w),w}(p,c,l,s,a):c.data[p];Rr(_,!0);const w=l[p]=l[11].createComment("");Ld(c,l,w,_),Pr(w,l),Ns(_)&&(Wg(c,l,_),zg(c,_,l)),null!=a&&xf(l,_)}function hm(){let i=dn();const s=Nt();wl()?Dl():(i=i.parent,Rr(i,!1)),s.firstCreatePass&&(gs(s,i),Hc(i)&&s.queries.elementEnd(i))}function av(){return De()}function fm(i){return!!i&&"function"==typeof i.then}function Jd(i){return!!i&&"function"==typeof i.subscribe}const pm=Jd;function Wf(i,s,a,l){const c=De(),p=Nt(),_=dn();return function Xd(i,s,a,l,c,p,_,w){const D=Ns(l),M=i.firstCreatePass&&Jg(i),k=s[8],B=SI(s);let K=!0;if(3&l.type||w){const $e=qn(l,s),We=w?w($e):$e,we=B.length,et=w?Pt=>w(Zt(Pt[l.index])):l.index;if(tn(a)){let Pt=null;if(!w&&D&&(Pt=function mm(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const _=c[p];if(_===a&&c[p+1]===l){const w=s[7],D=c[p+2];return w.length>D?w[D]:null}"string"==typeof _&&(p+=2)}return null}(i,s,c,l.index)),null!==Pt)(Pt.__ngLastListenerFn__||Pt).__ngNextListenerFn__=p,Pt.__ngLastListenerFn__=p,K=!1;else{p=lv(l,s,k,p,!1);const Bt=a.listen(We,c,p);B.push(p,Bt),M&&M.push(c,et,we,we+1)}}else p=lv(l,s,k,p,!0),We.addEventListener(c,p,_),B.push(p),M&&M.push(c,et,we,_)}else p=lv(l,s,k,p,!1);const me=l.outputs;let Pe;if(K&&null!==me&&(Pe=me[c])){const $e=Pe.length;if($e)for(let We=0;We<$e;We+=2){const Ur=s[Pe[We]][Pe[We+1]].subscribe(p),dl=B.length;B.push(p,Ur),M&&M.push(c,l.index,dl,-(dl+1))}}}(p,c,c[11],_,i,s,!!a,l),Wf}function uv(i,s,a,l){try{return!1!==a(l)}catch(c){return k_(i,c),!1}}function lv(i,s,a,l,c){return function p(_){if(_===Function)return l;const w=2&i.flags?zn(i.index,s):s;0==(32&s[2])&&R_(w);let D=uv(s,0,l,_),C=p.__ngNextListenerFn__;for(;C;)D=uv(s,0,C,_)&&D,C=C.__ngNextListenerFn__;return c&&!1===D&&(_.preventDefault(),_.returnValue=!1),D}}function ym(i=1){return function Bi(i){return(ut.lFrame.contextLView=function zh(i,s){for(;i>0;)s=s[15],i--;return s}(i,ut.lFrame.contextLView))[8]}(i)}function Yu(i,s,a,l,c){const p=i[a+1],_=null===s;let w=l?qs(p):Do(p),D=!1;for(;0!==w&&(!1===D||_);){const M=i[w+1];xw(i[w],s)&&(D=!0,i[w+1]=l?$g(M):Bg(M)),w=l?qs(M):Do(M)}D&&(i[a+1]=l?Bg(p):$g(p))}function xw(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&ja(i,s)>=0}const Dr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Qu(i){return i.substring(Dr.key,Dr.keyEnd)}function Kf(i,s){const a=Dr.textEnd;return a===s?-1:(s=Dr.keyEnd=function zI(i,s,a){for(;s<a&&i.charCodeAt(s)>32;)s++;return s}(i,Dr.key=s,a),Qa(i,s,a))}function Qa(i,s,a){for(;s<a&&i.charCodeAt(s)<=32;)s++;return s}function gv(i,s,a){return Ks(i,s,a,!1),gv}function mv(i,s){return Ks(i,s,null,!0),mv}function ih(i){!function Ys(i,s,a,l){const c=Nt(),p=fs(2);c.firstUpdatePass&&gc(c,null,p,l);const _=De();if(a!==Dt&&gi(_,p,a)){const w=c.data[Wn()];if(Fw(w,l)&&!yv(c,p)){let D=l?w.classesWithoutHost:w.stylesWithoutHost;null!==D&&(a=de(D,a||"")),Yd(c,w,_,a,l)}else!function kw(i,s,a,l,c,p,_,w){c===Dt&&(c=V);let D=0,C=0,M=0<c.length?c[0]:null,k=0<p.length?p[0]:null;for(;null!==M||null!==k;){const B=D<c.length?c[D+1]:void 0,K=C<p.length?p[C+1]:void 0;let Pe,me=null;M===k?(D+=2,C+=2,B!==K&&(me=k,Pe=K)):null===k||null!==M&&M<k?(D+=2,me=M):(C+=2,me=k,Pe=K),null!==me&&vv(i,s,a,l,me,Pe,_,w),M=D<c.length?c[D]:null,k=C<p.length?p[C]:null}}(c,w,_,_[11],_[p+1],_[p+1]=function _v(i,s,a){if(null==a||""===a)return V;const l=[],c=fi(a);if(Array.isArray(c))for(let p=0;p<c.length;p++)i(l,c[p],!0);else if("object"==typeof c)for(const p in c)c.hasOwnProperty(p)&&i(l,p,c[p]);else"string"==typeof c&&s(l,c);return l}(i,s,a),l,p)}}(Nr,ni,i,!0)}function ni(i,s){for(let a=function wm(i){return function Dn(i){Dr.key=0,Dr.keyEnd=0,Dr.value=0,Dr.valueEnd=0,Dr.textEnd=i.length}(i),Kf(i,Qa(i,0,Dr.textEnd))}(s);a>=0;a=Kf(s,a))Nr(i,Qu(s),!0)}function Ks(i,s,a,l){const c=De(),p=Nt(),_=fs(2);p.firstUpdatePass&&gc(p,i,_,l),s!==Dt&&gi(c,_,s)&&vv(p,p.data[Wn()],c,c[11],i,c[_+1]=function XI(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ce(fi(i)))),i}(s,a),l,_)}function yv(i,s){return s>=i.expandoStartIndex}function gc(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[Wn()],_=yv(i,a);Fw(p,l)&&null===s&&!_&&(s=!1),s=function YI(i,s,a,l){const c=pu(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=sh(a=bm(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=bm(c,i,s,a,l),null===p){let D=function QI(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Do(l))return i[qs(l)]}(i,s,l);void 0!==D&&Array.isArray(D)&&(D=bm(null,i,s,D[1],l),D=sh(D,s.attrs,l),function Pw(i,s,a,l){i[qs(a?s.classBindings:s.styleBindings)]=l}(i,s,l,D))}else p=function JI(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=sh(l,i[p].hostAttrs,a);return sh(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function nh(i,s,a,l,c,p){let _=p?s.classBindings:s.styleBindings,w=qs(_),D=Do(_);i[l]=a;let M,C=!1;if(Array.isArray(a)){const k=a;M=k[1],(null===M||ja(k,M)>0)&&(C=!0)}else M=a;if(c)if(0!==D){const B=qs(i[w+1]);i[l+1]=Ug(B,w),0!==B&&(i[B+1]=jg(i[B+1],l)),i[w+1]=function a_(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=Ug(w,0),0!==w&&(i[w+1]=jg(i[w+1],l)),w=l;else i[l+1]=Ug(D,0),0===w?w=l:i[D+1]=jg(i[D+1],l),D=l;C&&(i[l+1]=Bg(i[l+1])),Yu(i,M,l,!0),Yu(i,M,l,!1),function fv(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&ja(p,s)>=0&&(a[l+1]=$g(a[l+1]))}(s,M,i,l,p),_=Ug(w,D),p?s.classBindings=_:s.styleBindings=_}(c,p,s,a,_,l)}}function bm(i,s,a,l,c){let p=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(p=s[w],l=sh(l,p.hostAttrs,c),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function sh(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Nr(i,_,!!a||s[++p]))}return void 0===i?null:i}function vv(i,s,a,l,c,p,_,w){if(!(3&s.type))return;const D=i.data,C=D[w+1];Cm(function u_(i){return 1==(1&i)}(C)?Tm(D,s,a,c,Do(C),_):void 0)||(Cm(p)||function o_(i){return 2==(2&i)}(C)&&(p=Tm(D,null,a,c,w,_)),function uI(i,s,a,l,c){const p=tn(i);if(s)c?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:le.DashCase;if(null==c)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof c&&c.endsWith("!important");w&&(c=c.slice(0,-10),_|=le.Important),p?i.setStyle(a,l,c,_):a.style.setProperty(l,c,w?"important":"")}}}(l,_,oo(Wn(),a),c,p))}function Tm(i,s,a,l,c,p){const _=null===s;let w;for(;c>0;){const D=i[c],C=Array.isArray(D),M=C?D[1]:D,k=null===M;let B=a[c+1];B===Dt&&(B=k?V:void 0);let K=k?Iu(B,l):M===l?B:void 0;if(C&&!Cm(K)&&(K=Iu(D,l)),Cm(K)&&(w=K,_))return w;const me=i[c+1];c=_?qs(me):Do(me)}if(null!==s){let D=p?s.residualClasses:s.residualStyles;null!=D&&(w=Iu(D,l))}return w}function Cm(i){return void 0!==i}function Fw(i,s){return 0!=(i.flags&(s?16:32))}function Qf(i,s=""){const a=De(),l=Nt(),c=i+20,p=l.firstCreatePass?Mf(l,c,1,s,null):l.data[c],_=a[c]=function ic(i,s){return tn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Ld(l,a,_,p),Rr(p,!1)}function mc(i){return yc("",i,""),mc}function yc(i,s,a){const l=De(),c=function fc(i,s,a,l){return gi(i,Ui(),a)?s+W(a)+l:Dt}(l,i,s,a);return c!==Dt&&aa(l,Wn(),c),yc}function xm(i,s,a){const l=De();if(gi(l,Ui(),s)){const p=Nt(),_=mn();Ki(p,_,l,i,s,function W0(i,s,a){return(null===i||ci(i))&&(a=function hu(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(a[s.index])),a[11]}(pu(p.data),_,l),a,!0)}return xm}const Ju=void 0;var Ww=["en",[["a","p"],["AM","PM"],Ju],[["AM","PM"],Ju,Ju],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ju,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ju,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ju,"{1} 'at' {0}",Ju],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _c(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let vc={};function Om(i){const s=function oT(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Rv(s);if(a)return a;const l=s.split("-")[0];if(a=Rv(l),a)return a;if("en"===l)return Ww;throw new Error(`Missing locale data for the locale "${i}".`)}function Qi(i){return Om(i)[lt.PluralCase]}function Rv(i){return i in vc||(vc[i]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[i]),vc[i]}var lt=(()=>((lt=lt||{})[lt.LocaleId=0]="LocaleId",lt[lt.DayPeriodsFormat=1]="DayPeriodsFormat",lt[lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",lt[lt.DaysFormat=3]="DaysFormat",lt[lt.DaysStandalone=4]="DaysStandalone",lt[lt.MonthsFormat=5]="MonthsFormat",lt[lt.MonthsStandalone=6]="MonthsStandalone",lt[lt.Eras=7]="Eras",lt[lt.FirstDayOfWeek=8]="FirstDayOfWeek",lt[lt.WeekendRange=9]="WeekendRange",lt[lt.DateFormat=10]="DateFormat",lt[lt.TimeFormat=11]="TimeFormat",lt[lt.DateTimeFormat=12]="DateTimeFormat",lt[lt.NumberSymbols=13]="NumberSymbols",lt[lt.NumberFormats=14]="NumberFormats",lt[lt.CurrencyCode=15]="CurrencyCode",lt[lt.CurrencySymbol=16]="CurrencySymbol",lt[lt.CurrencyName=17]="CurrencyName",lt[lt.Currencies=18]="Currencies",lt[lt.Directionality=19]="Directionality",lt[lt.PluralCase=20]="PluralCase",lt[lt.ExtraData=21]="ExtraData",lt))();const Pm="en-US";let xv=Pm;function $m(i,s,a,l,c){if(i=Q(i),Array.isArray(i))for(let p=0;p<i.length;p++)$m(i[p],s,a,l,c);else{const p=Nt(),_=De();let w=lc(i)?i:Q(i.provide),D=xI(i);const C=dn(),M=1048575&C.providerIndexes,k=C.directiveStart,B=C.providerIndexes>>20;if(lc(i)||!i.multi){const K=new zo(D,c,qf),me=Hv(w,s,c?M:M+B,k);-1===me?(_r(yn(C,_),p,w),$v(p,i,s.length),s.push(w),C.directiveStart++,C.directiveEnd++,c&&(C.providerIndexes+=1048576),a.push(K),_.push(K)):(a[me]=K,_[me]=K)}else{const K=Hv(w,s,M+B,k),me=Hv(w,s,M,M+B),Pe=K>=0&&a[K],$e=me>=0&&a[me];if(c&&!$e||!c&&!Pe){_r(yn(C,_),p,w);const We=function gh(i,s,a,l,c){const p=new zo(i,a,qf);return p.multi=[],p.index=s,p.componentProviders=0,rD(p,c,l&&!a),p}(c?hp:bT,a.length,c,l,D);!c&&$e&&(a[me].providerFactory=We),$v(p,i,s.length,0),s.push(w),C.directiveStart++,C.directiveEnd++,c&&(C.providerIndexes+=1048576),a.push(We),_.push(We)}else $v(p,i,K>-1?K:me,rD(a[c?me:K],D,!c&&l));!c&&l&&$e&&a[me].componentProviders++}}}function $v(i,s,a,l){const c=lc(s),p=function kI(i){return!!i.useClass}(s);if(c||p){const D=(p?Q(s.useClass):s).prototype.ngOnDestroy;if(D){const C=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const M=C.indexOf(a);-1===M?C.push(a,[l,D]):C[M+1].push(l,D)}else C.push(a,D)}}}function rD(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Hv(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function bT(i,s,a,l){return ph(this.multi,[])}function hp(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=Ci(a,a[1],this.providerFactory.index,l);p=w.slice(0,_),ph(c,p);for(let D=_;D<w.length;D++)p.push(w[D])}else p=[],ph(c,p);return p}function ph(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function iD(i,s=[]){return a=>{a.providersResolver=(l,c)=>function DT(i,s,a){const l=Nt();if(l.firstCreatePass){const c=ci(i);$m(a,l.data,l.blueprint,c,!0),$m(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class Gv{}class Hm{resolveComponentFactory(s){throw function eu(i){const s=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let rl=(()=>{class i{}return i.NULL=new Hm,i})();function zv(){return il(dn(),De())}function il(i,s){return new Dc(qn(i,s))}let Dc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=zv,i})();function mh(i){return i instanceof Dc?i.nativeElement:i}class Wv{}let pp=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Zv(){const i=De(),a=zn(dn().index,i);return function oD(i){return i[11]}(bi(a)?a:i)}(),i})(),gp=(()=>{class i{}return i.\u0275prov=qt({token:i,providedIn:"root",factory:()=>null}),i})();class Kv{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const aD=new Kv("13.2.2"),Gm={};function mp(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(Zt(p)),li(p))for(let w=10;w<p.length;w++){const D=p[w],C=D[1].firstChild;null!==C&&mp(D[1],D,C,l)}const _=a.type;if(8&_)mp(i,s,a.child,l);else if(32&_){const w=Je(a,s);let D;for(;D=w();)l.push(D)}else if(16&_){const w=m0(s,a);if(Array.isArray(w))l.push(...w);else{const D=wn(s[16]);mp(D[1],D,w,l,!0)}}a=c?a.projectionNext:a.next}return l}class yh{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return mp(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(li(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(xg(s,l),Yo(a,l))}this._attachedToViewContainer=!1}u0(this._lView[1],this._lView)}onDestroy(s){D_(this._lView[1],this._lView,null,s)}markForCheck(){R_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Qg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function O_(i,s,a){Go(!0);try{Qg(i,s,a)}finally{Go(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sc(i,s){Df(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=s}}class qm extends yh{constructor(s){super(s),this._view=s}detectChanges(){z0(this._view)}checkNoChanges(){!function TI(i){Go(!0);try{z0(i)}finally{Go(!1)}}(this._view)}get context(){return null}}class uD extends rl{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Un(s);return new zm(a,this.ngModule)}}function lD(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const _h=new _n("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Rg});class zm extends Gv{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function C0(i){return i.map(T0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return lD(this.componentDef.inputs)}get outputs(){return lD(this.componentDef.outputs)}create(s,a,l,c){const p=(c=c||this.ngModule)?function bc(i,s){return{get:(a,l,c)=>{const p=i.get(a,Gm,c);return p!==Gm||l===Gm?p:s.get(a,l,c)}}}(s,c.injector):s,_=p.get(Wv,Da),w=p.get(gp,null),D=_.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",M=l?function w_(i,s,a){if(tn(i))return i.selectRootElement(s,a===Rt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(D,l,this.componentDef.encapsulation):wr(_.createRenderer(null,this.componentDef),C,function cD(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(C)),k=this.componentDef.onPush?576:528,B=function Fr(i,s){return{components:[],scheduler:i||Rg,clean:AI,playerHandler:s||null,flags:0}}(),K=ac(0,null,null,1,0,null,null,null,null,null),me=oc(null,K,B,k,null,null,_,D,w,p);let Pe,$e;uo(me);try{const We=function kr(i,s,a,l,c,p){const _=a[1];a[20]=i;const D=Mf(_,20,2,"#host",null),C=D.mergedAttrs=s.hostAttrs;null!==C&&(ua(D,C,!0),null!==i&&(Qe(c,i,C),null!==D.classes&&Xy(c,i,D.classes),null!==D.styles&&Jy(c,i,D.styles)));const M=l.createRenderer(i,s),k=oc(a,v_(s),null,s.onPush?64:16,a[20],D,l,M,p||null,null);return _.firstCreatePass&&(_r(yn(D,a),_,s.type),H0(_,D),EI(D,a.length,1)),Ff(a,k),a[20]=k}(M,this.componentDef,me,_,D);if(M)if(l)Qe(D,M,["ng-version",aD.full]);else{const{attrs:we,classes:et}=function Vg(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!wo(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);we&&Qe(D,M,we),et&&et.length>0&&Xy(D,M,et.join(" "))}if($e=gn(K,20),void 0!==a){const we=$e.projection=[];for(let et=0;et<this.ngContentSelectors.length;et++){const Pt=a[et];we.push(null!=Pt?Array.from(Pt):null)}}Pe=function Uf(i,s,a,l,c){const p=a[1],_=function aS(i,s,a){const l=dn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),T_(i,l,s,oa(i,s,1,null),a));const c=Ci(s,i,l.directiveStart,l);Pr(c,s);const p=qn(l,s);return p&&Pr(p,s),c}(p,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(D=>D(_,s)),s.contentQueries){const D=dn();s.contentQueries(1,_,D.directiveStart)}const w=dn();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(ps(w.index),U0(a[1],w,0,w.directiveStart,w.directiveEnd,s),I_(s,_)),_}(We,this.componentDef,me,B,[Hu]),$u(K,me,null)}finally{qo()}return new vh(this.componentType,Pe,il($e,me),me,$e)}}class vh extends class sD{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new qm(c),this.componentType=s}get injector(){return new hn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Tc{}class Eh{}const wh=new Map;class pD extends Tc{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new uD(this);const l=Bn(s);this._bootstrapComponents=g(l.bootstrap),this._r3Injector=U_(s,a,[{provide:Tc,useValue:this},{provide:rl,useValue:this.componentFactoryResolver}],ce(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=un.THROW_IF_NOT_FOUND,l=ht.Default){return s===un||s===Tc||s===Xg?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Zm extends Eh{constructor(s){super(),this.moduleType=s,null!==Bn(s)&&function Wm(i){const s=new Set;!function a(l){const c=Bn(l,!0),p=c.id;null!==p&&(function er(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ce(s)} vs ${ce(s.name)}`)}(p,wh.get(p),l),wh.set(p,l));const _=g(c.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new pD(this.moduleType,s)}}function Jt(i){return s=>{setTimeout(i,void 0,s)}}const da=class MT extends f.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,p,_;let w=s,D=a||(()=>null),C=l;if(s&&"object"==typeof s){const k=s;w=null===(c=k.next)||void 0===c?void 0:c.bind(k),D=null===(p=k.error)||void 0===p?void 0:p.bind(k),C=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(D=Jt(D),w&&(w=Jt(w)),C&&(C=Jt(C)));const M=super.subscribe({next:w,error:D,complete:C});return s instanceof X.w0&&s.add(M),M}};function Km(){return this._results[dc()]()}class Cc{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=dc(),l=Cc.prototype;l[a]||(l[a]=Km)}get changes(){return this._changes||(this._changes=new da)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=vr(s);(this._changesDetected=!function Pl(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let tu=(()=>{class i{}return i.__NG_ELEMENT_ID__=wD,i})();const Ym=tu,ED=class extends Ym{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=oc(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),$u(a,l,s),new yh(l)}};function wD(){return Ep(dn(),De())}function Ep(i,s){return 4&i.type?new ED(s,i,il(i,s)):null}let Qm=(()=>{class i{}return i.__NG_ELEMENT_ID__=DD,i})();function DD(){return bh(dn(),De())}const bD=Qm,ID=class extends bD{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return il(this._hostTNode,this._hostLView)}get injector(){return new hn(this._hostTNode,this._hostLView)}get parentInjector(){const s=yu(this._hostTNode,this._hostLView);if(ud(s)){const a=ys(s,this._hostLView),l=an(s);return new hn(a[1].data[l+8],a)}return new hn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=TD(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,p){const _=s&&!function mo(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const k=a||{};w=k.index,l=k.injector,c=k.projectableNodes,p=k.ngModuleRef}const D=_?s:new zm(Un(s)),C=l||this.parentInjector;if(!p&&null==D.ngModule&&C){const k=C.get(Tc,null);k&&(p=k)}const M=D.create(C,c,void 0,p);return this.insert(M.hostView,w),M}insert(s,a){const l=s._lView,c=l[1];if(function vl(i){return li(i[3])}(l)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const k=l[3],B=new ID(k,k[6],k[3]);B.detach(B.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function Fd(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],kl(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function sI(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(c,l,_,p);const w=Fg(p,_),D=l[11],C=Pg(D,_[7]);return null!==C&&function Fu(i,s,a,l,c,p){l[0]=c,l[6]=s,Df(i,l,a,1,c,p)}(c,_[6],D,l,C,w),s.attachToViewContainerRef(),kl(tE(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=TD(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=xg(this._lContainer,a);l&&(Yo(tE(this._lContainer),a),u0(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=xg(this._lContainer,a);return l&&null!=Yo(tE(this._lContainer),a)?new yh(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function TD(i){return i[8]}function tE(i){return i[8]||(i[8]=[])}function bh(i,s){let a;const l=s[i.index];if(li(l))a=l;else{let c;if(8&i.type)c=Zt(l);else{const p=s[11];c=p.createComment("");const _=qn(i,s);Vu(p,Pg(p,_),c,function aI(i,s){return tn(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=S_(l,s,c,i),Ff(s,a)}return new ID(a,i,s)}class wp{constructor(s){this.queryList=s,this.matches=null}clone(){return new wp(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);c.push(this.queries[_.indexInDeclarationView].clone())}return new Jm(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==aE(s,a).matches&&this.queries[a].setDirty()}}class Ih{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Js{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Js(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Dp{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Dp(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,AD(a,p)),this.matchTNodeWithReadOption(s,a,po(a,s,p,!1,!1))}else l===tu?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,po(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Dc||c===Qm||c===tu&&4&a.type)this.addMatch(a.index,-2);else{const p=po(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function AD(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function SD(i,s,a,l){return-1===a?function bp(i,s){return 11&i.type?il(i,s):4&i.type?Ep(i,s):null}(s,i):-2===a?function MD(i,s,a){return a===Dc?il(s,i):a===tu?Ep(s,i):a===Qm?bh(s,i):void 0}(i,s,l):Ci(i,i[1],a,s)}function nE(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,_=a.matches,w=[];for(let D=0;D<_.length;D+=2){const C=_[D];w.push(C<0?null:SD(s,p[C],_[D+1],a.metadata.read))}c.matches=w}return c.matches}function rE(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const _=nE(i,s,c,a);for(let w=0;w<p.length;w+=2){const D=p[w];if(D>0)l.push(_[w/2]);else{const C=p[w+1],M=s[-D];for(let k=10;k<M.length;k++){const B=M[k];B[17]===B[3]&&rE(B[1],B,C,l)}if(null!==M[9]){const k=M[9];for(let B=0;B<k.length;B++){const K=k[B];rE(K[1],K,C,l)}}}}}return l}function RD(i){const s=De(),a=Nt(),l=Oa();Il(l+1);const c=aE(a,l);if(i.dirty&&Ho(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?rE(a,s,l,[]):nE(a,s,c,l);i.reset(p,mh),i.notifyOnChanges()}return!0}return!1}function iE(i,s,a,l){const c=Nt();if(c.firstCreatePass){const p=dn();(function oE(i,s,a){null===i.queries&&(i.queries=new Js),i.queries.track(new Dp(s,a))})(c,new Ih(s,a,l),p.index),function NT(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function sE(i,s,a){const l=new Cc(4==(4&a));D_(i,s,l,l.destroy),null===s[19]&&(s[19]=new Jm),s[19].queries.push(new wp(l))}(c,De(),a)}function ND(){return function xD(i,s){return i[19].queries[s].queryList}(De(),Oa())}function aE(i,s){return i.queries.getByIndex(s)}function ru(...i){}const ry=new _n("Application Initializer");let ul=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ru,this.reject=ru,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(fm(p))a.push(p);else if(pm(p)){const _=new Promise((w,D)=>{p.subscribe({complete:w,error:D})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ue(ry,8))},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})();const qD=new _n("AppId"),WD={provide:qD,useFactory:function zD(){return`${dE()}${dE()}${dE()}`},deps:[]};function dE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const iy=new _n("Platform Initializer"),ZD=new _n("Platform ID"),hE=new _n("appBootstrapListener");let Pi=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})();const Mp=new _n("LocaleId"),Rp=new _n("DefaultCurrencyCode");class Rh{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let sy=(()=>{class i{compileModuleSync(a){return new Zm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=g(Bn(a).declarations).reduce((_,w)=>{const D=Un(w);return D&&_.push(new zm(D)),_},[]);return new Rh(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})();const Nh=(()=>Promise.resolve(0))();function oy(i){"undefined"==typeof Zone?Nh.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Tr{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new da(!1),this.onMicrotaskEmpty=new da(!1),this.onStable=new da(!1),this.onError=new da(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function ll(){let i=Ft.requestAnimationFrame,s=Ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function HT(i){const s=()=>{!function $T(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ft,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,pE(i),i.isCheckStableRunning=!0,ay(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),pE(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,_,w)=>{try{return YD(i),a.invokeTask(c,p,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),Np(i)}},onInvoke:(a,l,c,p,_,w,D)=>{try{return YD(i),a.invoke(c,p,_,w,D)}finally{i.shouldCoalesceRunChangeDetection&&s(),Np(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,pE(i),ay(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Tr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Tr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+c,s,fE,ru,ru);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const fE={};function ay(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function pE(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function YD(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Np(i){i._nesting--,ay(i)}class xh{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new da,this.onMicrotaskEmpty=new da,this.onStable=new da,this.onError=new da}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let gE=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Tr.assertNotInAngularZone(),oy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())oy(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ue(Tr))},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})(),QD=(()=>{class i{constructor(){this._applications=new Map,ha.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return ha.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})();class GT{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function JD(i){ha=i}let ts,ha=new GT;const uy=new _n("AllowMultipleToken");class xp{constructor(s,a){this.name=s,this.token=a}}function cy(i,s,a=[]){const l=`Platform: ${s}`,c=new _n(l);return(p=[])=>{let _=dy();if(!_||_.injector.get(uy,!1))if(i)i(a.concat(p).concat({provide:c,useValue:!0}));else{const w=a.concat(p).concat({provide:c,useValue:!0},{provide:F_,useValue:"platform"});!function ly(i){if(ts&&!ts.destroyed&&!ts.injector.get(uy,!1))throw new Ne(400,"");ts=i.get(yE);const s=i.get(iy,null);s&&s.forEach(a=>a())}(un.create({providers:w,name:l}))}return function WT(i){const s=dy();if(!s)throw new Ne(401,"");return s}()}}function dy(){return ts&&!ts.destroyed?ts:null}let yE=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function KT(i,s){let a;return a="noop"===i?new xh:("zone.js"===i?void 0:i)||new Tr({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),D=[{provide:Tr,useValue:w}];return w.run(()=>{const C=un.create({providers:D,parent:this.injector,name:a.moduleType.name}),M=a.create(C),k=M.injector.get(ar,null);if(!k)throw new Ne(402,"");return w.runOutsideAngular(()=>{const B=w.onError.subscribe({next:K=>{k.handleError(K)}});M.onDestroy(()=>{vE(this._modules,M),B.unsubscribe()})}),function XD(i,s,a){try{const l=a();return fm(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,w,()=>{const B=M.injector.get(ul);return B.runInitializers(),B.donePromise.then(()=>(function ri(i){it(i,"Expected localeId to be defined"),"string"==typeof i&&(xv=i.toLowerCase().replace(/_/g,"-"))}(M.injector.get(Mp,Pm)||Pm),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const c=_E({},l);return function qT(i,s,a){const l=new Zm(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(Nc);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Ne(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ue(un))},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})();function _E(i,s){return Array.isArray(s)?s.reduce(_E,i):Object.assign(Object.assign({},i),s)}let Nc=(()=>{class i{constructor(a,l,c,p,_){this._zone=a,this._injector=l,this._exceptionHandler=c,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),D=new O.y(C=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{Tr.assertNotInAngularZone(),oy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Tr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{M.unsubscribe(),k.unsubscribe()}});this.isStable=(0,pe.T)(w,D.pipe((0,te.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ne(405,"");let c;c=a instanceof Gv?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function mE(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Tc),w=c.create(un.NULL,[],l||c.selector,p),D=w.location.nativeElement,C=w.injector.get(gE,null),M=C&&w.injector.get(QD);return C&&M&&M.registerApplication(D,C),w.onDestroy(()=>{this.detachView(w.hostView),vE(this.components,w),M&&M.unregisterApplication(D)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;vE(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(hE,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Ue(Tr),Ue(un),Ue(ar),Ue(rl),Ue(ul))},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})();function vE(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let wE=!0,eb=!1;function Oh(){return eb=!0,wE}function Ph(){if(eb)throw new Error("Cannot enable prod mode after platform setup.");wE=!1}let nb=(()=>{class i{}return i.__NG_ELEMENT_ID__=QT,i})();function QT(i){return function IE(i,s,a){if(au(i)&&!a){const l=zn(i.index,s);return new yh(l,l)}return 47&i.type?new yh(s[16],s):null}(dn(),De(),16==(16&i))}class py{constructor(){}supports(s){return hc(s)}create(s){return new eC(s)}}const cb=(i,s)=>s;class eC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||cb}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<fb(l,c,p)?a:l,w=fb(_,c,p),D=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{p||(p=[]);const C=w-c,M=D-c;if(C!=M){for(let B=0;B<C;B++){const K=B<p.length?p[B]:p[B]=0,me=K+B;M<=me&&me<C&&(p[B]=K+1)}p[_.previousIndex]=M-C}}w!==D&&s(_,w,D)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!hc(s))throw new Ne(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)p=s[w],_=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,w),l=!0),a=a._next}else c=0,function hw(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[dc()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{_=this._trackByFn(c,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,c)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new db(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new hb),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hb),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class db{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class hb{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new tC,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fb(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class SE{constructor(){}supports(s){return s instanceof Map||im(s)}create(){return new gy}}class gy{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||im(s)))throw new Ne(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,_=c._next;return p&&(p._next=_),_&&(_._prev=p),c._next=null,c._prev=null,c}const l=new kp(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class kp{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function my(){return new Fp([new py])}let Fp=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||my()),deps:[[i,new Or,new xr]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Ne(901,"")}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:my}),i})();function pb(){return new yy([new SE])}let yy=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||pb()),deps:[[i,new Or,new xr]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Ne(901,"")}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:pb}),i})();const nC=[new SE],Lp=new Fp([new py]),ME=new yy(nC),RE=cy(null,"core",[{provide:ZD,useValue:"unknown"},{provide:yE,deps:[un]},{provide:QD,deps:[]},{provide:Pi,deps:[]}]),xE=[{provide:Nc,useClass:Nc,deps:[Tr,un,ar,rl,ul]},{provide:_h,deps:[Tr],useFactory:function OE(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:ul,useClass:ul,deps:[[new xr,ry]]},{provide:sy,useClass:sy,deps:[]},WD,{provide:Fp,useFactory:function _y(){return Lp},deps:[]},{provide:yy,useFactory:function Up(){return ME},deps:[]},{provide:Mp,useFactory:function NE(i){return i||function gb(){return"undefined"!=typeof $localize&&$localize.locale||Pm}()},deps:[[new qi(Mp),new xr,new Or]]},{provide:Rp,useValue:"USD"}];let cl=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ue(Nc))},i.\u0275mod=Ar({type:i}),i.\u0275inj=zt({providers:xE}),i})()},3942:(nt,Te,P)=>{"use strict";P.d(Te,{Z:()=>Ne});var f=P(2090),X=P(4859),O=P(9681),pe=P(1877);class te{constructor(W,ae){this._delegate=W,this.firebase=ae,(0,O._addComponent)(W,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=W.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(W){this._delegate.automaticDataCollectionEnabled=W}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(W=>{this._delegate.checkDestroyed(),W()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(W,ae=O._DEFAULT_ENTRY_NAME){var Re;this._delegate.checkDestroyed();const Ie=this._delegate.container.getProvider(W);return!Ie.isInitialized()&&"EXPLICIT"===(null===(Re=Ie.getComponent())||void 0===Re?void 0:Re.instantiationMode)&&Ie.initialize(),Ie.getImmediate({identifier:ae})}_removeServiceInstance(W,ae=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(W).clearInstance(ae)}_addComponent(W){(0,O._addComponent)(this._delegate,W)}_addOrOverwriteComponent(W){(0,O._addOrOverwriteComponent)(this._delegate,W)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function de(){const Le=function ce(Le){const W={},ae={__esModule:!0,initializeApp:function ee(je,se={}){const Z=O.initializeApp(je,se);if((0,f.r3)(W,Z.name))return W[Z.name];const ie=new Le(Z,ae);return W[Z.name]=ie,ie},app:Ie,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(je){const se=je.name,Z=se.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const ie=(ge=Ie())=>{if("function"!=typeof ge[Z])throw re.create("invalid-app-argument",{appName:se});return ge[Z]()};void 0!==je.serviceProps&&(0,f.ZB)(ie,je.serviceProps),ae[Z]=ie,Le.prototype[Z]=function(...ge){return this._getService.bind(this,se).apply(this,je.multipleInstances?ge:[])}}return"PUBLIC"===je.type?ae[Z]:null},removeApp:function Re(je){delete W[je]},useAsService:function He(je,se){return"serverAuth"===se?null:se},modularAPIs:O}};function Ie(je){if(!(0,f.r3)(W,je=je||O._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:je});return W[je]}return ae.default=ae,Object.defineProperty(ae,"apps",{get:function Se(){return Object.keys(W).map(je=>W[je])}}),Ie.App=Le,ae}(te);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function W(ae){(0,f.ZB)(Le,ae)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Le}(),U=new pe.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=j;!function be(Le){(0,O.registerVersion)("@firebase/app-compat","0.1.17",Le)}()},9681:(nt,Te,P)=>{"use strict";P.r(Te),P.d(Te,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>Cr,_DEFAULT_ENTRY_NAME:()=>Rn,_addComponent:()=>Kt,_addOrOverwriteComponent:()=>hr,_apps:()=>ot,_clearComponents:()=>xt,_components:()=>Fn,_getProvider:()=>ki,_registerComponent:()=>qt,_removeServiceInstance:()=>zt,deleteApp:()=>Li,getApp:()=>Ss,getApps:()=>ai,initializeApp:()=>Fi,onLog:()=>Ln,registerVersion:()=>$r,setLogLevel:()=>In});var f=P(5861),X=P(4859),O=P(1877),pe=P(2090);class te{constructor(Ke){this.container=Ke}getPlatformInfoString(){return this.container.getProviders().map(Mt=>{if(function fe(pt){const Ke=pt.getComponent();return"VERSION"===(null==Ke?void 0:Ke.type)}(Mt)){const sn=Mt.getImmediate();return`${sn.library}/${sn.version}`}return null}).filter(Mt=>Mt).join(" ")}}const re="@firebase/app",de=new O.Yd("@firebase/app"),Rn="[DEFAULT]",it={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ot=new Map,Fn=new Map;function Kt(pt,Ke){try{pt.container.addComponent(Ke)}catch(Mt){de.debug(`Component ${Ke.name} failed to register with FirebaseApp ${pt.name}`,Mt)}}function hr(pt,Ke){pt.container.addOrOverwriteComponent(Ke)}function qt(pt){const Ke=pt.name;if(Fn.has(Ke))return de.debug(`There were multiple attempts to register component ${Ke}.`),!1;Fn.set(Ke,pt);for(const Mt of ot.values())Kt(Mt,pt);return!0}function ki(pt,Ke){return pt.container.getProvider(Ke)}function zt(pt,Ke,Mt=Rn){ki(pt,Ke).clearInstance(Mt)}function xt(){Fn.clear()}const rr=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class As{constructor(Ke,Mt,sn){this._isDeleted=!1,this._options=Object.assign({},Ke),this._config=Object.assign({},Mt),this._name=Mt.name,this._automaticDataCollectionEnabled=Mt.automaticDataCollectionEnabled,this._container=sn,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ke){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ke}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ke){this._isDeleted=Ke}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}const Cr="9.6.6";function Fi(pt,Ke={}){"object"!=typeof Ke&&(Ke={name:Ke});const Mt=Object.assign({name:Rn,automaticDataCollectionEnabled:!1},Ke),sn=Mt.name;if("string"!=typeof sn||!sn)throw rr.create("bad-app-name",{appName:String(sn)});const fr=ot.get(sn);if(fr){if((0,pe.vZ)(pt,fr.options)&&(0,pe.vZ)(Mt,fr.config))return fr;throw rr.create("duplicate-app",{appName:sn})}const Rt=new X.H0(sn);for(const at of Fn.values())Rt.addComponent(at);const Ye=new As(pt,Mt,Rt);return ot.set(sn,Ye),Ye}function Ss(pt=Rn){const Ke=ot.get(pt);if(!Ke)throw rr.create("no-app",{appName:pt});return Ke}function ai(){return Array.from(ot.values())}function Li(pt){return ht.apply(this,arguments)}function ht(){return(ht=(0,f.Z)(function*(pt){const Ke=pt.name;ot.has(Ke)&&(ot.delete(Ke),yield Promise.all(pt.container.getProviders().map(Mt=>Mt.delete())),pt.isDeleted=!0)})).apply(this,arguments)}function $r(pt,Ke,Mt){var sn;let fr=null!==(sn=it[pt])&&void 0!==sn?sn:pt;Mt&&(fr+=`-${Mt}`);const Rt=fr.match(/\s|\//),Ye=Ke.match(/\s|\//);if(Rt||Ye){const at=[`Unable to register library "${fr}" with version "${Ke}":`];return Rt&&at.push(`library name "${fr}" contains illegal characters (whitespace or "/")`),Rt&&Ye&&at.push("and"),Ye&&at.push(`version name "${Ke}" contains illegal characters (whitespace or "/")`),void de.warn(at.join(" "))}qt(new X.wA(`${fr}-version`,()=>({library:fr,version:Ke}),"VERSION"))}function Ln(pt,Ke){if(null!==pt&&"function"!=typeof pt)throw rr.create("invalid-log-argument");(0,O.Am)(pt,Ke)}function In(pt){(0,O.Ub)(pt)}!function eo(pt){qt(new X.wA("platform-logger",Ke=>new te(Ke),"PRIVATE")),$r(re,"0.7.16",pt),$r(re,"0.7.16","esm2017"),$r("fire-js","")}("")},4859:(nt,Te,P)=>{"use strict";P.d(Te,{wA:()=>O,H0:()=>ce});var f=P(5861),X=P(2090);class O{constructor(j,U,Q){this.name=j,this.instanceFactory=U,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const pe="[DEFAULT]";class te{constructor(j,U){this.name=j,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const U=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(U)){const Q=new X.BH;if(this.instancesDeferred.set(U,Q),this.isInitialized(U)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:U});Be&&Q.resolve(Be)}catch(Be){}}return this.instancesDeferred.get(U).promise}getImmediate(j){var U;const Q=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),Be=null!==(U=null==j?void 0:j.optional)&&void 0!==U&&U;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(be){if(Be)return null;throw be}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function re(de){return"EAGER"===de.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:pe})}catch(U){}for(const[U,Q]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(U);try{const be=this.getOrInitializeService({instanceIdentifier:Be});Q.resolve(be)}catch(be){}}}}clearInstance(j=pe){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,f.Z)(function*(){const U=Array.from(j.instances.values());yield Promise.all([...U.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...U.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=pe){return this.instances.has(j)}getOptions(j=pe){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:U={}}=j,Q=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:Q,options:U});for(const[be,Ne]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(be)&&Ne.resolve(Be);return Be}onInit(j,U){var Q;const Be=this.normalizeInstanceIdentifier(U),be=null!==(Q=this.onInitCallbacks.get(Be))&&void 0!==Q?Q:new Set;be.add(j),this.onInitCallbacks.set(Be,be);const Ne=this.instances.get(Be);return Ne&&j(Ne,Be),()=>{be.delete(j)}}invokeOnInitCallbacks(j,U){const Q=this.onInitCallbacks.get(U);if(Q)for(const Be of Q)try{Be(j,U)}catch(be){}}getOrInitializeService({instanceIdentifier:j,options:U={}}){let Q=this.instances.get(j);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(de=j,de===pe?void 0:de),options:U}),this.instances.set(j,Q),this.instancesOptions.set(j,U),this.invokeOnInitCallbacks(Q,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Q)}catch(Be){}var de;return Q||null}normalizeInstanceIdentifier(j=pe){return this.component?this.component.multipleInstances?j:pe:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const U=this.getProvider(j.name);if(U.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);U.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const U=new te(j,this);return this.providers.set(j,U),U}getProviders(){return Array.from(this.providers.values())}}},1877:(nt,Te,P)=>{"use strict";P.d(Te,{in:()=>X,Yd:()=>re,Ub:()=>ce,Am:()=>de});const f=[];var X=(()=>{return(j=X||(X={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",X;var j})();const O={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},pe=X.INFO,te={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},fe=(j,U,...Q)=>{if(U<j.logLevel)return;const Be=(new Date).toISOString(),be=te[U];if(!be)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[be](`[${Be}]  ${j.name}:`,...Q)};class re{constructor(U){this.name=U,this._logLevel=pe,this._logHandler=fe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in X))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?O[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...U),this._logHandler(this,X.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...U),this._logHandler(this,X.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,X.INFO,...U),this._logHandler(this,X.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,X.WARN,...U),this._logHandler(this,X.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...U),this._logHandler(this,X.ERROR,...U)}}function ce(j){f.forEach(U=>{U.setLogLevel(j)})}function de(j,U){for(const Q of f){let Be=null;U&&U.level&&(Be=O[U.level]),Q.userLogHandler=null===j?null:(be,Ne,...Le)=>{const W=Le.map(ae=>{if(null==ae)return null;if("string"==typeof ae)return ae;if("number"==typeof ae||"boolean"==typeof ae)return ae.toString();if(ae instanceof Error)return ae.message;try{return JSON.stringify(ae)}catch(Re){return null}}).filter(ae=>ae).join(" ");Ne>=(null!=Be?Be:be.logLevel)&&j({level:X[Ne].toLowerCase(),message:W,args:Le,type:be.name})}}}},5861:(nt,Te,P)=>{"use strict";function f(O,pe,te,fe,re,ce,de){try{var j=O[ce](de),U=j.value}catch(Q){return void te(Q)}j.done?pe(U):Promise.resolve(U).then(fe,re)}function X(O){return function(){var pe=this,te=arguments;return new Promise(function(fe,re){var ce=O.apply(pe,te);function de(U){f(ce,fe,re,de,j,"next",U)}function j(U){f(ce,fe,re,de,j,"throw",U)}de(void 0)})}}P.d(Te,{Z:()=>X})}},nt=>{nt(nt.s=342)}]);